# 终端预览器集成规划

> **文档版本**: v1.2  
> **创建日期**: 2024-12-11  
> **更新日期**: 2024-12-12  
> **状态**: 📋 规划中

---

## 概述

本目录包含终端全局预览器（TerminalPreview）的集成规划文档，用于指导分销系统、陪诊员系统和营销中心与预览器的集成工作。

> 📌 **文档定位**：本文档同时定义：**管理后台 TerminalPreview 的预览能力要求**，以及**终端侧双身份视角切换的统一规范**，以保证预览与真实终端一致。

---

## 文档索引

| 文档 | 说明 | 优先级 |
|------|------|--------|
| [01-TerminalPreview集成规格](./01-TerminalPreview集成规格.md) | 预览器组件 Props、路由扩展、数据覆盖机制 | P0 |
| [02-双身份会话与视角切换规格](./02-双身份会话与视角切换规格.md) | 双会话模型、请求分流、入口策略、安全边界 | P0 |
| [03-模块页面接入清单与排期](./03-模块页面接入清单与排期.md) | 营销中心/陪诊员页面清单、API、排期 | P1 |

---

## 关键决策（必须前置）

### 目标

- 不开发额外终端（小程序/App/H5 仍为一套）
- 普通用户与陪诊员拥有不同界面视角（字段、入口、TabBar、可访问页面不同）
- 在"我的"页面提供「陪诊员入口」，对普通用户隐藏
- 陪诊员可在同一终端内自由切换视角

### 约束

- 当前陪诊员与普通用户为 **两套用户系统**（两套账号体系、两套鉴权）
- 仅靠前端隐藏入口不构成安全边界，**必须由后端鉴权兜底**

---

## 集成完成度概览

| 系统模块 | 终端页面存在 | 预览器支持 | 集成状态 | 优先级 |
|---------|------------|----------|---------|--------|
| **基础功能** | ✅ | ✅ | ✅ 已完成 | - |
| - 首页 | ✅ | ✅ | ✅ | - |
| - 服务列表/详情 | ✅ | ✅ | ✅ | - |
| - 病历管理 | ✅ | ✅ | ✅ | - |
| - 个人中心 | ✅ | ✅ | ✅ | - |
| **营销中心** | ✅ | ❌ | ❌ 未集成 | **P0** |
| - 会员中心 | ✅ | ❌ | ❌ | P0 |
| - 优惠券 | ✅ | ❌ | ❌ | P0 |
| - 积分系统 | ✅ | ❌ | ❌ | P1 |
| - 邀请好友 | ✅ | ❌ | ❌ | P1 |
| - 活动中心 | ✅ | ❌ | ❌ | P1 |
| **陪诊员系统** | ✅ | ❌ | ❌ 未集成 | **P1** |
| - 陪诊员列表/详情 | ✅ | ❌ | ❌ | P1 |
| - 工作台首页 | ✅ | ❌ | ❌ | P2 |
| - 订单池/订单详情 | ✅ | ❌ | ❌ | P2 |
| - 收入与提现 | ✅ | ❌ | ❌ | P2 |
| **分销系统** | ❌ | ❌ | ❌ 无终端页面 | **P2** |

---

## 实施排期概览

| 阶段 | 周期 | 目标 | 优先级 |
|------|------|------|--------|
| 阶段一 | 第 1-2 周 | 营销中心基础集成 | P0 |
| 阶段二 | 第 3-4 周 | 陪诊员系统集成 + 双会话 | P1 |
| 阶段三 | 第 5 周 | 优化和测试 | P2 |

---

## 相关文档

- [终端全局预览器组件开发文档](../终端全局预览器组件开发文档.md)
- [营销中心架构规划](../营销中心/README.md)
- [陪诊员中心架构规划](../陪诊员中心/README.md)

---

## 参考代码

- 预览器主组件：`src/components/terminal-preview/index.tsx`
- 终端页面源码：`miniapp/src/pages/`
- 管理后台页面：`src/features/`

