# 输入组件

## 文本输入

```tsx
<FormControl>
  <Input
    placeholder='请输入...'
    className='col-span-4'
    autoComplete='off'
    {...field}
  />
</FormControl>
```

---

## 密码输入

```tsx
<FormControl>
  <PasswordInput
    placeholder='请输入密码'
    className='col-span-4'
    {...field}
  />
</FormControl>
```

---

## 多行文本

```tsx
<FormControl>
  <Textarea
    className='col-span-4 resize-none'
    placeholder='请输入描述...'
    {...field}
  />
</FormControl>
```

---

## 下拉选择

`SelectDropdown` 组件默认全宽（`w-full`），与其他表单元素保持一致。

### 水平布局（Dialog 标准表单）

```tsx
<SelectDropdown
  defaultValue={field.value}
  onValueChange={field.onChange}
  placeholder='请选择...'
  className='col-span-4'
  items={options.map(({ label, value }) => ({ label, value }))}
/>
```

### 垂直布局（Dialog 简单表单、Sheet、Card 内）

```tsx
<SelectDropdown
  defaultValue={field.value}
  onValueChange={field.onChange}
  placeholder='请选择...'
  items={options.map(({ label, value }) => ({ label, value }))}
/>
```

---

## 数字输入

```tsx
<FormControl>
  <Input type='number' {...field} />
</FormControl>
```

### 可选数字（允许清空）

```tsx
<FormControl>
  <Input
    type='number'
    placeholder='留空不限制'
    value={field.value ?? ''}
    onChange={(e) => field.onChange(e.target.value ? Number(e.target.value) : undefined)}
  />
</FormControl>
```

---

## 日期时间

```tsx
<FormControl>
  <Input type='datetime-local' {...field} />
</FormControl>
```

### 日期时间格式化工具

```tsx
const toDatetimeLocal = (value?: string | null) => {
  if (!value) return ''
  const d = new Date(value)
  const tzOffsetMs = d.getTimezoneOffset() * 60 * 1000
  return new Date(d.getTime() - tzOffsetMs).toISOString().slice(0, 16)
}

// 使用
form.reset({
  startAt: toDatetimeLocal(currentRow.startAt),
  endAt: toDatetimeLocal(currentRow.endAt),
})
```

---

## 开关组件

```tsx
<FormField
  control={form.control}
  name='isActive'
  render={({ field }) => (
    <FormItem className='flex flex-row items-center justify-between rounded-lg border p-3'>
      <div className='space-y-0.5'>
        <FormLabel>启用功能</FormLabel>
        <FormDescription>功能说明文字</FormDescription>
      </div>
      <FormControl>
        <Switch checked={field.value} onCheckedChange={field.onChange} />
      </FormControl>
    </FormItem>
  )}
/>
```

### 简化版（无描述）

```tsx
<FormField
  control={form.control}
  name='stackWithMember'
  render={({ field }) => (
    <FormItem className='flex flex-row items-center justify-between rounded-lg border p-3'>
      <FormLabel>允许与会员叠加</FormLabel>
      <FormControl>
        <Switch checked={field.value} onCheckedChange={field.onChange} />
      </FormControl>
    </FormItem>
  )}
/>
```

---

## 条件禁用

```tsx
const isPasswordTouched = !!form.formState.dirtyFields.password

<FormControl>
  <PasswordInput
    disabled={!isPasswordTouched}
    placeholder='请再次输入密码'
    className='col-span-4'
    {...field}
  />
</FormControl>
```

---

## 组件对照表

| 数据类型 | 推荐组件 | 说明 |
|---------|---------|------|
| 短文本 | `Input` | 用户名、标题等 |
| 长文本 | `Textarea` | 描述、备注等 |
| 密码 | `PasswordInput` | 自带显示/隐藏切换 |
| 枚举选择 | `SelectDropdown` | 状态、类型等 |
| 数字 | `Input type='number'` | 价格、数量等 |
| 日期时间 | `Input type='datetime-local'` | 开始/结束时间 |
| 布尔开关 | `Switch` | 启用/禁用等 |
