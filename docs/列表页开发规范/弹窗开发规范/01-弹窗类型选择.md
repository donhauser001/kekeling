# 弹窗类型选择

## 组件类型总览

| 类型 | 用途 | 组件 | 宽度 |
|------|------|------|------|
| **简单表单弹窗** | 邀请/快捷操作（≤5字段） | `Dialog` | `sm:max-w-md` |
| **标准表单弹窗** | 新建/编辑实体（6-15字段） | `Dialog` | `sm:max-w-lg` |
| **复杂表单抽屉** | 多板块配置/详情（>15字段） | `Sheet` + `Tabs` | 侧边全高 |
| **确认弹窗** | 删除/危险操作确认 | `ConfirmDialog` | 默认 |
| **详情抽屉** | 查看详情/只读 | `Sheet` | 侧边全高 |
| **配置抽屉** | 全局/模块级配置 | `Sheet` | 侧边全高 |

---

## Dialog vs Sheet 决策指南

### Dialog（模态窗）适用场景

| 场景 | 说明 | 示例 |
|------|------|------|
| **阻断式操作** | 必须完成当前操作才能继续 | 删除确认、提交审核 |
| **创建实体** | 新建一条独立记录 | 新建用户、新建活动 |
| **简单编辑** | 字段少，快速完成 | 修改名称、调整状态 |
| **表单提交** | 有明确的提交动作 | 邀请用户、发送通知 |
| **字段数量** | ≤15 个字段 | - |

**特点**：聚焦、阻断、强制完成

### Sheet（抽屉）适用场景

| 场景 | 说明 | 示例 |
|------|------|------|
| **配置/设置** | 全局或模块级配置 | 分销配置、主题设置 |
| **详情查看** | 只读或部分可编辑 | 订单详情、用户资料 |
| **复杂表单** | 多板块、多步骤 | 服务编辑、商品编辑 |
| **需要参考** | 操作时需看主页面 | 批量操作、数据对比 |
| **辅助面板** | 不完全阻断主流程 | 筛选器、帮助面板 |
| **字段数量** | >15 个字段或多板块 | - |

**特点**：宽敞、可参考、渐进式

---

## 决策流程

```
开始
  │
  ├─ 是否为确认/警告操作？ ──是──→ Dialog（ConfirmDialog）
  │
  ├─ 是否为配置/设置类？ ──是──→ Sheet（抽屉）
  │
  ├─ 是否需要参考主页面？ ──是──→ Sheet（抽屉）
  │
  ├─ 字段数量 > 15 或多板块？ ──是──→ Sheet + Tabs（抽屉+分页）
  │
  ├─ 是否为详情查看？ ──是──→ Sheet（抽屉）
  │
  └─ 其他（创建/编辑/提交） ──→ Dialog（模态窗）
```

---

## 具体业务场景映射

| 业务场景 | 推荐类型 | 理由 |
|---------|---------|------|
| 新建/编辑员工 | Dialog | 字段适中，聚焦操作 |
| 新建/编辑活动 | Dialog | 单一实体，需要完成 |
| 删除确认 | Dialog (Confirm) | 阻断式，强制确认 |
| 分销配置 | Sheet + Tabs | 多板块配置 |
| 服务详情编辑 | Sheet + Tabs | 字段多，需要分组 |
| 订单详情 | Sheet | 查看为主，可部分操作 |
| 主题设置 | Sheet | 配置类，可随时调整 |
| 筛选面板 | Sheet | 辅助功能，不阻断 |
| 邀请用户 | Dialog | 简单表单，明确提交 |
| 权限设置 | Dialog / Sheet | 看复杂度，简单用 Dialog |

---

## 编辑与查看分离原则

**重要规范**：编辑操作和查看操作不可混用同一个弹窗。

| 操作类型 | 推荐组件 | 说明 |
|---------|---------|------|
| **新建** | Dialog | 空表单，聚焦填写 |
| **编辑** | Dialog | 预填数据，聚焦修改 |
| **查看详情** | Sheet | 只读展示，信息量大时使用抽屉 |

### 为什么要分离？

1. **用户意图明确**：编辑是"修改"，查看是"了解"，混用会模糊用户意图
2. **防止误操作**：查看时误触提交，可能导致数据被意外修改
3. **信息展示优化**：查看详情往往需要展示更多信息（如操作日志、关联数据），用抽屉更合适
4. **交互一致性**：统一"查看用抽屉，编辑用弹窗"的交互模式

### 操作列菜单设计

```tsx
<DropdownMenuContent align='end' className='w-[160px]'>
  <DropdownMenuItem onClick={() => onView(item)}>
    查看详情
    <DropdownMenuShortcut><Eye size={16} /></DropdownMenuShortcut>
  </DropdownMenuItem>
  <DropdownMenuItem onClick={() => onEdit(item)}>
    编辑
    <DropdownMenuShortcut><Pencil size={16} /></DropdownMenuShortcut>
  </DropdownMenuItem>
  <DropdownMenuSeparator />
  <DropdownMenuItem onClick={() => onDelete(item.id)} className='text-red-500!'>
    删除
    <DropdownMenuShortcut><Trash2 size={16} /></DropdownMenuShortcut>
  </DropdownMenuItem>
</DropdownMenuContent>
```

### 详情抽屉结构

```tsx
<Sheet open={viewOpen} onOpenChange={setViewOpen}>
  <SheetContent className='w-[500px] sm:max-w-[500px]'>
    <SheetHeader>
      <SheetTitle>项目详情</SheetTitle>
      <SheetDescription>查看项目的详细信息</SheetDescription>
    </SheetHeader>
    
    <div className='space-y-6 py-4'>
      {/* 基础信息区 */}
      <div className='space-y-2'>
        <h4 className='text-sm font-medium text-muted-foreground'>基础信息</h4>
        <dl className='grid grid-cols-2 gap-2 text-sm'>
          <dt className='text-muted-foreground'>名称</dt>
          <dd>{item.name}</dd>
          <dt className='text-muted-foreground'>状态</dt>
          <dd><Badge variant='outline'>{item.status}</Badge></dd>
          {/* 更多字段... */}
        </dl>
      </div>
      
      {/* 其他信息区 */}
      <div className='space-y-2'>
        <h4 className='text-sm font-medium text-muted-foreground'>操作记录</h4>
        {/* 日志列表... */}
      </div>
    </div>
    
    <SheetFooter>
      <Button variant='outline' onClick={() => setViewOpen(false)}>
        关闭
      </Button>
      <Button onClick={() => { setViewOpen(false); onEdit(item); }}>
        编辑
      </Button>
    </SheetFooter>
  </SheetContent>
</Sheet>
```
