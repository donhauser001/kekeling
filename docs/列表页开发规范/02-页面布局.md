# 页面布局

## 基本结构

```tsx
import { Header } from '@/components/layout/header'
import { Main } from '@/components/layout/main'
import { TopNav } from '@/components/layout/top-nav'

export function ModulePage() {
  return (
    <>
      <Header fixed>
        <TopNav links={topNav} />
        <div className='ms-auto flex items-center space-x-4'>
          <Search />
          <MessageButton />
          <ThemeSwitch />
          <ConfigDrawer />
          <ProfileDropdown />
        </div>
      </Header>

      <Main className='flex flex-1 flex-col gap-4 sm:gap-6'>
        {/* 标题区 */}
        <div className='flex flex-wrap items-end justify-between gap-2'>
          <div>
            <h2 className='text-2xl font-bold tracking-tight'>页面标题</h2>
            <p className='text-muted-foreground'>页面描述文字</p>
          </div>
          <Button onClick={handleCreate}>
            <Plus className='mr-2 h-4 w-4' />
            新建按钮
          </Button>
        </div>

        {/* 工具栏 */}
        <div className='flex flex-wrap items-center gap-4'>
          <DataTableToolbar table={table} ... />
        </div>

        {/* 表格 */}
        <ModuleTable ... />

        {/* 翻页（固定底部） */}
        <DataTablePagination table={table} className='mt-auto' />
      </Main>

      {/* 弹窗 */}
      <Dialog ... />
    </>
  )
}
```

---

## Main 组件规范

> ⚠️ **强制要求**：`Main` 组件必须使用以下 className。

```tsx
<Main className='flex flex-1 flex-col gap-4 sm:gap-6'>
```

| 类名 | 作用 |
|------|------|
| `flex` | 启用 Flex 布局 |
| `flex-1` | 撑满剩余高度 |
| `flex-col` | 垂直方向排列 |
| `gap-4 sm:gap-6` | 统一组件间距（小屏 16px，大屏 24px） |

**为什么这很重要？**

1. `flex-1` + `flex-col` 使 Main 撑满视口剩余高度
2. `gap-4 sm:gap-6` 统一间距，不需要额外的 `mb-*`
3. 配合翻页组件的 `mt-auto`，可将翻页固定在底部

---

## 布局要点

### 1. 不使用 Card 包裹表格

表格直接放在 `Main` 组件内，使用 `rounded-md border` 样式。

```tsx
// ❌ 错误
<Main>
  <Card>
    <Table>...</Table>
  </Card>
</Main>

// ✅ 正确
<Main className='flex flex-1 flex-col gap-4 sm:gap-6'>
  <div className='overflow-hidden rounded-md border'>
    <Table>...</Table>
  </div>
</Main>
```

### 2. 标题区布局

使用 `flex justify-between` 实现左右布局：

```tsx
<div className='flex flex-wrap items-end justify-between gap-2'>
  {/* 左侧：标题和描述 */}
  <div>
    <h2 className='text-2xl font-bold tracking-tight'>页面标题</h2>
    <p className='text-muted-foreground'>页面描述文字</p>
  </div>
  
  {/* 右侧：操作按钮 */}
  <Button onClick={handleCreate}>
    <Plus className='mr-2 h-4 w-4' />
    新建
  </Button>
</div>
```

### 3. 不要使用额外的间距类

由于 `Main` 已经设置了 `gap-4 sm:gap-6`，不要在子元素上添加额外的 `mb-*` 或 `mt-*`。

```tsx
// ❌ 错误：额外的 mb-6
<div className='mb-6 flex items-center justify-between'>
  ...
</div>

// ✅ 正确：间距由 Main 的 gap 控制
<div className='flex flex-wrap items-end justify-between gap-2'>
  ...
</div>
```

### 4. 翻页组件固定底部

翻页组件使用 `mt-auto` 推到容器底部：

```tsx
<Main className='flex flex-1 flex-col gap-4 sm:gap-6'>
  {/* 其他内容 */}
  
  {/* 翻页固定底部 */}
  <DataTablePagination table={table} className='mt-auto' />
</Main>
```

---

## 响应式处理

- `flex-wrap`：小屏时标题和按钮自动换行
- `items-end`：按钮与标题底部对齐
- `gap-2`：换行时的间距
- `gap-4 sm:gap-6`：小屏/大屏不同间距

---

## 完整示例

```tsx
export function OrdersPage() {
  // ... 状态和逻辑

  return (
    <>
      <Header fixed>
        <Search />
        <div className='ms-auto flex items-center gap-4'>
          <MessageButton />
          <ThemeSwitch />
          <ConfigDrawer />
          <ProfileDropdown />
        </div>
      </Header>

      <Main className='flex flex-1 flex-col gap-4 sm:gap-6'>
        {/* 标题区 */}
        <div className='flex flex-wrap items-end justify-between gap-2'>
          <div>
            <h2 className='text-2xl font-bold tracking-tight'>订单管理</h2>
            <p className='text-muted-foreground'>查看和管理所有订单</p>
          </div>
          <Button onClick={handleExport}>
            <Download className='mr-2 h-4 w-4' />
            导出
          </Button>
        </div>

        {/* 工具栏 */}
        <div className='flex flex-wrap items-center gap-4'>
          <DataTableToolbar
            table={table}
            searchPlaceholder='搜索订单号...'
            filters={[...]}
          />
        </div>

        {/* 表格 */}
        <OrdersTable
          table={table}
          isLoading={isLoading}
          onRowClick={handleView}
        />

        {/* 翻页（固定底部） */}
        {!isLoading && orders.length > 0 && (
          <DataTablePagination table={table} className='mt-auto' />
        )}
      </Main>

      {/* 弹窗 */}
      <OrdersDetailSheet ... />
      <ConfirmDialog ... />
    </>
  )
}
```

---

## 检查清单

- [ ] `Main` 使用 `className='flex flex-1 flex-col gap-4 sm:gap-6'`
- [ ] 标题区使用 `className='flex flex-wrap items-end justify-between gap-2'`
- [ ] 表格使用 `<div className='overflow-hidden rounded-md border'>` 包裹
- [ ] 翻页组件使用 `className='mt-auto'`
- [ ] 不要使用额外的 `mb-*` 间距类
- [ ] 不要使用 `Card` 包裹表格
