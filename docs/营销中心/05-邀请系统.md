# é‚€è¯·ç³»ç»Ÿè§„åˆ’æ–‡æ¡£

> è¿”å› [è¥é”€ä¸­å¿ƒæ€»è§ˆ](./README.md)  
> çŠ¶æ€ï¼šâœ… å·²è§„åˆ’

---

## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ

### 1.1 é‚€è¯·ç±»å‹

| ç±»å‹ | è¯´æ˜ | å¥–åŠ±æ—¶æœº |
|------|------|---------|
| **é‚€è¯·æ–°ç”¨æˆ·** | é‚€è¯·å¥½å‹æ³¨å†Œæˆä¸ºæ–°ç”¨æˆ· | æ–°ç”¨æˆ·é¦–å•å |
| **é‚€è¯·å°±è¯Šäºº** | é‚€è¯·å·²æ·»åŠ çš„å°±è¯Šäººæ³¨å†Œ | å°±è¯Šäººæ³¨å†Œå |

### 1.2 é‚€è¯·å¥–åŠ±

| è§’è‰² | å¥–åŠ±ç±»å‹ | é»˜è®¤å€¼ |
|------|---------|-------|
| é‚€è¯·äºº | ä¼˜æƒ åˆ¸ | Â¥20æ»¡å‡åˆ¸ |
| é‚€è¯·äºº | ç§¯åˆ† | 200ç§¯åˆ† |
| è¢«é‚€è¯·äºº | ä¼˜æƒ åˆ¸ | Â¥10æ–°äººåˆ¸ |

### 1.3 é‚€è¯·æ–¹å¼

- **åˆ†äº«é“¾æ¥**ï¼šå«é‚€è¯·ç çš„æ³¨å†Œé“¾æ¥
- **åˆ†äº«æµ·æŠ¥**ï¼šç”Ÿæˆå¸¦äºŒç»´ç çš„æµ·æŠ¥å›¾ç‰‡
- **é‚€è¯·ç **ï¼šæ‰‹åŠ¨è¾“å…¥é‚€è¯·ç 
- **çŸ­ä¿¡é‚€è¯·**ï¼šå‘å°±è¯Šäººå‘é€æ³¨å†ŒçŸ­ä¿¡

---

## äºŒã€æ•°æ®æ¨¡å‹

### 2.1 é‚€è¯·è§„åˆ™

```prisma
model ReferralRule {
  id               String   @id @default(uuid())
  name             String                          // è§„åˆ™åç§°
  type             String                          // user: ç”¨æˆ·é‚€è¯·, patient: å°±è¯Šäººé‚€è¯·
  
  // é‚€è¯·äººå¥–åŠ±
  inviterCouponId  String?  @map("inviter_coupon_id")
  inviterPoints    Int      @default(0) @map("inviter_points")
  
  // è¢«é‚€è¯·äººå¥–åŠ±
  inviteeCouponId  String?  @map("invitee_coupon_id")
  inviteePoints    Int      @default(0) @map("invitee_points")
  
  // å‘æ”¾æ¡ä»¶
  requireFirstOrder Boolean @default(true) @map("require_first_order")
  // user ç±»å‹ï¼šè¢«é‚€è¯·äººéœ€å®Œæˆé¦–å•
  // patient ç±»å‹ï¼šä»…éœ€æ³¨å†Œ
  
  // é™åˆ¶
  dailyLimit       Int?     @map("daily_limit")    // æ¯æ—¥é‚€è¯·ä¸Šé™
  totalLimit       Int?     @map("total_limit")    // ç´¯è®¡é‚€è¯·ä¸Šé™
  
  status           String   @default("active")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  
  @@map("referral_rules")
}
```

### 2.2 ç”¨æˆ·é‚€è¯·ç 

```prisma
model UserInviteCode {
  id         String   @id @default(uuid())
  userId     String   @unique @map("user_id")
  code       String   @unique                     // å”¯ä¸€é‚€è¯·ç 
  
  // ç»Ÿè®¡
  inviteCount Int     @default(0) @map("invite_count")   // é‚€è¯·äººæ•°
  rewardCount Int     @default(0) @map("reward_count")   // å·²è·å¥–åŠ±æ¬¡æ•°
  
  createdAt  DateTime @default(now())
  
  user       User     @relation(fields: [userId], references: [id])
  
  @@map("user_invite_codes")
}
```

### 2.3 é‚€è¯·è®°å½•

```prisma
model ReferralRecord {
  id           String    @id @default(uuid())
  inviterId    String    @map("inviter_id")        // é‚€è¯·äºº
  inviteeId    String?   @map("invitee_id")        // è¢«é‚€è¯·äººï¼ˆæ³¨å†Œåï¼‰
  inviteCode   String    @map("invite_code")
  
  type         String                              // user/patient
  
  // å°±è¯Šäººé‚€è¯·ç›¸å…³
  patientId    String?   @map("patient_id")
  patientPhone String?   @map("patient_phone")
  
  // çŠ¶æ€
  status       String    @default("pending")
  // pending: å¾…æ³¨å†Œ
  // registered: å·²æ³¨å†Œ
  // rewarded: å·²å‘æ”¾å¥–åŠ±
  // invalid: æ— æ•ˆï¼ˆè¶…æ—¶/ä½œå¼Šï¼‰
  
  registeredAt DateTime? @map("registered_at")
  rewardedAt   DateTime? @map("rewarded_at")
  
  // å¥–åŠ±å¿«ç…§
  inviterReward Json?    @map("inviter_reward")
  inviteeReward Json?    @map("invitee_reward")
  
  createdAt    DateTime  @default(now())
  
  inviter      User      @relation("Inviter", fields: [inviterId], references: [id])
  invitee      User?     @relation("Invitee", fields: [inviteeId], references: [id])
  
  @@index([inviterId])
  @@index([inviteeId])
  @@index([inviteCode])
  @@map("referral_records")
}
```

### 2.4 Patient æ¨¡å‹æ‰©å±•

```prisma
model Patient {
  // ... ç°æœ‰å­—æ®µ ...
  
  // é‚€è¯·æ³¨å†Œç›¸å…³
  invitedAt        DateTime? @map("invited_at")
  inviteStatus     String    @default("none") @map("invite_status")
  // none: æœªé‚€è¯·
  // invited: å·²é‚€è¯·å¾…æ³¨å†Œ
  // registered: å·²æ³¨å†Œ
  
  registeredUserId String?   @map("registered_user_id")
  registeredUser   User?     @relation(fields: [registeredUserId], references: [id])
}
```

---

## ä¸‰ã€ä¸šåŠ¡é€»è¾‘

### 3.1 ç”Ÿæˆé‚€è¯·ç 

```typescript
async function getOrCreateInviteCode(userId: string): Promise<string> {
  const existing = await getUserInviteCode(userId);
  if (existing) return existing.code;
  
  // ç”Ÿæˆ 6-8 ä½å”¯ä¸€é‚€è¯·ç 
  let code: string;
  let attempts = 0;
  do {
    code = generateRandomCode(6 + Math.floor(attempts / 3));
    attempts++;
  } while (await isCodeExists(code) && attempts < 10);
  
  await createUserInviteCode({ userId, code });
  return code;
}

function generateRandomCode(length: number): string {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; // æ’é™¤æ˜“æ··æ·†å­—ç¬¦
  return Array.from({ length }, () => 
    chars[Math.floor(Math.random() * chars.length)]
  ).join('');
}
```

### 3.2 æ–°ç”¨æˆ·é‚€è¯·æµç¨‹

```typescript
async function handleNewUserWithInviteCode(userId: string, inviteCode: string) {
  const inviteCodeRecord = await getUserInviteCode(inviteCode);
  if (!inviteCodeRecord) return;
  
  const rule = await getActiveRule('user');
  if (!rule) return;
  
  // 1. æ£€æŸ¥é‚€è¯·äººé™åˆ¶
  const inviter = inviteCodeRecord.user;
  if (rule.totalLimit && inviteCodeRecord.rewardCount >= rule.totalLimit) {
    return; // è¶…å‡ºæ€»é™åˆ¶
  }
  
  // 2. åˆ›å»ºé‚€è¯·è®°å½•
  const record = await createReferralRecord({
    inviterId: inviter.id,
    inviteeId: userId,
    inviteCode,
    type: 'user',
    status: rule.requireFirstOrder ? 'registered' : 'pending',
  });
  
  // 3. å¦‚æœä¸éœ€è¦é¦–å•ï¼Œç«‹å³å‘æ”¾å¥–åŠ±
  if (!rule.requireFirstOrder) {
    await grantReferralRewards(record.id);
  }
  
  // 4. ç«‹å³å‘æ”¾æ–°äººå¥–åŠ±
  if (rule.inviteeCouponId) {
    await grantCoupon(userId, rule.inviteeCouponId, 'referral');
  }
  if (rule.inviteePoints > 0) {
    await earnPoints({ userId, ruleCode: 'referral_invitee' });
  }
}

// é¦–å•å®Œæˆåè§¦å‘
async function handleFirstOrderComplete(userId: string) {
  const record = await getPendingReferralRecord(userId);
  if (!record) return;
  
  await grantReferralRewards(record.id);
}

async function grantReferralRewards(recordId: string) {
  const record = await getReferralRecord(recordId);
  const rule = await getActiveRule(record.type);
  
  // å‘æ”¾é‚€è¯·äººå¥–åŠ±
  if (rule.inviterCouponId) {
    await grantCoupon(record.inviterId, rule.inviterCouponId, 'referral');
  }
  if (rule.inviterPoints > 0) {
    await earnPoints({ userId: record.inviterId, ruleCode: 'referral_inviter' });
  }
  
  // æ›´æ–°çŠ¶æ€
  await updateReferralRecord(recordId, {
    status: 'rewarded',
    rewardedAt: new Date(),
    inviterReward: { couponId: rule.inviterCouponId, points: rule.inviterPoints },
  });
  
  // æ›´æ–°é‚€è¯·ç ç»Ÿè®¡
  await incrementInviteCodeStats(record.inviteCode);
}
```

### 3.3 å°±è¯Šäººé‚€è¯·æµç¨‹

```typescript
async function invitePatientToRegister(userId: string, patientId: string) {
  const patient = await getPatient(patientId);
  
  // 1. æ£€æŸ¥æ˜¯å¦å¯é‚€è¯·
  if (patient.userId !== userId) {
    throw new Error('åªèƒ½é‚€è¯·è‡ªå·±æ·»åŠ çš„å°±è¯Šäºº');
  }
  if (patient.inviteStatus === 'registered') {
    throw new Error('è¯¥å°±è¯Šäººå·²æ³¨å†Œ');
  }
  if (patient.inviteStatus === 'invited') {
    const lastInvite = await getLastPatientInvite(patientId);
    if (lastInvite && differenceInHours(new Date(), lastInvite.createdAt) < 24) {
      throw new Error('24å°æ—¶å†…å·²å‘é€é‚€è¯·ï¼Œè¯·ç¨åå†è¯•');
    }
  }
  
  // 2. è·å–é‚€è¯·ç 
  const inviteCode = await getOrCreateInviteCode(userId);
  
  // 3. åˆ›å»ºé‚€è¯·è®°å½•
  const record = await createReferralRecord({
    inviterId: userId,
    inviteCode,
    type: 'patient',
    patientId,
    patientPhone: patient.phone,
    status: 'pending',
  });
  
  // 4. å‘é€é‚€è¯·çŸ­ä¿¡
  await sendSms(patient.phone, {
    template: 'PATIENT_INVITE',
    params: {
      patientName: patient.name,
      inviterName: await getUserName(userId),
      link: generateInviteLink(inviteCode, 'patient', patientId),
    },
  });
  
  // 5. æ›´æ–°å°±è¯ŠäººçŠ¶æ€
  await updatePatient(patientId, {
    invitedAt: new Date(),
    inviteStatus: 'invited',
  });
  
  return record;
}

async function handlePatientRegistration(
  newUserId: string, 
  phone: string, 
  inviteCode?: string,
  patientId?: string,
) {
  // 1. æŸ¥æ‰¾åŒ¹é…çš„é‚€è¯·è®°å½•
  let record = null;
  
  if (patientId && inviteCode) {
    record = await findReferralRecord({ patientId, inviteCode, status: 'pending' });
  } else {
    // é€šè¿‡æ‰‹æœºå·åŒ¹é…
    record = await findReferralRecord({ patientPhone: phone, status: 'pending' });
  }
  
  if (!record) return;
  
  // 2. æ›´æ–°é‚€è¯·è®°å½•
  await updateReferralRecord(record.id, {
    inviteeId: newUserId,
    status: 'registered',
    registeredAt: new Date(),
  });
  
  // 3. æ›´æ–°å°±è¯ŠäººçŠ¶æ€
  if (record.patientId) {
    await updatePatient(record.patientId, {
      inviteStatus: 'registered',
      registeredUserId: newUserId,
    });
  }
  
  // 4. å‘æ”¾å¥–åŠ±ï¼ˆå°±è¯Šäººé‚€è¯·ä¸éœ€è¦é¦–å•ï¼‰
  await grantReferralRewards(record.id);
}
```

---

## å››ã€é˜²ä½œå¼Šæœºåˆ¶

### 4.1 é™åˆ¶è§„åˆ™

```typescript
interface ReferralLimits {
  // é‚€è¯·äººé™åˆ¶
  dailyInviteLimit: number;      // æ¯æ—¥é‚€è¯·ä¸Šé™
  totalInviteLimit: number;      // ç´¯è®¡é‚€è¯·ä¸Šé™
  
  // è®¾å¤‡/IP é™åˆ¶
  deviceLimit: number;           // åŒè®¾å¤‡æœ€å¤šå…³è” N ä¸ªé‚€è¯·äºº
  ipLimit: number;               // åŒ IP æ¯æ—¥æœ€å¤šæ³¨å†Œ N ä¸ª
  
  // å°±è¯Šäººé‚€è¯·é™åˆ¶
  patientInviteInterval: number; // åŒä¸€å°±è¯Šäººé‚€è¯·é—´éš”ï¼ˆå°æ—¶ï¼‰
}
```

### 4.2 å¼‚å¸¸æ£€æµ‹

```typescript
async function detectReferralFraud(inviterId: string, inviteeId: string) {
  // 1. æ£€æŸ¥æ˜¯å¦åŒè®¾å¤‡
  const inviterDevices = await getUserDevices(inviterId);
  const inviteeDevices = await getUserDevices(inviteeId);
  const commonDevices = inviterDevices.filter(d => inviteeDevices.includes(d));
  
  if (commonDevices.length > 0) {
    await logSuspiciousActivity({
      type: 'same_device_referral',
      inviterId,
      inviteeId,
      devices: commonDevices,
    });
    return true; // æ‹’ç»å‘æ”¾å¥–åŠ±
  }
  
  // 2. æ£€æŸ¥æ˜¯å¦åŒ IP
  const inviterIPs = await getUserIPs(inviterId, 'last_week');
  const inviteeIPs = await getUserIPs(inviteeId, 'last_week');
  const commonIPs = inviterIPs.filter(ip => inviteeIPs.includes(ip));
  
  if (commonIPs.length > 2) {
    await logSuspiciousActivity({
      type: 'same_ip_referral',
      inviterId,
      inviteeId,
      ips: commonIPs,
    });
    return true;
  }
  
  // 3. æ£€æŸ¥é‚€è¯·äººæœ€è¿‘é‚€è¯·é¢‘ç‡
  const recentInvites = await getRecentInvites(inviterId, 'last_hour');
  if (recentInvites.length > 5) {
    await logSuspiciousActivity({
      type: 'high_frequency_referral',
      inviterId,
      count: recentInvites.length,
    });
    return true;
  }
  
  return false;
}
```

---

## äº”ã€API è®¾è®¡

### 5.1 ç”¨æˆ·ç«¯

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/referral/code | è·å–æˆ‘çš„é‚€è¯·ç  |
| GET | /api/referral/link | è·å–é‚€è¯·é“¾æ¥ |
| GET | /api/referral/poster | ç”Ÿæˆé‚€è¯·æµ·æŠ¥ |
| GET | /api/referral/records | æˆ‘çš„é‚€è¯·è®°å½• |
| GET | /api/referral/stats | é‚€è¯·ç»Ÿè®¡ |
| POST | /api/patients/:id/invite | é‚€è¯·å°±è¯Šäººæ³¨å†Œ |
| GET | /api/patients/:id/invite-status | æŸ¥è¯¢å°±è¯Šäººé‚€è¯·çŠ¶æ€ |

### 5.2 åå°ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/admin/referral/rules | é‚€è¯·è§„åˆ™åˆ—è¡¨ |
| PUT | /api/admin/referral/rules/:id | æ›´æ–°è§„åˆ™ |
| GET | /api/admin/referral/records | é‚€è¯·è®°å½•åˆ—è¡¨ |
| GET | /api/admin/referral/suspicious | å¯ç–‘è®°å½• |
| POST | /api/admin/referral/records/:id/invalidate | æ ‡è®°æ— æ•ˆ |

---

## å…­ã€ç”¨æˆ·ç•Œé¢

### 6.1 é‚€è¯·å¥½å‹é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â†  é‚€è¯·å¥½å‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        é‚€è¯·å¥½å‹èµšå¥–åŠ±                â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚     å¥½å‹é¦–å•åï¼Œä½ å¾— Â¥20 ä¼˜æƒ åˆ¸      â”‚ â”‚
â”‚ â”‚          + 200 ç§¯åˆ†                 â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚     å¥½å‹ä¹Ÿèƒ½è·å¾— Â¥10 æ–°äººåˆ¸          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ æˆ‘çš„é‚€è¯·ç                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚           XK8J5M                    â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ [å¤åˆ¶é‚€è¯·ç ]                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ ğŸ“² åˆ†äº«é“¾æ¥ â”‚  â”‚ ğŸ¨ ç”Ÿæˆæµ·æŠ¥ â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                         â”‚
â”‚ æˆ‘çš„é‚€è¯·è®°å½•                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å·²é‚€è¯· 5 äºº  å·²è·å¥–åŠ± 3 æ¬¡           â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ 138****8888  å·²å®Œæˆé¦–å•  âœ… å·²å¥–åŠ±   â”‚ â”‚
â”‚ â”‚ 139****9999  å¾…å®Œæˆé¦–å•  â³          â”‚ â”‚
â”‚ â”‚ 137****7777  å·²å®Œæˆé¦–å•  âœ… å·²å¥–åŠ±   â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ [æŸ¥çœ‹æ›´å¤š]                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å°±è¯Šäººåˆ—è¡¨ï¼ˆå«é‚€è¯·åŠŸèƒ½ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â†  å°±è¯Šäººç®¡ç†                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å¼ ä¸‰                    138****8888 â”‚ â”‚
â”‚ â”‚ èº«ä»½è¯ï¼š110***********1234          â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ç¼–è¾‘    â”‚ â”‚ åˆ é™¤    â”‚ â”‚ é‚€è¯·â­ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æå››                    139****9999 â”‚ â”‚
â”‚ â”‚ èº«ä»½è¯ï¼š120***********5678          â”‚ â”‚
â”‚ â”‚ âœ… å·²æ³¨å†Œä¸ºç‹¬ç«‹ç”¨æˆ·                  â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚ â”‚ â”‚ ç¼–è¾‘    â”‚ â”‚ åˆ é™¤    â”‚            â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç‹äº”                    137****7777 â”‚ â”‚
â”‚ â”‚ èº«ä»½è¯ï¼š130***********9012          â”‚ â”‚
â”‚ â”‚ â³ å·²é‚€è¯·ï¼Œå¾…æ³¨å†Œ                    â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ç¼–è¾‘    â”‚ â”‚ åˆ é™¤    â”‚ â”‚ å†é‚€è¯· â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ [+ æ·»åŠ å°±è¯Šäºº]                           â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 é‚€è¯·å°±è¯Šäººå¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚       é‚€è¯·å°±è¯Šäººæ³¨å†Œ                     â”‚
â”‚                                         â”‚
â”‚ é‚€è¯·ã€Œå¼ ä¸‰ã€(138****8888) æ³¨å†Œä¸ºç‹¬ç«‹ç”¨æˆ· â”‚
â”‚                                         â”‚
â”‚ æ³¨å†Œåï¼š                                 â”‚
â”‚ Â· å°±è¯Šäººå¯ç‹¬ç«‹ä½¿ç”¨APPä¸‹å•                â”‚
â”‚ Â· æ‚¨å°†è·å¾— Â¥20 ä¼˜æƒ åˆ¸ + 200 ç§¯åˆ†         â”‚
â”‚ Â· å°±è¯Šäººå¯è·å¾— Â¥10 æ–°äººåˆ¸               â”‚
â”‚                                         â”‚
â”‚ æˆ‘ä»¬å°†é€šè¿‡çŸ­ä¿¡å‘é€æ³¨å†Œé‚€è¯·               â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚           [å‘é€é‚€è¯·]                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚            [å–æ¶ˆ]                        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€å¾…ç»†åŒ–å†…å®¹

- [ ] çŸ­ä¿¡æ¨¡æ¿é…ç½®
- [ ] é‚€è¯·æµ·æŠ¥æ¨¡æ¿ç®¡ç†
- [ ] å°±è¯Šäººé‚€è¯·é¢‘ç‡é™åˆ¶é…ç½®
- [ ] é‚€è¯·æ•°æ®æŠ¥è¡¨
- [ ] é‚€è¯·æ’è¡Œæ¦œï¼ˆå¯é€‰ï¼‰
