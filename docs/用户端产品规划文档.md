# 陪诊服务用户端产品规划文档

> 版本：v1.0  
> 更新日期：2024年12月  
> 文档状态：规划中

---

## 一、项目概述

### 1.1 项目背景

基于现有陪诊服务管理后台（shadcn-admin），需要开发面向用户的移动端产品，让用户能够便捷地预约陪诊服务、管理订单、与陪诊员沟通等。

### 1.2 产品定位

为需要医院陪诊服务的用户提供一站式服务预约平台，包括：
- 浏览和筛选陪诊服务
- 在线预约下单
- 订单全流程管理
- 与陪诊员实时沟通
- 服务评价与反馈

### 1.3 目标用户

| 用户群体 | 特征描述 | 核心需求 |
|---------|---------|---------|
| 老年患者家属 | 子女为父母预约陪诊 | 简单易用、服务可靠 |
| 异地就医人群 | 外地来本地就医 | 医院导航、全程陪同 |
| 行动不便者 | 需要协助的患者 | 专业陪护、贴心服务 |
| 忙碌上班族 | 没时间陪家人就医 | 代办服务、实时反馈 |

### 1.4 产品矩阵

```
┌─────────────────────────────────────────────────────────────┐
│                      陪诊服务产品矩阵                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────┐                                          │
│   │  管理后台   │  ← 当前项目 (shadcn-admin)                │
│   │  (Web)     │    运营人员使用                            │
│   └─────────────┘                                          │
│          │                                                  │
│          │ API 对接                                         │
│          ▼                                                  │
│   ┌─────────────────────────────────────────────────────┐  │
│   │                    用户端                            │  │
│   │  ┌───────────┐ ┌───────────┐ ┌───────────┐        │  │
│   │  │ 微信小程序 │ │  iOS App  │ │Android App│        │  │
│   │  │  (优先)   │ │  (Phase2) │ │ (Phase2)  │        │  │
│   │  └───────────┘ └───────────┘ └───────────┘        │  │
│   └─────────────────────────────────────────────────────┘  │
│          │                                                  │
│          │ API 对接                                         │
│          ▼                                                  │
│   ┌─────────────┐                                          │
│   │  陪诊员端   │  ← 后续规划                               │
│   │  (小程序)   │    陪诊员接单使用                          │
│   └─────────────┘                                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 二、技术选型

### 2.1 技术方案对比

| 方案 | 微信小程序 | iOS/Android | 代码复用率 | 学习成本 | 性能 | 生态 |
|------|-----------|-------------|-----------|---------|------|------|
| **Taro 3.x** | ✅ 原生 | ✅ RN | 90% | 低(React) | 良好 | 成熟 |
| uni-app | ✅ 原生 | ✅ 原生渲染 | 90% | 低(Vue) | 良好 | 成熟 |
| Flutter | ❌ 需适配 | ✅ 优秀 | 70% | 高(Dart) | 优秀 | 一般 |
| 原生开发 | ✅ | ✅ | 30% | 高 | 最优 | 分散 |

### 2.2 最终选型：Taro 3.x + React

**选择理由：**

1. **技术栈统一**
   - 管理后台：React + TypeScript
   - 用户端：React + TypeScript (Taro)
   - 团队技能复用，降低学习成本

2. **微信小程序优先**
   - Taro 对微信小程序支持最成熟
   - 符合"微信小程序先行"的产品策略

3. **渐进式扩展**
   - 先完成小程序，验证业务模式
   - 后续通过 Taro + React Native 扩展到 App
   - 代码复用率高达 90%

4. **企业级验证**
   - 京东、58同城、去哪儿等大厂在用
   - 社区活跃，文档完善

### 2.3 技术栈详情

| 类别 | 技术选型 | 说明 |
|------|---------|------|
| 框架 | Taro 3.x | 跨端开发框架 |
| UI 框架 | React 18 | 前端框架 |
| 类型系统 | TypeScript 5.x | 类型安全 |
| 组件库 | NutUI-React | 京东出品，Taro 适配良好 |
| 状态管理 | Zustand | 轻量级，与管理后台一致 |
| 请求库 | Taro.request 封装 | 支持拦截器、错误处理 |
| 样式方案 | Sass + CSS Modules | 模块化样式 |
| 包管理 | pnpm | 与管理后台一致 |

---

## 三、功能规划

### 3.1 功能架构图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           用户端功能架构                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                         首页模块                                  │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │   │
│  │  │ 轮播图  │ │ 服务入口 │ │ 热门服务 │ │ 推荐陪诊 │ │ 资讯动态 │  │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                         服务模块                                  │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │   │
│  │  │ 服务分类 │ │ 服务列表 │ │ 服务详情 │ │ 医院选择 │ │ 陪诊员选 │  │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                         订单模块                                  │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │   │
│  │  │ 下单页面 │ │ 支付页面 │ │ 订单列表 │ │ 订单详情 │ │ 订单评价 │  │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                         个人中心                                  │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │   │
│  │  │ 个人信息 │ │ 就诊人  │ │ 收藏夹  │ │ 优惠券  │ │ 设置    │  │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                         消息中心                                  │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────────────┐  │   │
│  │  │ 系统通知 │ │ 订单消息 │ │ 在线客服 │ │ 陪诊员沟通 (IM)    │  │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.2 核心功能清单

#### 3.2.1 首页模块

| 功能 | 描述 | 优先级 | 对接管理后台 |
|------|------|--------|-------------|
| 轮播图 | 展示运营配置的 Banner | P0 | 产品中心 - 轮播图管理 |
| 弹窗广告 | 首次进入展示弹窗 | P1 | 产品中心 - 弹窗管理 |
| 服务入口 | 快速进入各类服务 | P0 | 业务中心 - 服务分类 |
| 热门服务 | 推荐热门陪诊服务 | P0 | 业务中心 - 服务管理 |
| 推荐陪诊员 | 展示优质陪诊员 | P1 | 陪诊员管理 |
| 搜索功能 | 搜索服务/医院/医生 | P0 | 产品中心 - 热门搜索 |

#### 3.2.2 服务模块

| 功能 | 描述 | 优先级 | 对接管理后台 |
|------|------|--------|-------------|
| 服务分类 | 按类别浏览服务 | P0 | 业务中心 - 服务分类 |
| 服务列表 | 服务筛选、排序 | P0 | 业务中心 - 服务管理 |
| 服务详情 | 服务介绍、价格、流程 | P0 | 业务中心 - 服务管理 |
| 医院列表 | 支持的医院 | P0 | 医疗资源 - 医院库 |
| 医院详情 | 医院信息、科室 | P1 | 医疗资源 - 医院库/科室库 |
| 陪诊员列表 | 可选陪诊员 | P0 | 陪诊员 - 人员管理 |
| 陪诊员详情 | 陪诊员简介、评价 | P0 | 陪诊员 - 人员管理 |

#### 3.2.3 订单模块

| 功能 | 描述 | 优先级 | 对接管理后台 |
|------|------|--------|-------------|
| 创建订单 | 填写就诊信息下单 | P0 | 订单管理 |
| 价格计算 | 根据服务计算价格 | P0 | 业务中心 - 价格政策 |
| 优惠券使用 | 选择优惠券抵扣 | P1 | 营销中心 - 优惠券管理 |
| 微信支付 | 小程序内支付 | P0 | 财务中心 |
| 订单列表 | 查看所有订单 | P0 | 订单管理 |
| 订单详情 | 订单状态、进度 | P0 | 订单管理 |
| 取消订单 | 取消未开始订单 | P0 | 订单管理 |
| 服务评价 | 完成后评价服务 | P1 | 客服中心 - 评价管理 |

#### 3.2.4 个人中心

| 功能 | 描述 | 优先级 | 对接管理后台 |
|------|------|--------|-------------|
| 微信登录 | 一键授权登录 | P0 | 用户中心 - 用户管理 |
| 手机绑定 | 绑定手机号 | P0 | 用户中心 - 用户管理 |
| 个人信息 | 编辑个人资料 | P0 | 用户中心 - 用户管理 |
| 就诊人管理 | 添加/管理就诊人 | P0 | 用户中心 |
| 我的收藏 | 收藏的服务/陪诊员 | P2 | - |
| 我的优惠券 | 优惠券列表 | P1 | 营销中心 - 优惠券管理 |
| 积分中心 | 积分余额、使用 | P2 | 营销中心 - 积分管理 |
| 邀请有礼 | 邀请好友得奖励 | P2 | 营销中心 - 邀请奖励 |
| 帮助中心 | 常见问题 | P1 | 帮助中心 |
| 意见反馈 | 提交反馈 | P1 | 客服中心 - 投诉建议 |
| 设置 | 通知、隐私等 | P1 | - |

#### 3.2.5 消息中心

| 功能 | 描述 | 优先级 | 对接管理后台 |
|------|------|--------|-------------|
| 系统通知 | 平台公告、活动 | P1 | 消息中心 - 系统通知 |
| 订单消息 | 订单状态变更通知 | P0 | 消息中心 |
| 在线客服 | 联系平台客服 | P1 | 客服中心 - 在线客服 |
| IM 聊天 | 与陪诊员沟通 | P1 | 客服中心 |
| 订阅消息 | 微信服务通知 | P0 | 产品中心 - 消息推送 |

---

## 四、页面规划

### 4.1 页面清单

```
小程序页面结构
├── pages/
│   ├── index/                    # 首页 (TabBar)
│   ├── services/                 # 服务 (TabBar)
│   │   ├── index                 # 服务列表
│   │   └── detail                # 服务详情
│   ├── orders/                   # 订单 (TabBar)
│   │   ├── index                 # 订单列表
│   │   └── detail                # 订单详情
│   ├── user/                     # 我的 (TabBar)
│   │   ├── index                 # 个人中心
│   │   ├── profile               # 个人信息
│   │   ├── patients              # 就诊人管理
│   │   ├── coupons               # 我的优惠券
│   │   ├── favorites             # 我的收藏
│   │   └── settings              # 设置
│   ├── booking/                  # 预约下单
│   │   ├── index                 # 下单页
│   │   └── result                # 下单结果
│   ├── hospital/                 # 医院
│   │   ├── list                  # 医院列表
│   │   └── detail                # 医院详情
│   ├── escort/                   # 陪诊员
│   │   ├── list                  # 陪诊员列表
│   │   └── detail                # 陪诊员详情
│   ├── message/                  # 消息
│   │   ├── index                 # 消息列表
│   │   └── chat                  # 聊天页
│   ├── search/                   # 搜索
│   │   └── index                 # 搜索页
│   ├── webview/                  # 内嵌网页
│   │   └── index                 # 协议、帮助等
│   └── auth/                     # 认证
│       ├── login                 # 登录
│       └── bindPhone             # 绑定手机
```

### 4.2 TabBar 设计

| Tab | 图标 | 标题 | 页面路径 |
|-----|------|------|---------|
| 1 | 🏠 | 首页 | /pages/index/index |
| 2 | 📋 | 服务 | /pages/services/index |
| 3 | 📦 | 订单 | /pages/orders/index |
| 4 | 👤 | 我的 | /pages/user/index |

### 4.3 核心页面原型说明

#### 首页

```
┌─────────────────────────────┐
│ 📍 上海市                🔔  │  ← 定位 + 消息入口
├─────────────────────────────┤
│ 🔍 搜索服务、医院、医生      │  ← 搜索框
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │       轮播图 Banner      │ │  ← 产品中心配置
│ └─────────────────────────┘ │
├─────────────────────────────┤
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐│
│ │全程 │ │代办 │ │陪检 │ │住院 ││  ← 服务快捷入口
│ │陪诊 │ │挂号 │ │陪护 │ │陪护 ││
│ └────┘ └────┘ └────┘ └────┘│
├─────────────────────────────┤
│ 热门服务                    │
│ ┌───────────┐ ┌───────────┐│
│ │ 服务卡片1  │ │ 服务卡片2  ││  ← 热门服务推荐
│ └───────────┘ └───────────┘│
├─────────────────────────────┤
│ 推荐陪诊员                   │
│ ┌───────────┐ ┌───────────┐│
│ │ 陪诊员1   │ │ 陪诊员2   ││  ← 优质陪诊员
│ └───────────┘ └───────────┘│
├─────────────────────────────┤
│  🏠首页  📋服务  📦订单  👤我的 │  ← TabBar
└─────────────────────────────┘
```

#### 下单页面

```
┌─────────────────────────────┐
│ ←  预约陪诊服务              │
├─────────────────────────────┤
│ 选择服务                     │
│ ┌─────────────────────────┐ │
│ │ 全程陪诊          ¥199起 │ │
│ └─────────────────────────┘ │
├─────────────────────────────┤
│ 选择医院                     │
│ ┌─────────────────────────┐ │
│ │ 上海市第一人民医院     ▶ │ │
│ └─────────────────────────┘ │
├─────────────────────────────┤
│ 选择陪诊员                   │
│ ┌─────────────────────────┐ │
│ │ 🙎 张护士   ⭐4.9  接单128│ │
│ └─────────────────────────┘ │
├─────────────────────────────┤
│ 就诊信息                     │
│ 就诊人    │ 请选择就诊人   ▶ │
│ 就诊时间  │ 2024-12-15 09:00│
│ 就诊科室  │ 请选择科室     ▶ │
│ 备注说明  │                  │
├─────────────────────────────┤
│ 优惠券    │ 暂无可用      ▶ │
├─────────────────────────────┤
│ 服务费用          ¥199.00   │
│ 优惠金额          -¥0.00    │
│ ─────────────────────────── │
│ 实付金额          ¥199.00   │
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │     立即预约 ¥199.00    │ │
│ └─────────────────────────┘ │
└─────────────────────────────┘
```

---

## 五、与管理后台对接

### 5.1 产品中心配置对接

| 管理后台功能 | API 接口 | 用户端使用场景 |
|-------------|---------|---------------|
| 轮播图管理 | `GET /api/app/banners` | 首页 Banner |
| 启动页管理 | `GET /api/app/splash` | App 启动广告 |
| 弹窗管理 | `GET /api/app/popups` | 首页弹窗、活动弹窗 |
| 消息推送 | WebSocket / 订阅消息 | 订单状态推送 |
| 版本管理 | `GET /api/app/version` | App 版本更新检测 |
| 热门搜索 | `GET /api/app/hot-search` | 搜索页热词 |
| 开关配置 | `GET /api/app/switches` | 功能开关控制 |

### 5.2 数据流转示意

```
┌──────────────────┐      ┌──────────────────┐      ┌──────────────────┐
│    管理后台       │      │    API 服务       │      │     用户端        │
│  (shadcn-admin)  │      │   (后端服务)      │      │   (小程序/App)    │
├──────────────────┤      ├──────────────────┤      ├──────────────────┤
│                  │      │                  │      │                  │
│  运营人员配置     │─────▶│   存储到数据库    │◀─────│   用户请求        │
│  - 轮播图        │      │                  │      │                  │
│  - 服务信息      │      │                  │      │                  │
│  - 价格政策      │      │   API 响应       │─────▶│   页面渲染        │
│  - 优惠券        │      │                  │      │                  │
│                  │      │                  │      │                  │
│  订单管理        │◀─────│   订单数据同步    │◀─────│   用户下单        │
│  - 查看订单      │      │                  │      │                  │
│  - 分配陪诊员    │      │   状态推送       │─────▶│   订单状态更新    │
│  - 处理售后      │      │                  │      │                  │
│                  │      │                  │      │                  │
└──────────────────┘      └──────────────────┘      └──────────────────┘
```

---

## 六、开发计划

### 6.1 里程碑规划

```
                    Phase 1                 Phase 2                 Phase 3
                 微信小程序 MVP            功能完善                 App 端
                   (6 周)                  (4 周)                  (6 周)
    ┌─────────────────────┬─────────────────────┬─────────────────────┐
    │                     │                     │                     │
W1  │ 项目初始化          │ 消息推送            │ RN 环境搭建         │
    │ 基础框架搭建        │                     │                     │
    │                     │                     │                     │
W2  │ 首页开发            │ 在线客服            │ iOS 适配            │
    │ 登录注册            │ IM 聊天             │                     │
    │                     │                     │                     │
W3  │ 服务列表/详情       │ 评价系统            │ Android 适配        │
    │ 医院/陪诊员         │                     │                     │
    │                     │                     │                     │
W4  │ 下单流程            │ 优惠券/积分         │ 推送通知            │
    │ 微信支付            │ 邀请奖励            │ 原生功能            │
    │                     │                     │                     │
W5  │ 订单管理            │ 测试优化            │ 打包上架            │
    │ 个人中心            │ Bug 修复            │                     │
    │                     │                     │                     │
W6  │ 联调测试            │ 上线发布            │ 上线发布            │
    │ 提审发布            │                     │                     │
    │                     │                     │                     │
    └─────────────────────┴─────────────────────┴─────────────────────┘
```

### 6.2 Phase 1 详细计划 - 微信小程序 MVP

**目标：** 完成核心预约下单流程，可上线运营

| 周次 | 任务 | 产出物 |
|------|------|--------|
| Week 1 | 项目初始化、框架搭建、UI 组件库 | 项目基础架构 |
| Week 2 | 首页、登录、搜索 | 首页模块完成 |
| Week 3 | 服务列表/详情、医院、陪诊员 | 服务模块完成 |
| Week 4 | 下单页面、微信支付对接 | 下单流程完成 |
| Week 5 | 订单管理、个人中心 | 订单模块完成 |
| Week 6 | 联调测试、Bug 修复、提审 | 小程序上线 |

### 6.3 资源需求

| 角色 | 人数 | 职责 |
|------|------|------|
| 前端开发 | 1-2 | 小程序开发 |
| 后端开发 | 1-2 | API 开发 |
| UI 设计 | 1 | 界面设计 |
| 产品经理 | 1 | 需求管理 |
| 测试 | 1 | 质量保证 |

---

## 七、技术规范

### 7.1 项目结构

```
miniapp-client/
├── config/                     # Taro 配置
│   ├── index.ts               # 基础配置
│   ├── dev.ts                 # 开发环境
│   └── prod.ts                # 生产环境
│
├── src/
│   ├── app.config.ts          # 小程序全局配置
│   ├── app.tsx                # 入口组件
│   ├── app.scss               # 全局样式
│   │
│   ├── pages/                 # 页面目录
│   │   ├── index/
│   │   │   ├── index.tsx
│   │   │   ├── index.config.ts
│   │   │   └── index.scss
│   │   └── ...
│   │
│   ├── components/            # 通用组件
│   │   ├── ServiceCard/
│   │   ├── EscortCard/
│   │   ├── OrderCard/
│   │   └── ...
│   │
│   ├── services/              # API 服务
│   │   ├── request.ts         # 请求封装
│   │   ├── user.ts            # 用户 API
│   │   ├── order.ts           # 订单 API
│   │   ├── service.ts         # 服务 API
│   │   └── config.ts          # 配置 API
│   │
│   ├── stores/                # 状态管理
│   │   ├── user.ts            # 用户状态
│   │   ├── cart.ts            # 购物车状态
│   │   └── app.ts             # 应用状态
│   │
│   ├── hooks/                 # 自定义 Hooks
│   │   ├── useAuth.ts
│   │   ├── useRequest.ts
│   │   └── ...
│   │
│   ├── utils/                 # 工具函数
│   │   ├── format.ts
│   │   ├── storage.ts
│   │   └── ...
│   │
│   ├── types/                 # 类型定义
│   │   ├── user.d.ts
│   │   ├── order.d.ts
│   │   └── ...
│   │
│   └── assets/                # 静态资源
│       ├── images/
│       └── icons/
│
├── package.json
├── tsconfig.json
├── .eslintrc
└── README.md
```

### 7.2 代码规范

| 规范项 | 说明 |
|--------|------|
| 命名规范 | 组件 PascalCase，函数 camelCase，常量 UPPER_SNAKE_CASE |
| 文件命名 | 组件文件夹 PascalCase，其他 kebab-case |
| TypeScript | 严格模式，所有函数必须有类型定义 |
| 组件规范 | 函数式组件 + Hooks，避免 class 组件 |
| 样式规范 | CSS Modules，避免全局样式污染 |
| Git 规范 | Conventional Commits (feat/fix/docs/style/refactor) |

### 7.3 API 规范

```typescript
// 统一响应格式
interface ApiResponse<T> {
  code: number;          // 状态码：0 成功，其他失败
  message: string;       // 提示信息
  data: T;               // 响应数据
}

// 分页响应格式
interface PaginatedResponse<T> {
  code: number;
  message: string;
  data: {
    list: T[];
    pagination: {
      current: number;
      pageSize: number;
      total: number;
    };
  };
}
```

---

## 八、风险与应对

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|---------|
| 微信审核不通过 | 延期上线 | 中 | 提前了解审核规范，预留审核时间 |
| 支付对接问题 | 核心功能阻塞 | 中 | 提前申请支付资质，做好沙箱测试 |
| 性能问题 | 用户体验差 | 低 | 代码分包，图片压缩，懒加载 |
| 需求变更 | 进度延期 | 高 | MVP 先行，迭代开发 |

---

## 九、后续规划

### 9.1 功能迭代

| 版本 | 功能 | 预计时间 |
|------|------|---------|
| v1.1 | 在线客服、IM 聊天 | +2 周 |
| v1.2 | 营销功能（优惠券、积分、邀请） | +2 周 |
| v1.3 | App 端上线 | +6 周 |
| v2.0 | 陪诊员端小程序 | +4 周 |

### 9.2 技术演进

- 引入性能监控（Sentry）
- 引入埋点统计（神策/GrowingIO）
- 灰度发布能力
- 自动化测试

---

## 十、附录

### 10.1 参考资料

- [Taro 官方文档](https://docs.taro.zone/)
- [NutUI React 组件库](https://nutui.jd.com/react/)
- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信支付开发文档](https://pay.weixin.qq.com/wiki/doc/apiv3/wxpay/pages/index.shtml)

### 10.2 术语表

| 术语 | 说明 |
|------|------|
| MVP | Minimum Viable Product，最小可行产品 |
| TabBar | 底部导航栏 |
| IM | Instant Messaging，即时通讯 |
| RN | React Native |

---

**文档维护人：** [待定]  
**审批人：** [待定]  
**下次评审日期：** [待定]
