# ç§‘ç§‘çµ - é™ªè¯Šå‘˜æ¨¡å—å¼€å‘è§„åˆ’æ–‡æ¡£

**ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2024-12-08  
**çŠ¶æ€**: ğŸ“ å¾…å®¡è®¡

---

## ä¸€ã€æ¨¡å—æ¦‚è¿°

### 1.1 åŠŸèƒ½å®šä½

é™ªè¯Šå‘˜æ˜¯å¹³å°çš„æ ¸å¿ƒæœåŠ¡æä¾›è€…ï¼Œè´Ÿè´£æ‰§è¡Œç”¨æˆ·é¢„è®¢çš„é™ªè¯ŠæœåŠ¡ã€‚æœ¬æ¨¡å—éœ€è¦æ”¯æŒï¼š

- é™ªè¯Šå‘˜ä¿¡æ¯çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†
- é™ªè¯Šå‘˜ä¸åŒ»é™¢çš„å¤šå¯¹å¤šå…³è”
- é™ªè¯Šå‘˜èµ„è´¨å®¡æ ¸ä¸çŠ¶æ€ç®¡ç†
- ä¸ºè®¢å•æ´¾å•æä¾›å¯ç”¨é™ªè¯Šå‘˜æ± 

### 1.2 ç°çŠ¶åˆ†æ

| éƒ¨åˆ† | å®Œæˆåº¦ | è¯´æ˜ |
|------|--------|------|
| æ•°æ®åº“æ¨¡å‹ | âœ… 100% | `Escort` + `EscortHospital` å·²å®šä¹‰ |
| åç«¯æŸ¥è¯¢ API | âœ… 60% | åˆ—è¡¨/è¯¦æƒ…/æ¨èå·²å®ç° |
| åç«¯ CRUD API | âŒ 0% | åˆ›å»º/ç¼–è¾‘/åˆ é™¤æœªå®ç° |
| å…³è”åŒ»é™¢ API | âŒ 0% | æœªå®ç° |
| å‰ç«¯è¡¨æ ¼å±•ç¤º | âœ… 80% | åŸºç¡€å±•ç¤ºå·²å®Œæˆ |
| å‰ç«¯ CRUD åŠŸèƒ½ | âŒ 0% | å¯¹è¯æ¡†æœªå¯¹æ¥çœŸå® API |
| ç§å­æ•°æ® | âŒ 0% | æ— æµ‹è¯•æ•°æ® |

---

## äºŒã€æ•°æ®æ¨¡å‹

### 2.1 ç°æœ‰ Prisma Schema

```prisma
model Escort {
  id             String    @id @default(uuid())
  name           String
  gender         String    // male, female
  avatar         String?
  phone          String    @unique
  idCard         String?   @map("id_card")
  level          String    // senior, intermediate, junior, trainee
  experience     String?   // ä»ä¸šå¹´é™æè¿°
  introduction   String?   // ä¸ªäººç®€ä»‹
  tags           String?   // JSON: ["è€å¿ƒç»†è‡´", "ç»éªŒä¸°å¯Œ"]
  certificates   String?   // JSON: [{name, url, expireDate}]
  rating         Float     @default(98.0)
  orderCount     Int       @default(0) @map("order_count")
  status         String    @default("active") // active, inactive, pending, suspended
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")

  hospitals      EscortHospital[]
  orders         Order[]

  @@map("escorts")
}

model EscortHospital {
  id           String   @id @default(uuid())
  escortId     String   @map("escort_id")
  hospitalId   String   @map("hospital_id")
  familiarDepts String? @map("familiar_depts") // JSON: ["å†…ç§‘", "å¤–ç§‘"]

  escort       Escort   @relation(fields: [escortId], references: [id])
  hospital     Hospital @relation(fields: [hospitalId], references: [id])

  @@unique([escortId, hospitalId])
  @@map("escort_hospitals")
}
```

### 2.2 Schema ä¼˜åŒ–å»ºè®®

å½“å‰è®¾è®¡å·²æ»¡è¶³ MVP éœ€æ±‚ï¼Œä½†æœ‰ä»¥ä¸‹å¯é€‰ä¼˜åŒ–ï¼š

| å­—æ®µ | å½“å‰ | å»ºè®® | åŸå›  |
|------|------|------|------|
| `tags` | `String?` (JSON) | `String[]` | PostgreSQL åŸç”Ÿæ•°ç»„ï¼ŒæŸ¥è¯¢æ›´æ–¹ä¾¿ |
| `certificates` | `String?` (JSON) | `Json?` | è‡ªåŠ¨åºåˆ—åŒ–/ååºåˆ—åŒ– |
| `familiarDepts` | `String?` (JSON) | `String[]` | åŒä¸Š |

**MVP å†³ç­–**: ä¿æŒç°çŠ¶ï¼ŒJSON å­—ç¬¦ä¸²æ–¹æ¡ˆåœ¨å‰ç«¯è§£æå³å¯ï¼Œé¿å…æ•°æ®è¿ç§»ã€‚

---

## ä¸‰ã€åç«¯ API è®¾è®¡

### 3.1 API ç«¯ç‚¹è§„åˆ’

#### ç®¡ç†ç«¯ API (`/api/admin/escorts`)

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| GET | `/admin/escorts` | è·å–é™ªè¯Šå‘˜åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰ | âœ… å·²å®ç° |
| GET | `/admin/escorts/available` | è·å–å¯æ´¾å•é™ªè¯Šå‘˜ | âœ… å·²å®ç° |
| GET | `/admin/escorts/:id` | è·å–é™ªè¯Šå‘˜è¯¦æƒ… | ğŸ”´ å¾…å®ç° |
| POST | `/admin/escorts` | åˆ›å»ºé™ªè¯Šå‘˜ | ğŸ”´ å¾…å®ç° |
| PUT | `/admin/escorts/:id` | æ›´æ–°é™ªè¯Šå‘˜ä¿¡æ¯ | ğŸ”´ å¾…å®ç° |
| DELETE | `/admin/escorts/:id` | åˆ é™¤é™ªè¯Šå‘˜ | ğŸ”´ å¾…å®ç° |
| PUT | `/admin/escorts/:id/status` | æ›´æ–°é™ªè¯Šå‘˜çŠ¶æ€ | ğŸ”´ å¾…å®ç° |
| POST | `/admin/escorts/:id/hospitals` | å…³è”åŒ»é™¢ | ğŸ”´ å¾…å®ç° |
| DELETE | `/admin/escorts/:id/hospitals/:hospitalId` | è§£é™¤åŒ»é™¢å…³è” | ğŸ”´ å¾…å®ç° |

#### ç”¨æˆ·ç«¯ API (`/api/escorts`)

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|------|
| GET | `/escorts` | è·å–é™ªè¯Šå‘˜åˆ—è¡¨ | âœ… å·²å®ç° |
| GET | `/escorts/recommended` | è·å–æ¨èé™ªè¯Šå‘˜ | âœ… å·²å®ç° |
| GET | `/escorts/:id` | è·å–é™ªè¯Šå‘˜è¯¦æƒ… | âœ… å·²å®ç° |

### 3.2 DTO å®šä¹‰

```typescript
// server/src/modules/escorts/dto/escort.dto.ts

export class CreateEscortDto {
  name: string;
  gender: 'male' | 'female';
  phone: string;
  avatar?: string;
  idCard?: string;
  level: 'senior' | 'intermediate' | 'junior' | 'trainee';
  experience?: string;
  introduction?: string;
  tags?: string[];
  certificates?: Array<{
    name: string;
    url: string;
    expireDate?: string;
  }>;
  hospitalIds?: string[]; // åˆå§‹å…³è”çš„åŒ»é™¢
}

export class UpdateEscortDto {
  name?: string;
  gender?: 'male' | 'female';
  phone?: string;
  avatar?: string;
  idCard?: string;
  level?: 'senior' | 'intermediate' | 'junior' | 'trainee';
  experience?: string;
  introduction?: string;
  tags?: string[];
  certificates?: Array<{
    name: string;
    url: string;
    expireDate?: string;
  }>;
  status?: 'active' | 'inactive' | 'pending' | 'suspended';
}

export class AssociateHospitalDto {
  hospitalId: string;
  familiarDepts?: string[]; // ç†Ÿæ‚‰çš„ç§‘å®¤
}
```

### 3.3 Service å®ç°è¦ç‚¹

```typescript
// server/src/modules/admin/services/admin-escorts.service.ts

@Injectable()
export class AdminEscortsService {
  constructor(private prisma: PrismaService) {}

  // åˆ›å»ºé™ªè¯Šå‘˜
  async create(dto: CreateEscortDto) {
    const { hospitalIds, tags, certificates, ...data } = dto;
    
    return this.prisma.escort.create({
      data: {
        ...data,
        tags: tags ? JSON.stringify(tags) : null,
        certificates: certificates ? JSON.stringify(certificates) : null,
        // åŒæ—¶åˆ›å»ºåŒ»é™¢å…³è”
        hospitals: hospitalIds?.length ? {
          create: hospitalIds.map(hospitalId => ({ hospitalId }))
        } : undefined,
      },
      include: {
        hospitals: { include: { hospital: true } }
      }
    });
  }

  // æ›´æ–°é™ªè¯Šå‘˜
  async update(id: string, dto: UpdateEscortDto) {
    const { tags, certificates, ...data } = dto;
    
    return this.prisma.escort.update({
      where: { id },
      data: {
        ...data,
        tags: tags !== undefined ? JSON.stringify(tags) : undefined,
        certificates: certificates !== undefined ? JSON.stringify(certificates) : undefined,
      },
      include: {
        hospitals: { include: { hospital: true } }
      }
    });
  }

  // åˆ é™¤é™ªè¯Šå‘˜
  async delete(id: string) {
    // æ£€æŸ¥æ˜¯å¦æœ‰è¿›è¡Œä¸­çš„è®¢å•
    const activeOrders = await this.prisma.order.count({
      where: {
        escortId: id,
        status: { in: ['pending', 'accepted', 'in_progress'] }
      }
    });
    
    if (activeOrders > 0) {
      throw new BadRequestException('è¯¥é™ªè¯Šå‘˜è¿˜æœ‰è¿›è¡Œä¸­çš„è®¢å•ï¼Œæ— æ³•åˆ é™¤');
    }
    
    // çº§è”åˆ é™¤åŒ»é™¢å…³è”
    await this.prisma.escortHospital.deleteMany({ where: { escortId: id } });
    return this.prisma.escort.delete({ where: { id } });
  }

  // å…³è”åŒ»é™¢
  async associateHospital(escortId: string, dto: AssociateHospitalDto) {
    return this.prisma.escortHospital.upsert({
      where: {
        escortId_hospitalId: {
          escortId,
          hospitalId: dto.hospitalId,
        }
      },
      create: {
        escortId,
        hospitalId: dto.hospitalId,
        familiarDepts: dto.familiarDepts ? JSON.stringify(dto.familiarDepts) : null,
      },
      update: {
        familiarDepts: dto.familiarDepts ? JSON.stringify(dto.familiarDepts) : null,
      },
    });
  }

  // è§£é™¤åŒ»é™¢å…³è”
  async dissociateHospital(escortId: string, hospitalId: string) {
    return this.prisma.escortHospital.delete({
      where: {
        escortId_hospitalId: { escortId, hospitalId }
      }
    });
  }
}
```

---

## å››ã€å‰ç«¯å®ç°æ–¹æ¡ˆ

### 4.1 API å±‚æ‰©å±•

```typescript
// src/lib/api.ts

export interface Escort {
  id: string
  name: string
  gender: 'male' | 'female'
  avatar: string | null
  phone: string
  idCard: string | null
  level: 'senior' | 'intermediate' | 'junior' | 'trainee'
  experience: string | null
  introduction: string | null
  tags: string[] | null        // å‰ç«¯è§£æåçš„æ•°ç»„
  certificates: Certificate[] | null
  rating: number
  orderCount: number
  status: 'active' | 'inactive' | 'pending' | 'suspended'
  hospitals: EscortHospital[]
  createdAt: string
  updatedAt: string
}

export interface EscortHospital {
  id: string
  hospitalId: string
  hospital: { id: string; name: string }
  familiarDepts: string[] | null
}

export interface Certificate {
  name: string
  url: string
  expireDate?: string
}

export interface CreateEscortData {
  name: string
  gender: 'male' | 'female'
  phone: string
  avatar?: string
  idCard?: string
  level: 'senior' | 'intermediate' | 'junior' | 'trainee'
  experience?: string
  introduction?: string
  tags?: string[]
  certificates?: Certificate[]
  hospitalIds?: string[]
}

export const escortApi = {
  // ... ç°æœ‰æ–¹æ³• ...

  // åˆ›å»ºé™ªè¯Šå‘˜
  create: (data: CreateEscortData) =>
    request<Escort>('/admin/escorts', {
      method: 'POST',
      body: JSON.stringify(data),
    }),

  // æ›´æ–°é™ªè¯Šå‘˜
  update: (id: string, data: Partial<CreateEscortData> & { status?: string }) =>
    request<Escort>(`/admin/escorts/${id}`, {
      method: 'PUT',
      body: JSON.stringify(data),
    }),

  // åˆ é™¤é™ªè¯Šå‘˜
  delete: (id: string) =>
    request<void>(`/admin/escorts/${id}`, {
      method: 'DELETE',
    }),

  // æ›´æ–°çŠ¶æ€
  updateStatus: (id: string, status: string) =>
    request<Escort>(`/admin/escorts/${id}/status`, {
      method: 'PUT',
      body: JSON.stringify({ status }),
    }),

  // å…³è”åŒ»é™¢
  associateHospital: (escortId: string, hospitalId: string, familiarDepts?: string[]) =>
    request<void>(`/admin/escorts/${escortId}/hospitals`, {
      method: 'POST',
      body: JSON.stringify({ hospitalId, familiarDepts }),
    }),

  // è§£é™¤åŒ»é™¢å…³è”
  dissociateHospital: (escortId: string, hospitalId: string) =>
    request<void>(`/admin/escorts/${escortId}/hospitals/${hospitalId}`, {
      method: 'DELETE',
    }),
}
```

### 4.2 è¡¨å• Schema (Zod)

```typescript
// src/features/escorts/data/schema.ts

import { z } from 'zod'

export const escortLevels = ['senior', 'intermediate', 'junior', 'trainee'] as const
export const escortStatuses = ['active', 'inactive', 'pending', 'suspended'] as const

export const certificateSchema = z.object({
  name: z.string().min(1, 'è¯ä¹¦åç§°ä¸èƒ½ä¸ºç©º'),
  url: z.string().url('è¯·è¾“å…¥æœ‰æ•ˆçš„URL'),
  expireDate: z.string().optional(),
})

export const escortFormSchema = z.object({
  name: z.string().min(2, 'å§“åè‡³å°‘2ä¸ªå­—ç¬¦').max(20),
  gender: z.enum(['male', 'female']),
  phone: z.string().regex(/^1[3-9]\d{9}$/, 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·'),
  avatar: z.string().optional(),
  idCard: z.string().regex(/^\d{17}[\dXx]$/, 'è¯·è¾“å…¥æœ‰æ•ˆçš„èº«ä»½è¯å·').optional().or(z.literal('')),
  level: z.enum(escortLevels),
  experience: z.string().optional(),
  introduction: z.string().max(500, 'ç®€ä»‹æœ€å¤š500å­—').optional(),
  tags: z.array(z.string()).optional(),
  certificates: z.array(certificateSchema).optional(),
  hospitalIds: z.array(z.string()).optional(),
  status: z.enum(escortStatuses).optional(),
})

export type EscortFormData = z.infer<typeof escortFormSchema>
```

### 4.3 åˆ›å»º/ç¼–è¾‘å¯¹è¯æ¡†ç»„ä»¶

```tsx
// src/features/escorts/components/escort-form-dialog.tsx

export function EscortFormDialog({ 
  open, 
  onOpenChange, 
  escort // ç¼–è¾‘æ—¶ä¼ å…¥ï¼Œæ–°å»ºæ—¶ä¸º undefined
}: Props) {
  const form = useForm<EscortFormData>({
    resolver: zodResolver(escortFormSchema),
    defaultValues: escort ? {
      name: escort.name,
      gender: escort.gender,
      phone: escort.phone,
      // ... å…¶ä»–å­—æ®µ
    } : {
      gender: 'male',
      level: 'junior',
      tags: [],
      hospitalIds: [],
    }
  })

  // æ ‡ç­¾åŠ¨æ€è¾“å…¥
  const [tagInput, setTagInput] = useState('')
  const tags = form.watch('tags') || []

  const addTag = () => {
    if (tagInput && !tags.includes(tagInput)) {
      form.setValue('tags', [...tags, tagInput])
      setTagInput('')
    }
  }

  // åŒ»é™¢é€‰æ‹©
  const { data: hospitals } = useHospitals({ pageSize: 100 })
  const selectedHospitalIds = form.watch('hospitalIds') || []

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-w-2xl max-h-[90vh] overflow-y-auto">
        <DialogHeader>
          <DialogTitle>{escort ? 'ç¼–è¾‘é™ªè¯Šå‘˜' : 'æ–°å¢é™ªè¯Šå‘˜'}</DialogTitle>
        </DialogHeader>
        
        <Form {...form}>
          <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
            {/* åŸºæœ¬ä¿¡æ¯ */}
            <div className="grid grid-cols-2 gap-4">
              <FormField name="name" ... />
              <FormField name="gender" ... />
              <FormField name="phone" ... />
              <FormField name="level" ... />
            </div>

            {/* å¤´åƒä¸Šä¼  */}
            <FormField name="avatar">
              <ImageUpload ... />
            </FormField>

            {/* ä¸ªäººç®€ä»‹ */}
            <FormField name="introduction">
              <Textarea rows={3} />
            </FormField>

            {/* æœåŠ¡æ ‡ç­¾ */}
            <div>
              <Label>æœåŠ¡æ ‡ç­¾</Label>
              <div className="flex gap-2 flex-wrap mb-2">
                {tags.map(tag => (
                  <Badge key={tag}>
                    {tag}
                    <X onClick={() => removeTag(tag)} />
                  </Badge>
                ))}
              </div>
              <div className="flex gap-2">
                <Input 
                  value={tagInput}
                  onChange={e => setTagInput(e.target.value)}
                  placeholder="è¾“å…¥æ ‡ç­¾æŒ‰å›è½¦æ·»åŠ "
                  onKeyDown={e => e.key === 'Enter' && addTag()}
                />
                <Button type="button" onClick={addTag}>æ·»åŠ </Button>
              </div>
            </div>

            {/* å…³è”åŒ»é™¢ */}
            <div>
              <Label>å…³è”åŒ»é™¢</Label>
              <MultiSelect
                options={hospitals?.data.map(h => ({ value: h.id, label: h.name }))}
                selected={selectedHospitalIds}
                onChange={ids => form.setValue('hospitalIds', ids)}
              />
            </div>

            <DialogFooter>
              <Button type="submit">ä¿å­˜</Button>
            </DialogFooter>
          </form>
        </Form>
      </DialogContent>
    </Dialog>
  )
}
```

---

## äº”ã€ç§å­æ•°æ®

### 5.1 é™ªè¯Šå‘˜æ•°æ® (10 æ¡)

```typescript
// server/prisma/seed.ts

const escortsData = [
  {
    name: 'å¼ æ™“çº¢',
    gender: 'female',
    phone: '13800138001',
    level: 'senior',
    experience: '8å¹´',
    introduction: 'ä»äº‹åŒ»ç–—é™ªè¯ŠæœåŠ¡8å¹´ï¼Œç†Ÿæ‚‰åŒ—äº¬å„å¤§ä¸‰ç”²åŒ»é™¢å°±è¯Šæµç¨‹ï¼ŒæœåŠ¡è¿‡ä¸Šåƒä½æ‚£è€…ï¼Œæ·±å—å¥½è¯„ã€‚',
    tags: ['è€å¿ƒç»†è‡´', 'ç»éªŒä¸°å¯Œ', 'ä¸‰ç”²åŒ»é™¢ä¸“å®¶'],
    rating: 99.2,
    orderCount: 1258,
    status: 'active',
    hospitals: ['åå’ŒåŒ»é™¢', 'åŒ—å¤§ç¬¬ä¸€åŒ»é™¢', 'åŒ—äº¬åŒ»é™¢'],
  },
  {
    name: 'ææ˜å',
    gender: 'male',
    phone: '13800138002',
    level: 'senior',
    experience: '6å¹´',
    introduction: 'ä¸“æ³¨è‚¿ç˜¤ç§‘é™ªè¯Šï¼Œå¯¹åŒ—äº¬è‚¿ç˜¤åŒ»é™¢ã€ä¸­å›½åŒ»å­¦ç§‘å­¦é™¢è‚¿ç˜¤åŒ»é™¢éå¸¸ç†Ÿæ‚‰ã€‚',
    tags: ['è‚¿ç˜¤ç§‘ä¸“å®¶', '24å°æ—¶æœåŠ¡', 'ä½é™¢é™ªæŠ¤'],
    rating: 98.5,
    orderCount: 876,
    status: 'active',
    hospitals: ['åŒ—äº¬è‚¿ç˜¤åŒ»é™¢', 'ä¸­æ—¥å‹å¥½åŒ»é™¢'],
  },
  {
    name: 'ç‹èŠ³',
    gender: 'female',
    phone: '13800138003',
    level: 'intermediate',
    experience: '4å¹´',
    introduction: 'æ“…é•¿å„¿ç§‘é™ªè¯Šï¼Œæœ‰çˆ±å¿ƒï¼Œå–„äºä¸å°æœ‹å‹æ²Ÿé€šï¼Œè®©çœ‹ç—…ä¸å†å¯æ€•ã€‚',
    tags: ['å„¿ç§‘ä¸“é•¿', 'äº²å’ŒåŠ›å¼º', 'ç»†å¿ƒå‘¨åˆ°'],
    rating: 97.8,
    orderCount: 542,
    status: 'active',
    hospitals: ['åŒ—äº¬å„¿ç«¥åŒ»é™¢', 'é¦–éƒ½å„¿ç§‘ç ”ç©¶æ‰€'],
  },
  {
    name: 'é™ˆå¿—å¼º',
    gender: 'male',
    phone: '13800138004',
    level: 'intermediate',
    experience: '3å¹´',
    introduction: 'é€€ä¼å†›äººï¼Œè´£ä»»å¿ƒå¼ºï¼Œæ“…é•¿è€å¹´æ‚£è€…é™ªæŠ¤ã€‚',
    tags: ['è€å¹´æŠ¤ç†', 'è´£ä»»å¿ƒå¼º', 'åŠ›é‡å‹æœåŠ¡'],
    rating: 96.5,
    orderCount: 328,
    status: 'active',
    hospitals: ['åŒ—äº¬è€å¹´åŒ»é™¢', 'åŒ—äº¬åŒ»é™¢', 'è§£æ”¾å†›æ€»åŒ»é™¢'],
  },
  {
    name: 'åˆ˜å©·å©·',
    gender: 'female',
    phone: '13800138005',
    level: 'junior',
    experience: '2å¹´',
    introduction: 'æŠ¤ç†ä¸“ä¸šæ¯•ä¸šï¼ŒæŒæœ‰æŠ¤å£«èµ„æ ¼è¯ï¼Œä¸“ä¸šç´ å…»é«˜ã€‚',
    tags: ['æŠ¤ç†ä¸“ä¸š', 'æŒè¯ä¸Šå²—', 'å¹´è½»æ´»åŠ›'],
    rating: 95.0,
    orderCount: 186,
    status: 'active',
    hospitals: ['åå’ŒåŒ»é™¢', 'åŒ—äº¬å¤§å­¦äººæ°‘åŒ»é™¢'],
  },
  {
    name: 'èµµä¼Ÿ',
    gender: 'male',
    phone: '13800138006',
    level: 'junior',
    experience: '1å¹´',
    introduction: 'è®¤çœŸè´Ÿè´£ï¼ŒæœåŠ¡æ€åº¦å¥½ï¼Œæ­£åœ¨å¿«é€Ÿæˆé•¿ä¸­ã€‚',
    tags: ['æ€åº¦å¥½', 'å®ˆæ—¶', 'å­¦ä¹ èƒ½åŠ›å¼º'],
    rating: 93.2,
    orderCount: 87,
    status: 'active',
    hospitals: ['åŒ—äº¬ä¸­åŒ»è¯å¤§å­¦ä¸œç›´é—¨åŒ»é™¢'],
  },
  {
    name: 'å­™ä¸½',
    gender: 'female',
    phone: '13800138007',
    level: 'trainee',
    experience: 'åŠå¹´',
    introduction: 'å®ä¹ é™ªè¯Šå‘˜ï¼Œçƒ­æƒ…å­¦ä¹ ä¸­ã€‚',
    tags: ['æ–°äºº', 'çƒ­æƒ…'],
    rating: 90.0,
    orderCount: 25,
    status: 'active',
    hospitals: ['æœé˜³åŒ»é™¢'],
  },
  {
    name: 'å‘¨å¼º',
    gender: 'male',
    phone: '13800138008',
    level: 'senior',
    experience: '10å¹´',
    introduction: 'èµ„æ·±é™ªè¯Šå‘˜ï¼Œæ›¾ä»»åŒ»é™¢æŠ¤å·¥ç»„é•¿ï¼Œå¯¹åŒ»é™¢è¿ä½œéå¸¸äº†è§£ã€‚',
    tags: ['èµ„æ·±ä¸“å®¶', 'å…¨ç§‘æœåŠ¡', 'VIPä¸“å±'],
    rating: 99.5,
    orderCount: 2156,
    status: 'active',
    hospitals: ['åå’ŒåŒ»é™¢', 'åŒ—äº¬åŒ»é™¢', 'è§£æ”¾å†›301åŒ»é™¢', 'åŒ—å¤§ç¬¬ä¸€åŒ»é™¢'],
  },
  {
    name: 'å´æ•',
    gender: 'female',
    phone: '13800138009',
    level: 'intermediate',
    experience: '5å¹´',
    introduction: 'å¦‡äº§ç§‘é™ªè¯Šä¸“å®¶ï¼Œé™ªä¼´è¿‡ä¸Šç™¾ä½å‡†å¦ˆå¦ˆå®Œæˆäº§æ£€å’Œåˆ†å¨©ã€‚',
    tags: ['å¦‡äº§ç§‘', 'äº§æ£€é™ªåŒ', 'æ¸©æŸ”ä½“è´´'],
    rating: 98.0,
    orderCount: 623,
    status: 'active',
    hospitals: ['åŒ—äº¬å¦‡äº§åŒ»é™¢', 'åŒ—å¤§ç¬¬ä¸€åŒ»é™¢'],
  },
  {
    name: 'éƒ‘æ¶›',
    gender: 'male',
    phone: '13800138010',
    level: 'intermediate',
    experience: '4å¹´',
    introduction: 'éª¨ç§‘é™ªè¯Šä¸“é•¿ï¼Œç†Ÿæ‚‰éª¨ç§‘æ£€æŸ¥å’Œæ‰‹æœ¯æµç¨‹ã€‚',
    tags: ['éª¨ç§‘ä¸“é•¿', 'æ‰‹æœ¯é™ªæŠ¤', 'åº·å¤æŒ‡å¯¼'],
    rating: 96.8,
    orderCount: 412,
    status: 'inactive', // æš‚åœæœåŠ¡
    hospitals: ['ç§¯æ°´æ½­åŒ»é™¢', 'åŒ—äº¬å¤§å­¦ç¬¬ä¸‰åŒ»é™¢'],
  },
]
```

---

## å…­ã€å¼€å‘è®¡åˆ’

### 6.1 æ‰§è¡Œæ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡è€—æ—¶ |
|------|------|----------|
| **Day 1 ä¸Šåˆ** | åç«¯ CRUD API + DTO | 2h |
| **Day 1 ä¸‹åˆ** | å…³è”åŒ»é™¢ API + ç§å­æ•°æ® | 2h |
| **Day 2 ä¸Šåˆ** | å‰ç«¯ API + Hooks | 1h |
| **Day 2 ä¸‹åˆ** | åˆ›å»º/ç¼–è¾‘å¯¹è¯æ¡† | 3h |
| **Day 3** | åˆ é™¤åŠŸèƒ½ + çŠ¶æ€ç®¡ç† + æµ‹è¯• | 3h |

### 6.2 å¼€å‘é¡ºåº

```
1. åç«¯ API (Day 1)
   â”œâ”€â”€ admin-escorts.service.ts (æ‰©å±• CRUD)
   â”œâ”€â”€ admin-escorts.controller.ts (æ–°å¢ç«¯ç‚¹)
   â”œâ”€â”€ dto/escort.dto.ts (åˆ›å»º DTO)
   â””â”€â”€ seed.ts (æ·»åŠ ç§å­æ•°æ®)
   
2. å‰ç«¯å¯¹æ¥ (Day 2)
   â”œâ”€â”€ src/lib/api.ts (æ‰©å±• escortApi)
   â”œâ”€â”€ src/hooks/use-api.ts (æ·»åŠ  mutations)
   â”œâ”€â”€ escorts/data/schema.ts (è¡¨å•éªŒè¯)
   â””â”€â”€ escorts/components/escort-form-dialog.tsx
   
3. åŠŸèƒ½å®Œå–„ (Day 3)
   â”œâ”€â”€ åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†
   â”œâ”€â”€ æ‰¹é‡æ“ä½œ
   â””â”€â”€ è”è°ƒæµ‹è¯•
```

---

## ä¸ƒã€UI è®¾è®¡å‚è€ƒ

### 7.1 åˆ—è¡¨é¡µæ”¹è¿›

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é™ªè¯Šå‘˜åˆ—è¡¨                                    [ç­›é€‰] [+æ–°å¢é™ªè¯Šå‘˜]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€: [å…¨éƒ¨ â–¼]  ç­‰çº§: [å…¨éƒ¨ â–¼]  æœç´¢: [_____________] ğŸ”           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¡ â”‚ å¤´åƒ  â”‚ å§“å     â”‚ ç­‰çº§   â”‚ æ‰‹æœº        â”‚ æœåŠ¡æ•° â”‚ è¯„åˆ†  â”‚ çŠ¶æ€  â”‚
â”‚â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â–¡ â”‚ [ğŸ‘¤]  â”‚ å¼ æ™“çº¢   â”‚ èµ„æ·±   â”‚ 138****8001 â”‚ 1258   â”‚ 99.2% â”‚ â— æ´»è·ƒâ”‚
â”‚ â–¡ â”‚ [ğŸ‘¤]  â”‚ ææ˜å   â”‚ èµ„æ·±   â”‚ 138****8002 â”‚ 876    â”‚ 98.5% â”‚ â— æ´»è·ƒâ”‚
â”‚ â–¡ â”‚ [ğŸ‘¤]  â”‚ ç‹èŠ³     â”‚ ä¸­çº§   â”‚ 138****8003 â”‚ 542    â”‚ 97.8% â”‚ â— æ´»è·ƒâ”‚
â”‚ â–¡ â”‚ [ğŸ‘¤]  â”‚ éƒ‘æ¶›     â”‚ ä¸­çº§   â”‚ 138****8010 â”‚ 412    â”‚ 96.8% â”‚ â—‹ æš‚åœâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æ–°å¢/ç¼–è¾‘å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°å¢é™ªè¯Šå‘˜                                              [Ã—]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  å§“å: [å¼ æ™“çº¢______]    æ€§åˆ«: â— å¥³ â—‹ ç”·            â”‚
â”‚  â”‚  ä¸Šä¼ å¤´åƒ  â”‚  æ‰‹æœº: [13800138001__]  èº«ä»½è¯: [110101********1234]â”‚
â”‚  â”‚   ç‚¹å‡»ä¸Šä¼  â”‚  ç­‰çº§: [èµ„æ·± â–¼_______]  ä»ä¸šå¹´é™: [8å¹´ â–¼]          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                     â”‚
â”‚  ä¸ªäººç®€ä»‹:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ä»äº‹åŒ»ç–—é™ªè¯ŠæœåŠ¡8å¹´ï¼Œç†Ÿæ‚‰åŒ—äº¬å„å¤§ä¸‰ç”²åŒ»é™¢å°±è¯Šæµç¨‹...               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  æœåŠ¡æ ‡ç­¾:                                                          â”‚
â”‚  [è€å¿ƒç»†è‡´ Ã—] [ç»éªŒä¸°å¯Œ Ã—] [ä¸‰ç”²åŒ»é™¢ä¸“å®¶ Ã—]                         â”‚
â”‚  [è¾“å…¥æ–°æ ‡ç­¾______] [æ·»åŠ ]                                          â”‚
â”‚                                                                     â”‚
â”‚  å…³è”åŒ»é™¢:  [+æ·»åŠ åŒ»é™¢]                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ â˜‘ åŒ—äº¬åå’ŒåŒ»é™¢           ç†Ÿæ‚‰ç§‘å®¤: [å†…ç§‘][å¤–ç§‘][+]       â”‚      â”‚
â”‚  â”‚ â˜‘ åŒ—äº¬å¤§å­¦ç¬¬ä¸€åŒ»é™¢       ç†Ÿæ‚‰ç§‘å®¤: [å¿ƒå†…ç§‘][+]           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                     â”‚
â”‚  èµ„è´¨è¯ä¹¦:  [+ä¸Šä¼ è¯ä¹¦]                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ğŸ“„ æŠ¤å£«èµ„æ ¼è¯ (æœ‰æ•ˆæœŸ: 2025-12-31)                   [Ã—] â”‚      â”‚
â”‚  â”‚ ğŸ“„ å¥åº·è¯ (æœ‰æ•ˆæœŸ: 2024-06-30)                       [Ã—] â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           [å–æ¶ˆ]  [ä¿å­˜]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…«ã€é£é™©ä¸æ³¨æ„äº‹é¡¹

### 8.1 æ•°æ®å®Œæ•´æ€§

- **åˆ é™¤ä¿æŠ¤**: æœ‰è¿›è¡Œä¸­è®¢å•çš„é™ªè¯Šå‘˜ä¸èƒ½åˆ é™¤
- **æ‰‹æœºå·å”¯ä¸€**: åˆ›å»º/ç¼–è¾‘æ—¶éœ€æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦å·²å­˜åœ¨
- **çŠ¶æ€æµè½¬**: `pending` â†’ `active` â†’ `inactive`/`suspended`

### 8.2 JSON å­—æ®µå¤„ç†

- åç«¯å­˜å‚¨æ—¶ `JSON.stringify()`
- å‰ç«¯æ˜¾ç¤ºæ—¶è§£æ `JSON.parse()`
- æ³¨æ„ç©ºå€¼å¤„ç† (`null` vs `[]` vs `""`)

### 8.3 æ€§èƒ½è€ƒè™‘

- åŒ»é™¢åˆ—è¡¨å¯èƒ½å¾ˆé•¿ï¼Œè€ƒè™‘åˆ†é¡µæˆ–è™šæ‹Ÿæ»šåŠ¨
- é™ªè¯Šå‘˜åˆ—è¡¨é»˜è®¤æŒ‰ `createdAt DESC` æ’åº
- å‰ç«¯è¡¨æ ¼å·²æ”¯æŒå®¢æˆ·ç«¯æ’åº/ç­›é€‰

---

## ä¹ã€éªŒæ”¶æ ‡å‡†

- [ ] å¯åˆ›å»ºé™ªè¯Šå‘˜å¹¶å…³è”åŒ»é™¢
- [ ] å¯ç¼–è¾‘é™ªè¯Šå‘˜åŸºæœ¬ä¿¡æ¯å’Œå…³è”åŒ»é™¢
- [ ] å¯åˆ é™¤æ— è®¢å•çš„é™ªè¯Šå‘˜
- [ ] å¯å¿«é€Ÿåˆ‡æ¢é™ªè¯Šå‘˜çŠ¶æ€
- [ ] åˆ—è¡¨æ”¯æŒæŒ‰çŠ¶æ€/ç­‰çº§ç­›é€‰
- [ ] åˆ—è¡¨æ”¯æŒæŒ‰å§“å/æ‰‹æœºæœç´¢
- [ ] ç§å­æ•°æ®æˆåŠŸå¯¼å…¥ 10 æ¡è®°å½•

---

**æ–‡æ¡£å®Œæˆï¼Œç­‰å¾…å®¡è®¡** ğŸ“

