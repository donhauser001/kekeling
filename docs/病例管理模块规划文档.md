# ç§‘ç§‘çµ - ç—…ä¾‹ç®¡ç†æ¨¡å—è§„åˆ’æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.0  
> **æ—¥æœŸ**: 2025-12-09  
> **çŠ¶æ€**: è§„åˆ’ä¸­

---

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

### èƒŒæ™¯ä¸åŠ¨æœº

åœ¨é™ªè¯ŠæœåŠ¡åœºæ™¯ä¸­ï¼Œç”¨æˆ·ï¼ˆæˆ–å…¶å®¶å±ï¼‰å¾€å¾€éœ€è¦ç®¡ç†å¤šä½å°±è¯Šäººçš„ç—…å†èµ„æ–™ã€‚è¿™äº›èµ„æ–™é€šå¸¸æ•£è½åœ¨ï¼š
- ğŸ“„ çº¸è´¨ç—…å†æœ¬
- ğŸ“± æ‰‹æœºç›¸å†Œï¼ˆéšæ‰‹æ‹çš„æ£€æŸ¥å•ï¼‰
- ğŸ’¬ å¾®ä¿¡èŠå¤©è®°å½•ï¼ˆåŒ»ç”Ÿå‘çš„æŠ¥å‘Šï¼‰
- ğŸ“§ é‚®ä»¶é™„ä»¶ï¼ˆä½“æ£€æŠ¥å‘Š PDFï¼‰

**æ ¸å¿ƒç—›ç‚¹**ï¼šæ‰¾ä¸åˆ°ã€æ‰¾ä¸å…¨ã€çœ‹ä¸æ‡‚ã€‚

### äº§å“å®šä½

å°†ã€Œç—…ä¾‹ç®¡ç†ã€ä½œä¸ºå¹³å°çš„**ç¬¬äºŒå¢é•¿æ›²çº¿**ï¼Œä»"æœåŠ¡äº¤æ˜“å¹³å°"å‡çº§ä¸º"å¥åº·ç®¡ç†åŠ©æ‰‹"ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç§‘ç§‘çµ äº§å“çŸ©é˜µ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  é™ªè¯ŠæœåŠ¡   â”‚ â”€â”€â–º â”‚  ç—…ä¾‹ç®¡ç†   â”‚ â”€â”€â–º â”‚  å¥åº·ç®¡ç†   â”‚  â”‚
â”‚   â”‚  (äº¤æ˜“)    â”‚     â”‚  (æ²‰æ·€)     â”‚     â”‚  (æœåŠ¡)     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚   Phase 1: MVP        Phase 2: ç»“æ„åŒ–     Phase 3: æ™ºèƒ½åŒ–  â”‚
â”‚   æ‹ç…§å­˜æ¡£            OCR + æ¨¡æ¿          AI + è·Ÿè¸ª        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒä»·å€¼

| ç”¨æˆ·ä»·å€¼ | å•†ä¸šä»·å€¼ |
|----------|----------|
| ç—…å†èµ„æ–™é›†ä¸­ç®¡ç†ï¼Œéšæ—¶å¯æŸ¥ | æå‡ç”¨æˆ·ç²˜æ€§å’Œæ‰“å¼€é¢‘ç‡ |
| å¤šå°±è¯Šäººç—…å†åˆ†å¼€å­˜å‚¨ | å½¢æˆå¥åº·æ•°æ®èµ„äº§ |
| å°±è¯Šè®°å½•æ—¶é—´è½´ï¼Œä¸€ç›®äº†ç„¶ | ä¸ºç²¾å‡†æœåŠ¡æ¨èæä¾›ä¾æ® |
| åæœŸ AI è¾…åŠ©çœ‹æ‡‚æ£€æŸ¥æŠ¥å‘Š | å¼€è¾Ÿå¢å€¼æœåŠ¡æ”¶å…¥ï¼ˆAI è§£è¯»ï¼‰ |

---

## ğŸ—ºï¸ å‘å±•è·¯å¾„

### ä¸‰é˜¶æ®µæ¼”è¿›

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Phase 1: æ‹ç…§å­˜æ¡£        Phase 2: ç»“æ„åŒ–ç®¡ç†        Phase 3: æ™ºèƒ½å¥åº·ç®¡ç†
 (MVP - 1å‘¨)              (è¿­ä»£ - 2å‘¨)               (é•¿æœŸ - æŒç»­)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ â€¢ å›¾ç‰‡ä¸Šä¼       â”‚     â”‚ â€¢ OCR æ–‡å­—è¯†åˆ«  â”‚     â”‚ â€¢ æŒ‡æ ‡è¶‹åŠ¿å›¾    â”‚
 â”‚ â€¢ åˆ†ç±»æ ‡ç­¾      â”‚ â”€â”€â–º â”‚ â€¢ ç—…ä¾‹æ¨¡æ¿      â”‚ â”€â”€â–º â”‚ â€¢ ç”¨è¯æé†’      â”‚
 â”‚ â€¢ æ—¶é—´è½´å±•ç¤º    â”‚     â”‚ â€¢ ç»“æ„åŒ–ç¼–è¾‘    â”‚     â”‚ â€¢ å¤è¯Šæ—¥å†      â”‚
 â”‚ â€¢ å°±è¯Šäººå…³è”    â”‚     â”‚ â€¢ æ™ºèƒ½å½’ç±»      â”‚     â”‚ â€¢ AI å¥åº·å»ºè®®   â”‚
 â”‚ â€¢ è®¢å•å…³è”      â”‚     â”‚ â€¢ æŠ¥å‘Šå¯¹æ¯”      â”‚     â”‚ â€¢ å®¶åº­å¥åº·æ¡£æ¡ˆ  â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 ç›®æ ‡: èƒ½ç”¨              ç›®æ ‡: å¥½ç”¨                ç›®æ ‡: ç¦»ä¸å¼€
 æŒ‡æ ‡: ä¸Šä¼ ç‡ > 30%      æŒ‡æ ‡: è¯†åˆ«å‡†ç¡®ç‡ > 90%    æŒ‡æ ‡: æœˆæ´»ç•™å­˜ > 60%
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Phase 1: æ‹ç…§å­˜æ¡£ (MVP)

**ç›®æ ‡**ï¼šè®©ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°ä¸Šä¼ ã€æŸ¥çœ‹ã€ç®¡ç†ç—…å†å›¾ç‰‡ã€‚

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| ç—…ä¾‹åˆ—è¡¨ | æŒ‰å°±è¯Šäººç­›é€‰ï¼Œæ—¶é—´è½´å±•ç¤º | P0 |
| æ·»åŠ ç—…ä¾‹ | æ‹ç…§/ç›¸å†Œä¸Šä¼ ï¼Œé€‰æ‹©ç±»å‹ | P0 |
| ç—…ä¾‹è¯¦æƒ… | æŸ¥çœ‹å¤§å›¾ï¼Œç¼–è¾‘å¤‡æ³¨ | P0 |
| åˆ é™¤ç—…ä¾‹ | è½¯åˆ é™¤ï¼Œå¯æ¢å¤ | P1 |
| è®¢å•å…³è” | è®¢å•å®Œæˆåå¼•å¯¼ä¸Šä¼  | P1 |
| æœç´¢åŠŸèƒ½ | æŒ‰æ ‡é¢˜ã€å¤‡æ³¨æœç´¢ | P2 |

**æŠ€æœ¯é€‰å‹**ï¼š
- å›¾ç‰‡å­˜å‚¨ï¼šæœ¬åœ° `public/uploads` â†’ åæœŸè¿ç§»åˆ° OSS
- å›¾ç‰‡å‹ç¼©ï¼šå‰ç«¯å‹ç¼©åä¸Šä¼ ï¼ˆTaro æœ‰ç°æˆ APIï¼‰
- é¢„è§ˆï¼šä½¿ç”¨å¾®ä¿¡åŸç”Ÿå›¾ç‰‡é¢„è§ˆèƒ½åŠ›

### Phase 2: ç»“æ„åŒ–ç®¡ç†

**ç›®æ ‡**ï¼šé€šè¿‡ OCR æŠ€æœ¯ï¼Œå°†å›¾ç‰‡ç—…å†è½¬æ¢ä¸ºå¯ç¼–è¾‘ã€å¯æœç´¢çš„ç»“æ„åŒ–æ•°æ®ã€‚

| åŠŸèƒ½ | æè¿° | æŠ€æœ¯æ–¹æ¡ˆ |
|------|------|----------|
| OCR è¯†åˆ« | è¯†åˆ«æ£€éªŒæŠ¥å‘Šã€å¤„æ–¹å•æ–‡å­— | è…¾è®¯äº‘ OCR / ç™¾åº¦äº‘ OCR |
| ç—…ä¾‹æ¨¡æ¿ | æ£€éªŒæŠ¥å‘Šã€å¤„æ–¹ã€ä½“æ£€ç­‰æ¨¡æ¿ | JSON Schema å®šä¹‰ |
| å­—æ®µç¼–è¾‘ | ç”¨æˆ·å¯ä¿®æ­£è¯†åˆ«é”™è¯¯ | è¡¨å•ç¼–è¾‘å™¨ |
| æ™ºèƒ½åˆ†ç±» | è‡ªåŠ¨è¯†åˆ«ç—…ä¾‹ç±»å‹ | è§„åˆ™ + ML æ¨¡å‹ |
| æŠ¥å‘Šå¯¹æ¯” | åŒç±»æŠ¥å‘Šå†å²å¯¹æ¯” | æ—¶é—´åºåˆ—å¯è§†åŒ– |

**OCR æœåŠ¡å•†å¯¹æ¯”**ï¼š

| æœåŠ¡å•† | ä¼˜åŠ¿ | ä»·æ ¼ | æ¨èåœºæ™¯ |
|--------|------|------|----------|
| è…¾è®¯äº‘ OCR | åŒ»ç–—ç¥¨æ®ä¸“ç”¨æ¨¡å‹ | Â¥0.15/æ¬¡ | å¤„æ–¹å•ã€å‘ç¥¨ |
| ç™¾åº¦äº‘ OCR | é€šç”¨æ–‡å­—è¯†åˆ«å‡†ç¡® | Â¥0.10/æ¬¡ | æ£€éªŒæŠ¥å‘Š |
| é˜¿é‡Œäº‘ OCR | è¡¨æ ¼è¯†åˆ«å¼º | Â¥0.12/æ¬¡ | ä½“æ£€æŠ¥å‘Šè¡¨æ ¼ |

### Phase 3: æ™ºèƒ½å¥åº·ç®¡ç†

**ç›®æ ‡**ï¼šåŸºäºæ²‰æ·€çš„å¥åº·æ•°æ®ï¼Œæä¾›æ™ºèƒ½åŒ–çš„å¥åº·ç®¡ç†æœåŠ¡ã€‚

| åŠŸèƒ½ | æè¿° | æŠ€æœ¯æ–¹æ¡ˆ |
|------|------|----------|
| æŒ‡æ ‡è¶‹åŠ¿å›¾ | è¡€å‹ã€è¡€ç³–ã€è¡€è„‚ç­‰æ—¶é—´æ›²çº¿ | ECharts / F2 |
| å¼‚å¸¸é¢„è­¦ | æŒ‡æ ‡è¶…æ ‡è‡ªåŠ¨æé†’ | è§„åˆ™å¼•æ“ |
| ç”¨è¯æé†’ | æŒ‰å¤„æ–¹è®¾ç½®æœè¯æé†’ | æœ¬åœ°é€šçŸ¥ + äº‘å‡½æ•° |
| å¤è¯Šæ—¥å† | åŒ»ç”Ÿå»ºè®®çš„å¤è¯Šæ—¶é—´æé†’ | æ—¥å†é›†æˆ |
| AI è§£è¯» | GPT è§£è¯»æ£€æŸ¥æŠ¥å‘Š | OpenAI / æ–‡å¿ƒä¸€è¨€ |
| å¥åº·æŠ¥å‘Š | å¹´åº¦å¥åº·æ€»ç»“ | PDF ç”Ÿæˆ |

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•°æ®æ¨¡å‹è®¾è®¡

```prisma
// ============================================
// ç—…ä¾‹ç®¡ç†ç›¸å…³æ¨¡å‹
// ============================================

// ç—…ä¾‹è®°å½•
model MedicalRecord {
  id             String   @id @default(uuid())
  patientId      String   @map("patient_id")       // å…³è”å°±è¯Šäºº
  orderId        String?  @map("order_id")         // å¯é€‰å…³è”è®¢å•
  
  // åŸºæœ¬ä¿¡æ¯
  title          String                            // æ ‡é¢˜
  type           String   @default("other")        // ç±»å‹
  visitDate      DateTime? @map("visit_date")      // å°±è¯Šæ—¥æœŸ
  hospitalName   String?  @map("hospital_name")    // å°±è¯ŠåŒ»é™¢
  departmentName String?  @map("department_name")  // å°±è¯Šç§‘å®¤
  doctorName     String?  @map("doctor_name")      // ä¸»æ²»åŒ»ç”Ÿ
  diagnosis      String?                           // è¯Šæ–­ç»“æœ
  
  // å›¾ç‰‡å­˜å‚¨
  images         String[]                          // å›¾ç‰‡ URL æ•°ç»„
  
  // OCR ä¸ç»“æ„åŒ–æ•°æ® (Phase 2)
  ocrStatus      String   @default("none") @map("ocr_status") // none/processing/done/failed
  ocrResult      Json?    @map("ocr_result")       // OCR åŸå§‹ç»“æœ
  structuredData Json?    @map("structured_data")  // ç»“æ„åŒ–æ•°æ®
  
  // ç”¨æˆ·è¾“å…¥
  remark         String?                           // ç”¨æˆ·å¤‡æ³¨
  tags           String[]                          // ç”¨æˆ·æ ‡ç­¾
  
  // å…ƒæ•°æ®
  isDeleted      Boolean  @default(false) @map("is_deleted")
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")
  
  // å…³è”
  patient        Patient  @relation(fields: [patientId], references: [id])
  order          Order?   @relation(fields: [orderId], references: [id])
  
  @@index([patientId, createdAt])
  @@index([patientId, type])
  @@map("medical_records")
}

// ç—…ä¾‹ç±»å‹æšä¸¾è¯´æ˜
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ type å€¼      â”‚ ä¸­æ–‡åç§°           â”‚ ç¤ºä¾‹                â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚ report       â”‚ æ£€éªŒ/æ£€æŸ¥æŠ¥å‘Š      â”‚ è¡€å¸¸è§„ã€è‚åŠŸèƒ½      â”‚
// â”‚ prescription â”‚ å¤„æ–¹å•             â”‚ é—¨è¯Šå¤„æ–¹ã€ä¸­è¯æ–¹    â”‚
// â”‚ exam         â”‚ ä½“æ£€æŠ¥å‘Š           â”‚ å¹´åº¦ä½“æ£€æŠ¥å‘Š        â”‚
// â”‚ imaging      â”‚ å½±åƒèµ„æ–™           â”‚ CTã€MRIã€Xå…‰ç‰‡      â”‚
// â”‚ admission    â”‚ å…¥é™¢/å‡ºé™¢å°ç»“      â”‚ ä½é™¢ç—…å†            â”‚
// â”‚ surgery      â”‚ æ‰‹æœ¯è®°å½•           â”‚ æ‰‹æœ¯åŒæ„ä¹¦ã€è®°å½•    â”‚
// â”‚ other        â”‚ å…¶ä»–               â”‚ é—¨è¯Šç—…å†ã€æ‚é¡¹      â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// å¥åº·æŒ‡æ ‡è®°å½• (Phase 3)
model HealthMetric {
  id          String   @id @default(uuid())
  patientId   String   @map("patient_id")
  recordId    String?  @map("record_id")     // å…³è”ç—…ä¾‹
  
  metricType  String   @map("metric_type")   // æŒ‡æ ‡ç±»å‹
  metricName  String   @map("metric_name")   // æŒ‡æ ‡åç§°
  value       Float                          // æ•°å€¼
  unit        String?                        // å•ä½
  refMin      Float?   @map("ref_min")       // å‚è€ƒå€¼ä¸‹é™
  refMax      Float?   @map("ref_max")       // å‚è€ƒå€¼ä¸Šé™
  isAbnormal  Boolean  @default(false) @map("is_abnormal")
  
  measuredAt  DateTime @map("measured_at")   // æµ‹é‡æ—¶é—´
  createdAt   DateTime @default(now()) @map("created_at")
  
  patient     Patient  @relation(fields: [patientId], references: [id])
  record      MedicalRecord? @relation(fields: [recordId], references: [id])
  
  @@index([patientId, metricType, measuredAt])
  @@map("health_metrics")
}

// ç”¨è¯æé†’ (Phase 3)
model MedicationReminder {
  id          String   @id @default(uuid())
  patientId   String   @map("patient_id")
  recordId    String?  @map("record_id")     // å…³è”å¤„æ–¹
  
  medicineName String  @map("medicine_name") // è¯å“åç§°
  dosage      String                         // å‰‚é‡
  frequency   String                         // é¢‘æ¬¡ï¼ˆå¦‚ "æ¯æ—¥3æ¬¡"ï¼‰
  times       String[]                       // æé†’æ—¶é—´ç‚¹ ["08:00", "12:00", "18:00"]
  startDate   DateTime @map("start_date")    // å¼€å§‹æ—¥æœŸ
  endDate     DateTime? @map("end_date")     // ç»“æŸæ—¥æœŸ
  
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  
  patient     Patient  @relation(fields: [patientId], references: [id])
  
  @@map("medication_reminders")
}
```

### API è®¾è®¡

```yaml
# ============================================
# ç—…ä¾‹ç®¡ç† API
# ============================================

# ç—…ä¾‹åˆ—è¡¨
GET /api/medical-records
  Query:
    - patientId: string (å¿…å¡«ï¼Œå°±è¯ŠäººID)
    - type?: string (ç—…ä¾‹ç±»å‹)
    - startDate?: string (å¼€å§‹æ—¥æœŸ)
    - endDate?: string (ç»“æŸæ—¥æœŸ)
    - keyword?: string (æœç´¢å…³é”®è¯)
    - page?: number
    - pageSize?: number
  Response:
    - data: MedicalRecord[]
    - total: number
    - page: number

# ç—…ä¾‹è¯¦æƒ…
GET /api/medical-records/:id
  Response:
    - MedicalRecord (å«å®Œæ•´ä¿¡æ¯)

# åˆ›å»ºç—…ä¾‹
POST /api/medical-records
  Body:
    - patientId: string (å¿…å¡«)
    - title: string (å¿…å¡«)
    - type: string
    - images: string[] (å›¾ç‰‡URL)
    - visitDate?: string
    - hospitalName?: string
    - departmentName?: string
    - doctorName?: string
    - diagnosis?: string
    - remark?: string
    - tags?: string[]
    - orderId?: string (å…³è”è®¢å•)
  Response:
    - MedicalRecord

# æ›´æ–°ç—…ä¾‹
PUT /api/medical-records/:id
  Body: (åŒåˆ›å»ºï¼Œæ‰€æœ‰å­—æ®µå¯é€‰)
  Response:
    - MedicalRecord

# åˆ é™¤ç—…ä¾‹ (è½¯åˆ é™¤)
DELETE /api/medical-records/:id
  Response:
    - success: boolean

# ä¸Šä¼ å›¾ç‰‡
POST /api/medical-records/upload
  Body: FormData (multipart/form-data)
    - file: File
  Response:
    - url: string (å›¾ç‰‡URL)
    - thumbnail: string (ç¼©ç•¥å›¾URL)

# ============================================
# OCR ç›¸å…³ API (Phase 2)
# ============================================

# è§¦å‘ OCR è¯†åˆ«
POST /api/medical-records/:id/ocr
  Response:
    - taskId: string

# æŸ¥è¯¢ OCR çŠ¶æ€
GET /api/medical-records/:id/ocr-status
  Response:
    - status: 'processing' | 'done' | 'failed'
    - result?: OcrResult

# ============================================
# å¥åº·æŒ‡æ ‡ API (Phase 3)
# ============================================

# è·å–æŒ‡æ ‡è¶‹åŠ¿
GET /api/health-metrics/trend
  Query:
    - patientId: string
    - metricType: string (å¦‚ 'blood_pressure', 'blood_sugar')
    - startDate: string
    - endDate: string
  Response:
    - data: { date: string, value: number }[]
```

### å°ç¨‹åºé¡µé¢ç»“æ„

```
miniapp/src/pages/
â”œâ”€â”€ records/                    # ç—…ä¾‹ç®¡ç† (æ–°å¢)
â”‚   â”œâ”€â”€ index.tsx              # ç—…ä¾‹åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ index.scss
â”‚   â”œâ”€â”€ detail.tsx             # ç—…ä¾‹è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ detail.scss
â”‚   â”œâ”€â”€ add.tsx                # æ·»åŠ ç—…ä¾‹é¡µ
â”‚   â””â”€â”€ add.scss
â”‚
â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ index.tsx              # æˆ‘çš„é¡µé¢ (éœ€è¦æ·»åŠ è®¢å•å…¥å£)
â”‚   â””â”€â”€ orders.tsx             # æˆ‘çš„è®¢å•é¡µ (ä» orders/index ç§»åŠ¨æˆ–å¤ç”¨)
```

### TabBar è°ƒæ•´

```typescript
// miniapp/src/app.config.ts
tabBar: {
  list: [
    { pagePath: 'pages/index/index', text: 'é¦–é¡µ', iconName: 'home' },
    { pagePath: 'pages/services/index', text: 'æœåŠ¡', iconName: 'grid' },
    { pagePath: 'pages/records/index', text: 'ç—…ä¾‹', iconName: 'file-text' },  // æ–°å¢
    { pagePath: 'pages/user/index', text: 'æˆ‘çš„', iconName: 'user' },
  ],
}

// miniapp/src/components/CustomTabBar/index.tsx
const tabList: TabItem[] = [
  { pagePath: '/pages/index/index', text: 'é¦–é¡µ', iconName: 'home' },
  { pagePath: '/pages/services/index', text: 'æœåŠ¡', iconName: 'grid' },
  { pagePath: '/pages/records/index', text: 'ç—…ä¾‹', iconName: 'file-text' },  // æ–°å¢
  { pagePath: '/pages/user/index', text: 'æˆ‘çš„', iconName: 'user' },
]
```

---

## ğŸ“± UI/UX è®¾è®¡

### ç—…ä¾‹åˆ—è¡¨é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—€  ç—…ä¾‹ç®¡ç†                                    ğŸ”          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ‘¤ å½“å‰å°±è¯Šäºº: å¼ ä¸‰(çˆ¶äº²)                    â–¼    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ å…¨éƒ¨ â”€â”¬â”€ æ£€æŸ¥æŠ¥å‘Š â”€â”¬â”€ å¤„æ–¹å• â”€â”¬â”€ ä½“æ£€ â”€â”¬â”€ å½±åƒ â”€â”    â”‚
â”‚  â”‚  â—    â”‚            â”‚          â”‚        â”‚        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  ğŸ“… 2024å¹´12æœˆ                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¥ 12/05  åå’ŒåŒ»é™¢ Â· å¿ƒå†…ç§‘                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ“„ â”‚  å¿ƒç”µå›¾æ£€æŸ¥æŠ¥å‘Š                              â”‚   â”‚
â”‚  â”‚ â”‚    â”‚  è¯Šæ–­: çª¦æ€§å¿ƒå¾‹ï¼Œå¿ƒç‡æ­£å¸¸                    â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”˜                                     3å¼ å›¾ç‰‡ â–¶â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¥ 12/05  åå’ŒåŒ»é™¢ Â· å¿ƒå†…ç§‘                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ’Š â”‚  é—¨è¯Šå¤„æ–¹                                    â”‚   â”‚
â”‚  â”‚ â”‚    â”‚  é˜¿å¸åŒ¹æ—è‚ æº¶ç‰‡ 100mg                        â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”˜                                     1å¼ å›¾ç‰‡ â–¶â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  ğŸ“… 2024å¹´11æœˆ                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¥ 11/20  åŒ—åŒ»ä¸‰é™¢ Â· éª¨ç§‘                           â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ©» â”‚  è…°æ¤ MRI æ£€æŸ¥                               â”‚   â”‚
â”‚  â”‚ â”‚    â”‚  è¯Šæ–­: L4-L5æ¤é—´ç›˜è½»åº¦è†¨å‡º                   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”˜                                     5å¼ å›¾ç‰‡ â–¶â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                    â”‚   â• æ·»åŠ ç—…ä¾‹    â”‚                    â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ         ğŸ“‹        ğŸ“        ğŸ‘¤                         â”‚
â”‚   é¦–é¡µ      æœåŠ¡      ç—…ä¾‹      æˆ‘çš„                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ·»åŠ ç—…ä¾‹é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—€  æ·»åŠ ç—…ä¾‹                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å°±è¯Šäºº *                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å¼ ä¸‰(çˆ¶äº²)                                     â–¼   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ç—…ä¾‹ç±»å‹ *                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ğŸ“„    â”‚ â”‚  ğŸ’Š    â”‚ â”‚  ğŸ“‹    â”‚ â”‚  ğŸ©»    â”‚              â”‚
â”‚  â”‚æ£€æŸ¥æŠ¥å‘Šâ”‚ â”‚ å¤„æ–¹å• â”‚ â”‚ä½“æ£€æŠ¥å‘Šâ”‚ â”‚å½±åƒèµ„æ–™â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  â”‚  ğŸ¥    â”‚ â”‚  ğŸ“    â”‚                                     â”‚
â”‚  â”‚å‡ºå…¥é™¢  â”‚ â”‚  å…¶ä»–  â”‚                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                             â”‚
â”‚  ä¸Šä¼ å›¾ç‰‡ *                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚   â•   â”‚              â”‚
â”‚  â”‚  ğŸ“·    â”‚ â”‚  ğŸ“·    â”‚ â”‚  ğŸ“·    â”‚ â”‚  æ·»åŠ   â”‚              â”‚
â”‚  â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                             â”‚
â”‚  æ ‡é¢˜ *                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2024å¹´12æœˆå¿ƒå†…ç§‘æ£€æŸ¥æŠ¥å‘Š                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  å°±è¯Šæ—¥æœŸ                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2024-12-05                                     ğŸ“…  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  å°±è¯ŠåŒ»é™¢                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åŒ—äº¬åå’ŒåŒ»é™¢                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  å°±è¯Šç§‘å®¤                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å¿ƒå†…ç§‘                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  è¯Šæ–­ç»“æœ                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  çª¦æ€§å¿ƒå¾‹ï¼Œå¿ƒç‡æ­£å¸¸                                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  å¤‡æ³¨                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åŒ»ç”Ÿå»ºè®®3ä¸ªæœˆåå¤æŸ¥                                â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      ä¿å­˜ç—…ä¾‹                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¢å•å®Œæˆæé†’å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                         âœ…                                  â”‚
â”‚                                                             â”‚
â”‚                    æœåŠ¡å·²å®Œæˆ                               â”‚
â”‚                                                             â”‚
â”‚           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚                                                             â”‚
â”‚              ğŸ“¸ è®°å¾—ä¿å­˜æœ¬æ¬¡ç—…å†èµ„æ–™                        â”‚
â”‚                                                             â”‚
â”‚           ä¸Šä¼ æ£€æŸ¥æŠ¥å‘Šã€å¤„æ–¹å•ç­‰ï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   ğŸ“ ç«‹å³ä¸Šä¼                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                      ç¨åå†è¯´                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… å®æ–½è®¡åˆ’

### Phase 1: MVP (é¢„è®¡ 5 å¤©)

| å¤©æ•° | ä»»åŠ¡ | äº§å‡º |
|------|------|------|
| Day 1 | æ•°æ®åº“è®¾è®¡ + åç«¯ API | Schema + CRUD API |
| Day 2 | å›¾ç‰‡ä¸Šä¼ æœåŠ¡ | ä¸Šä¼ æ¥å£ + å‹ç¼© |
| Day 3 | å°ç¨‹åºç—…ä¾‹åˆ—è¡¨é¡µ | åˆ—è¡¨ + ç­›é€‰ |
| Day 4 | å°ç¨‹åºæ·»åŠ /è¯¦æƒ…é¡µ | å®Œæ•´æµç¨‹ |
| Day 5 | TabBar è°ƒæ•´ + è®¢å•å¼•å¯¼ | ä¸Šçº¿ |

### è¯¦ç»†ä»»åŠ¡åˆ†è§£

#### Day 1: åç«¯åŸºç¡€

```bash
# 1. æ›´æ–° Prisma Schema
# 2. è¿è¡Œè¿ç§»
npx prisma migrate dev --name add_medical_records

# 3. ç”Ÿæˆ NestJS æ¨¡å—
nest g resource modules/medical-records

# 4. å®ç° CRUD æ¥å£
# 5. æ·»åŠ ç§å­æ•°æ®
```

#### Day 2: å›¾ç‰‡æœåŠ¡

```typescript
// å›¾ç‰‡ä¸Šä¼ æ§åˆ¶å™¨
@Post('upload')
@UseInterceptors(FileInterceptor('file'))
async uploadImage(@UploadedFile() file: Express.Multer.File) {
  // 1. æ–‡ä»¶æ ¡éªŒ (ç±»å‹ã€å¤§å°)
  // 2. å‹ç¼©å›¾ç‰‡ (ä½¿ç”¨ sharp)
  // 3. ç”Ÿæˆç¼©ç•¥å›¾
  // 4. ä¿å­˜åˆ° public/uploads
  // 5. è¿”å› URL
}
```

#### Day 3-4: å°ç¨‹åºé¡µé¢

```bash
# åˆ›å»ºé¡µé¢
miniapp/src/pages/records/index.tsx     # åˆ—è¡¨
miniapp/src/pages/records/detail.tsx    # è¯¦æƒ…
miniapp/src/pages/records/add.tsx       # æ·»åŠ 
```

#### Day 5: TabBar + å¼•å¯¼

```typescript
// 1. ä¿®æ”¹ CustomTabBarï¼Œæ·»åŠ ç—…ä¾‹ Tab
// 2. ä¿®æ”¹ app.config.tsï¼Œæ·»åŠ ç—…ä¾‹é¡µè·¯ç”±
// 3. è®¢å•å®Œæˆæ—¶æ˜¾ç¤ºå¼•å¯¼å¼¹çª—
// 4. æˆ‘çš„é¡µé¢æ·»åŠ "æˆ‘çš„è®¢å•"å…¥å£
```

---

## âœ… æœ€ä½³å®è·µ

### 1. å›¾ç‰‡å¤„ç†

```typescript
// å‰ç«¯å‹ç¼© (Taro)
Taro.compressImage({
  src: imagePath,
  quality: 80, // å‹ç¼©è´¨é‡
}).then(res => {
  // ä¸Šä¼ å‹ç¼©åçš„å›¾ç‰‡
})

// åç«¯è¿›ä¸€æ­¥å‹ç¼© (Sharp)
await sharp(buffer)
  .resize(1200, null, { withoutEnlargement: true })
  .jpeg({ quality: 85 })
  .toFile(outputPath)
```

### 2. éšç§ä¸å®‰å…¨

```typescript
// 1. ç—…ä¾‹æ•°æ®åªèƒ½è¢«æœ¬äººè®¿é—®
async findAll(userId: string, patientId: string) {
  // éªŒè¯å°±è¯Šäººå±äºå½“å‰ç”¨æˆ·
  const patient = await this.prisma.patient.findFirst({
    where: { id: patientId, userId }
  })
  if (!patient) throw new ForbiddenException()
  
  // æŸ¥è¯¢ç—…ä¾‹
  return this.prisma.medicalRecord.findMany({
    where: { patientId }
  })
}

// 2. å›¾ç‰‡ URL ä½¿ç”¨ç­¾åè®¿é—® (Phase 2)
// 3. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ (Phase 3)
```

### 3. ç¦»çº¿æ”¯æŒ (Phase 2)

```typescript
// ä½¿ç”¨ Taro çš„æœ¬åœ°å­˜å‚¨ä½œä¸ºç¼“å­˜
const cacheKey = `records_${patientId}`
const cached = Taro.getStorageSync(cacheKey)

if (cached && !forceRefresh) {
  return cached
}

const data = await api.get('/medical-records', { patientId })
Taro.setStorageSync(cacheKey, data)
return data
```

### 4. OCR é›†æˆç¤ºä¾‹ (Phase 2)

```typescript
// è…¾è®¯äº‘ OCR è°ƒç”¨
import * as tencentcloud from 'tencentcloud-sdk-nodejs'

const OcrClient = tencentcloud.ocr.v20181119.Client

async recognizeMedicalReport(imageUrl: string) {
  const client = new OcrClient({
    credential: { secretId, secretKey },
    region: 'ap-beijing'
  })
  
  const result = await client.RecognizeMedicalInvoiceOCR({
    ImageUrl: imageUrl
  })
  
  return this.parseOcrResult(result)
}
```

### 5. æ€§èƒ½ä¼˜åŒ–

```typescript
// 1. å›¾ç‰‡æ‡’åŠ è½½
<Image
  lazyLoad
  src={record.images[0]}
  mode="aspectFill"
/>

// 2. åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ (å¤§é‡æ•°æ®æ—¶)
// 3. åˆ†é¡µåŠ è½½
// 4. ç¼©ç•¥å›¾é¢„è§ˆï¼Œç‚¹å‡»æŸ¥çœ‹å¤§å›¾
```

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### MVP é˜¶æ®µ

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| ä¸Šä¼ è½¬åŒ–ç‡ | > 30% | è®¢å•å®Œæˆåä¸Šä¼ ç—…ä¾‹çš„æ¯”ä¾‹ |
| äººå‡ç—…ä¾‹æ•° | > 3 | æ´»è·ƒç”¨æˆ·å¹³å‡ç—…ä¾‹æ•° |
| åŠŸèƒ½ä½¿ç”¨ç‡ | > 20% | æ´»è·ƒç”¨æˆ·ä¸­ä½¿ç”¨ç—…ä¾‹ç®¡ç†çš„æ¯”ä¾‹ |

### Phase 2

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| OCR è¯†åˆ«ç‡ | > 90% | æ–‡å­—è¯†åˆ«å‡†ç¡®ç‡ |
| ç»“æ„åŒ–ç‡ | > 60% | æˆåŠŸæå–ç»“æ„åŒ–æ•°æ®çš„æ¯”ä¾‹ |

### Phase 3

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| æœˆæ´»ç•™å­˜ | > 60% | å› ç—…ä¾‹ç®¡ç†è€Œç•™å­˜çš„ç”¨æˆ· |
| ä»˜è´¹è½¬åŒ– | > 5% | AI è§£è¯»ç­‰å¢å€¼æœåŠ¡ä»˜è´¹ç‡ |

---

## âš ï¸ é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|----------|
| ç”¨æˆ·ä¸æ„¿ä¸Šä¼  | åŠŸèƒ½ä»·å€¼æ— æ³•ä½“ç° | è®¢å•åå¼ºå¼•å¯¼ + ç§¯åˆ†æ¿€åŠ± |
| å›¾ç‰‡å­˜å‚¨æˆæœ¬ | è¿è¥æˆæœ¬å¢åŠ  | å‹ç¼© + CDN + å†·çƒ­åˆ†ç¦» |
| OCR å‡†ç¡®ç‡ä½ | ç”¨æˆ·ä½“éªŒå·® | å…è®¸æ‰‹åŠ¨ä¿®æ­£ + æŒç»­ä¼˜åŒ– |
| éšç§åˆè§„é£é™© | æ³•å¾‹é£é™© | æ˜ç¡®å‘ŠçŸ¥ + åŠ å¯†å­˜å‚¨ + ç”¨æˆ·æˆæƒ |

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [è…¾è®¯äº‘ OCR æ–‡æ¡£](https://cloud.tencent.com/document/product/866)
- [å¾®ä¿¡å°ç¨‹åºå›¾ç‰‡ API](https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.chooseImage.html)
- [HIPAA å¥åº·æ•°æ®åˆè§„æŒ‡å—](https://www.hhs.gov/hipaa/index.html) (å‚è€ƒ)

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0 | åˆ›å»ºæ—¥æœŸ: 2025-12-09*

