# ç§‘ç§‘çµ - åŒ»ç–—èµ„æºæ¿å—è§„åˆ’æ–‡æ¡£

> ç‰ˆæœ¬: v1.0  
> æ›´æ–°æ—¥æœŸ: 2024-12-08  
> çŠ¶æ€: å¾…å¼€å‘

---

## ä¸€ã€ç°çŠ¶åˆ†æ

### 1.1 å½“å‰æ•°æ®åº“è®¾è®¡

```
å½“å‰ schema.prisma:

Hospital (åŒ»é™¢è¡¨)
â”œâ”€â”€ id, name, level, type, address, phone
â”œâ”€â”€ latitude, longitude (åœ°ç†ä½ç½®)
â”œâ”€â”€ introduction, trafficGuide, parkingInfo
â”œâ”€â”€ departments: String? // âš ï¸ JSON å­—ç¬¦ä¸²ï¼Œè®¾è®¡ç¼ºé™·
â”œâ”€â”€ coverImage, status
â””â”€â”€ å…³è”: orders, escorts
```

### 1.2 æ ¸å¿ƒé—®é¢˜

| é—®é¢˜ | å½±å“ | ä¸¥é‡ç¨‹åº¦ |
|------|------|---------|
| **ç§‘å®¤å­˜ä¸º JSON** | æ— æ³•æŒ‰ç§‘å®¤ç­›é€‰åŒ»ç”Ÿã€æ— æ³•ç®¡ç†ç§‘å®¤ä¿¡æ¯ | ğŸ”´ è‡´å‘½ |
| **ç¼ºå°‘ Doctor æ¨¡å‹** | æ— æ³•å®ç°åŒ»ç”Ÿåˆ—è¡¨ã€åŒ»ç”Ÿè¯¦æƒ…ã€åŒ»ç”Ÿæœç´¢ | ğŸ”´ è‡´å‘½ |
| **ç¼ºå°‘ Department æ¨¡å‹** | æ— æ³•åšç§‘å®¤å±‚çº§ç®¡ç†ã€å·æºç®¡ç† | ğŸ”´ è‡´å‘½ |
| **å‰åç«¯ç±»å‹ä¸ä¸€è‡´** | `shared-types` æœ‰å®šä¹‰ä½†æ•°æ®åº“æœªè½åœ° | ğŸŸ¡ ä¸­ç­‰ |

### 1.3 æ— æ³•æ”¯æ’‘çš„ä¸šåŠ¡åœºæ™¯

- âŒ æœç´¢"æ“…é•¿å¿ƒè„ç—…çš„åŒ»ç”Ÿ"
- âŒ ç­›é€‰"å†…ç§‘çš„æ‰€æœ‰åŒ»ç”Ÿ"
- âŒ æŒ‰åŒ»ç”Ÿé¢„çº¦æŒ‚å·
- âŒ åŒ»ç”Ÿæ’ç­ç®¡ç†
- âŒ ç§‘å®¤çº§åˆ«çš„æœåŠ¡å®šä»·
- âŒ åŒ»ç”Ÿè¯„ä»·ç³»ç»Ÿ

---

## äºŒã€ç›®æ ‡æ¶æ„è®¾è®¡

### 2.1 å®ä½“å…³ç³»å›¾ (ER Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åŒ»ç–—èµ„æºæ ¸å¿ƒæ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ Hospital â”‚ 1â”€â”€â”€N â”‚  Department  â”‚ 1â”€â”€â”€N â”‚  Doctor  â”‚               â”‚
â”‚   â”‚  (åŒ»é™¢)   â”‚       â”‚    (ç§‘å®¤)    â”‚       â”‚  (åŒ»ç”Ÿ)  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚        â”‚                    â”‚                    â”‚                      â”‚
â”‚        â”‚                    â”‚ è‡ªå…³è”             â”‚                      â”‚
â”‚        â”‚                    â–¼                    â”‚                      â”‚
â”‚        â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                      â”‚
â”‚        â”‚             â”‚ SubDepartmentâ”‚            â”‚                      â”‚
â”‚        â”‚             â”‚  (å­ç§‘å®¤)     â”‚            â”‚                      â”‚
â”‚        â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                      â”‚
â”‚        â”‚                                         â”‚                      â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                    Hospital ä¹Ÿç›´æ¥å…³è” Doctor                            â”‚
â”‚                    (æ–¹ä¾¿æŸ¥è¯¢æŸåŒ»é™¢æ‰€æœ‰åŒ»ç”Ÿ)                               â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚  Escort  â”‚ Nâ”€â”€â”€N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  EscortHospital  â”‚        â”‚
â”‚   â”‚ (é™ªè¯Šå‘˜) â”‚                              â”‚    (ç†Ÿæ‚‰åŒ»é™¢)     â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                         â”‚
â”‚   [æœªæ¥æ‰©å±•]                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚DoctorScheduleâ”‚      â”‚   DoctorTag  â”‚      â”‚ DoctorReview â”‚         â”‚
â”‚   â”‚  (åŒ»ç”Ÿæ’ç­)   â”‚      â”‚  (åŒ»ç”Ÿæ ‡ç­¾)   â”‚      â”‚  (åŒ»ç”Ÿè¯„ä»·)   â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å±‚çº§å…³ç³»

```
åŒ»é™¢ (Hospital)
 â””â”€â”€ ä¸€çº§ç§‘å®¤ (Department)
      â””â”€â”€ äºŒçº§ç§‘å®¤ (Sub-Department) [å¯é€‰]
           â””â”€â”€ åŒ»ç”Ÿ (Doctor)
```

**ç¤ºä¾‹æ•°æ®:**

```
ä¸Šæµ·å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢ (Hospital)
â”œâ”€â”€ å†…ç§‘ (Department, parentId: null)
â”‚   â”œâ”€â”€ å¿ƒè¡€ç®¡å†…ç§‘ (Department, parentId: å†…ç§‘.id)
â”‚   â”‚   â”œâ”€â”€ å¼ ä¸‰ ä¸»ä»»åŒ»å¸ˆ
â”‚   â”‚   â””â”€â”€ æå›› å‰¯ä¸»ä»»åŒ»å¸ˆ
â”‚   â””â”€â”€ æ¶ˆåŒ–å†…ç§‘ (Department, parentId: å†…ç§‘.id)
â”‚       â””â”€â”€ ç‹äº” ä¸»æ²»åŒ»å¸ˆ
â”œâ”€â”€ å¤–ç§‘ (Department, parentId: null)
â”‚   â”œâ”€â”€ éª¨ç§‘
â”‚   â””â”€â”€ æ™®å¤–ç§‘
â””â”€â”€ å„¿ç§‘ (Department, parentId: null)
    â””â”€â”€ èµµå…­ ä¸»ä»»åŒ»å¸ˆ
```

---

## ä¸‰ã€æ•°æ®åº“æ¨¡å‹è®¾è®¡

### 3.1 Department (ç§‘å®¤) æ¨¡å‹

```prisma
model Department {
  id           String   @id @default(uuid())
  name         String                           // ç§‘å®¤åç§°
  code         String?                          // ç§‘å®¤ç¼–ç  (å¦‚ NEIã€WAI)
  hospitalId   String   @map("hospital_id")     // æ‰€å±åŒ»é™¢
  parentId     String?  @map("parent_id")       // çˆ¶ç§‘å®¤ID (æ”¯æŒå±‚çº§)
  
  introduction String?                          // ç§‘å®¤ç®€ä»‹
  location     String?                          // ä½ç½® (å¦‚ é—¨è¯Šæ¥¼3å±‚)
  phone        String?                          // ç§‘å®¤ç”µè¯
  
  sort         Int      @default(0)             // æ’åº
  status       String   @default("active")      // active, inactive
  
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // å…³è”
  hospital     Hospital     @relation(fields: [hospitalId], references: [id])
  parent       Department?  @relation("SubDepartments", fields: [parentId], references: [id])
  children     Department[] @relation("SubDepartments")
  doctors      Doctor[]

  @@map("departments")
}
```

### 3.2 Doctor (åŒ»ç”Ÿ) æ¨¡å‹

```prisma
model Doctor {
  id             String   @id @default(uuid())
  name           String                           // åŒ»ç”Ÿå§“å
  avatar         String?                          // å¤´åƒ
  gender         String?                          // male, female
  
  hospitalId     String   @map("hospital_id")     // æ‰€å±åŒ»é™¢
  departmentId   String   @map("department_id")   // æ‰€å±ç§‘å®¤
  
  title          String                           // èŒç§°: ä¸»ä»»åŒ»å¸ˆã€å‰¯ä¸»ä»»åŒ»å¸ˆã€ä¸»æ²»åŒ»å¸ˆã€ä½é™¢åŒ»å¸ˆ
  level          String?                          // çº§åˆ«: expert(ä¸“å®¶)ã€senior(èµ„æ·±)ã€normal(æ™®é€š)
  
  introduction   String?                          // ä¸ªäººç®€ä»‹
  specialties    String[]                         // æ“…é•¿é¢†åŸŸ (PostgreSQL æ•°ç»„)
  education      String?                          // å­¦å†èƒŒæ™¯
  experience     String?                          // ä»åŒ»å¹´é™
  
  consultCount   Int      @default(0) @map("consult_count")  // å’¨è¯¢/æœåŠ¡é‡
  rating         Float    @default(5.0)           // è¯„åˆ† (5åˆ†åˆ¶)
  reviewCount    Int      @default(0) @map("review_count")   // è¯„ä»·æ•°
  
  phone          String?                          // è”ç³»ç”µè¯ (å†…éƒ¨ä½¿ç”¨)
  status         String   @default("active")      // active, inactive
  
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  // å…³è”
  hospital       Hospital   @relation(fields: [hospitalId], references: [id])
  department     Department @relation(fields: [departmentId], references: [id])

  @@map("doctors")
}
```

### 3.3 Hospital (åŒ»é™¢) æ¨¡å‹æ›´æ–°

```prisma
model Hospital {
  id           String   @id @default(uuid())
  name         String
  level        String                            // ä¸‰ç”²ã€ä¸‰ä¹™ã€äºŒç”²ç­‰
  type         String                            // ç»¼åˆã€ä¸“ç§‘
  address      String
  phone        String?
  
  // åœ°ç†ä½ç½® (æœªæ¥æ”¯æŒé™„è¿‘æœç´¢)
  latitude     Float?
  longitude    Float?
  
  introduction String?                           // åŒ»é™¢ç®€ä»‹
  trafficGuide String?  @map("traffic_guide")    // äº¤é€šæŒ‡å—
  parkingInfo  String?  @map("parking_info")     // åœè½¦ä¿¡æ¯
  coverImage   String?  @map("cover_image")      // å°é¢å›¾
  images       String?                           // æ›´å¤šå›¾ç‰‡ JSON
  
  // ç»Ÿè®¡å­—æ®µ
  doctorCount  Int      @default(0) @map("doctor_count")
  deptCount    Int      @default(0) @map("dept_count")
  
  status       String   @default("active")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // å…³è” - ç§»é™¤ departments JSONï¼Œæ”¹ä¸ºå…³ç³»
  departments  Department[]                      // âœ… æ–°å¢: ç§‘å®¤å…³è”
  doctors      Doctor[]                          // âœ… æ–°å¢: åŒ»ç”Ÿå…³è”
  orders       Order[]
  escorts      EscortHospital[]

  @@map("hospitals")
}
```

### 3.4 å­—æ®µè¯´æ˜

#### åŒ»ç”ŸèŒç§° (title)

| å€¼ | è¯´æ˜ |
|----|------|
| `chief` | ä¸»ä»»åŒ»å¸ˆ |
| `associate_chief` | å‰¯ä¸»ä»»åŒ»å¸ˆ |
| `attending` | ä¸»æ²»åŒ»å¸ˆ |
| `resident` | ä½é™¢åŒ»å¸ˆ |

#### åŒ»ç”Ÿçº§åˆ« (level)

| å€¼ | è¯´æ˜ | ç”¨é€” |
|----|------|------|
| `expert` | ä¸“å®¶ | å¯èƒ½æœ‰é¢å¤–è´¹ç”¨ |
| `senior` | èµ„æ·± | æ™®é€š |
| `normal` | æ™®é€š | æ™®é€š |

#### ç§‘å®¤çŠ¶æ€ (status)

| å€¼ | è¯´æ˜ |
|----|------|
| `active` | æ­£å¸¸ |
| `inactive` | åœè¯Š |

---

## å››ã€API æ¥å£è®¾è®¡

### 4.1 ç§‘å®¤æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| `/api/hospitals/:hospitalId/departments` | GET | è·å–åŒ»é™¢ç§‘å®¤æ ‘ | å…¬å¼€ |
| `/api/departments` | GET | è·å–æ‰€æœ‰ç§‘å®¤ (ç®¡ç†ç«¯) | Admin |
| `/api/departments/:id` | GET | è·å–ç§‘å®¤è¯¦æƒ… | å…¬å¼€ |
| `/api/departments` | POST | åˆ›å»ºç§‘å®¤ | Admin |
| `/api/departments/:id` | PATCH | æ›´æ–°ç§‘å®¤ | Admin |
| `/api/departments/:id` | DELETE | åˆ é™¤ç§‘å®¤ | Admin |

#### è·å–åŒ»é™¢ç§‘å®¤æ ‘ (å°ç¨‹åºç”¨)

```
GET /api/hospitals/:hospitalId/departments

Response:
{
  "code": 0,
  "data": [
    {
      "id": "uuid",
      "name": "å†…ç§‘",
      "children": [
        { "id": "uuid", "name": "å¿ƒè¡€ç®¡å†…ç§‘", "doctorCount": 5 },
        { "id": "uuid", "name": "æ¶ˆåŒ–å†…ç§‘", "doctorCount": 3 }
      ]
    },
    {
      "id": "uuid",
      "name": "å¤–ç§‘",
      "children": [...]
    }
  ]
}
```

### 4.2 åŒ»ç”Ÿæ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| `/api/doctors` | GET | è·å–åŒ»ç”Ÿåˆ—è¡¨ | å…¬å¼€ |
| `/api/doctors/:id` | GET | è·å–åŒ»ç”Ÿè¯¦æƒ… | å…¬å¼€ |
| `/api/doctors/search` | GET | æœç´¢åŒ»ç”Ÿ | å…¬å¼€ |
| `/api/doctors` | POST | åˆ›å»ºåŒ»ç”Ÿ | Admin |
| `/api/doctors/:id` | PATCH | æ›´æ–°åŒ»ç”Ÿ | Admin |
| `/api/doctors/:id` | DELETE | åˆ é™¤åŒ»ç”Ÿ | Admin |
| `/api/admin/doctors` | GET | ç®¡ç†ç«¯åŒ»ç”Ÿåˆ—è¡¨ | Admin |

#### è·å–åŒ»ç”Ÿåˆ—è¡¨ (å°ç¨‹åºç”¨)

```
GET /api/doctors?hospitalId=xxx&departmentId=xxx&keyword=å¿ƒè„&page=1&pageSize=10

Query Parameters:
- hospitalId: æŒ‰åŒ»é™¢ç­›é€‰
- departmentId: æŒ‰ç§‘å®¤ç­›é€‰  
- keyword: æœç´¢å…³é”®è¯ (åŒ¹é…å§“åã€æ“…é•¿)
- title: æŒ‰èŒç§°ç­›é€‰
- sort: æ’åºæ–¹å¼ (rating, consultCount)

Response:
{
  "code": 0,
  "data": {
    "data": [
      {
        "id": "uuid",
        "name": "å¼ ä¸‰",
        "avatar": "https://...",
        "title": "ä¸»ä»»åŒ»å¸ˆ",
        "hospital": { "id": "uuid", "name": "ä¸Šæµ·å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢" },
        "department": { "id": "uuid", "name": "å¿ƒè¡€ç®¡å†…ç§‘" },
        "specialties": ["å† å¿ƒç—…", "å¿ƒå¾‹å¤±å¸¸", "å¿ƒåŠ›è¡°ç«­"],
        "rating": 4.9,
        "consultCount": 1256
      }
    ],
    "total": 100,
    "page": 1,
    "pageSize": 10
  }
}
```

#### è·å–åŒ»ç”Ÿè¯¦æƒ…

```
GET /api/doctors/:id

Response:
{
  "code": 0,
  "data": {
    "id": "uuid",
    "name": "å¼ ä¸‰",
    "avatar": "https://...",
    "gender": "male",
    "title": "ä¸»ä»»åŒ»å¸ˆ",
    "level": "expert",
    "hospital": {
      "id": "uuid",
      "name": "ä¸Šæµ·å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢",
      "address": "ä¸Šæµ·å¸‚æ¾æ±ŸåŒº..."
    },
    "department": {
      "id": "uuid", 
      "name": "å¿ƒè¡€ç®¡å†…ç§‘",
      "parent": { "id": "uuid", "name": "å†…ç§‘" }
    },
    "introduction": "å¼ ä¸‰åŒ»ç”Ÿä»äº‹å¿ƒè¡€ç®¡å†…ç§‘ä¸´åºŠå·¥ä½œ30ä½™å¹´...",
    "specialties": ["å† å¿ƒç—…", "å¿ƒå¾‹å¤±å¸¸", "å¿ƒåŠ›è¡°ç«­"],
    "education": "ä¸Šæµ·äº¤é€šå¤§å­¦åŒ»å­¦é™¢åšå£«",
    "experience": "30å¹´",
    "rating": 4.9,
    "consultCount": 1256,
    "reviewCount": 328
  }
}
```

---

## äº”ã€ç®¡ç†åå°è®¾è®¡

### 5.1 èœå•ç»“æ„

```
åŒ»ç–—èµ„æº
â”œâ”€â”€ åŒ»é™¢ç®¡ç†        /hospitals
â”‚   â””â”€â”€ åŒ»é™¢è¯¦æƒ…    /hospitals/:id
â”œâ”€â”€ ç§‘å®¤ç®¡ç†        /departments
â”‚   â””â”€â”€ ç§‘å®¤è¯¦æƒ…    /departments/:id  
â””â”€â”€ åŒ»ç”Ÿç®¡ç†        /doctors
    â””â”€â”€ åŒ»ç”Ÿè¯¦æƒ…    /doctors/:id
```

### 5.2 åŒ»é™¢ç®¡ç†é¡µé¢

**åŠŸèƒ½:**
- åŒ»é™¢åˆ—è¡¨ (æ”¯æŒæœç´¢ã€æŒ‰ç­‰çº§ç­›é€‰)
- æ–°å¢/ç¼–è¾‘åŒ»é™¢
- æŸ¥çœ‹åŒ»é™¢ä¸‹çš„ç§‘å®¤å’ŒåŒ»ç”Ÿ

**åŒ»é™¢è¯¦æƒ…é¡µ Tabs:**
1. åŸºæœ¬ä¿¡æ¯
2. ç§‘å®¤ç®¡ç† (æ ‘å½¢ç»“æ„)
3. åŒ»ç”Ÿåˆ—è¡¨
4. ç»Ÿè®¡æ•°æ®

### 5.3 ç§‘å®¤ç®¡ç†é¡µé¢

**åŠŸèƒ½:**
- ç§‘å®¤åˆ—è¡¨ (æ ‘å½¢å±•ç¤º)
- çº§è”é€‰æ‹©: åŒ»é™¢ â†’ ä¸€çº§ç§‘å®¤ â†’ äºŒçº§ç§‘å®¤
- æ”¯æŒæ‹–æ‹½æ’åº
- æ‰¹é‡æ“ä½œ (å¯ç”¨/åœç”¨)

**è¡¨æ ¼å­—æ®µ:**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| ç§‘å®¤åç§° | æ”¯æŒå±•å¼€å­ç§‘å®¤ |
| æ‰€å±åŒ»é™¢ | - |
| ä½ç½® | å¦‚ "é—¨è¯Šæ¥¼3å±‚" |
| åŒ»ç”Ÿæ•°é‡ | ç»Ÿè®¡ |
| çŠ¶æ€ | active/inactive |
| æ“ä½œ | ç¼–è¾‘ã€æ·»åŠ å­ç§‘å®¤ã€åˆ é™¤ |

### 5.4 åŒ»ç”Ÿç®¡ç†é¡µé¢

**åŠŸèƒ½:**
- åŒ»ç”Ÿåˆ—è¡¨ (æ”¯æŒå¤šæ¡ä»¶ç­›é€‰)
- æ–°å¢/ç¼–è¾‘åŒ»ç”Ÿ
- çº§è”é€‰æ‹©: åŒ»é™¢ â†’ ç§‘å®¤

**è¡¨æ ¼å­—æ®µ:**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| å¤´åƒ | - |
| å§“å | - |
| èŒç§° | ä¸»ä»»åŒ»å¸ˆç­‰ |
| æ‰€å±åŒ»é™¢ | - |
| æ‰€å±ç§‘å®¤ | - |
| æ“…é•¿ | tags å±•ç¤º |
| è¯„åˆ† | æ˜Ÿçº§ |
| æœåŠ¡é‡ | - |
| çŠ¶æ€ | - |
| æ“ä½œ | ç¼–è¾‘ã€åˆ é™¤ |

**æ–°å¢/ç¼–è¾‘åŒ»ç”Ÿè¡¨å•:**

```
åŸºæœ¬ä¿¡æ¯:
â”œâ”€â”€ å§“å (å¿…å¡«)
â”œâ”€â”€ å¤´åƒ (ä¸Šä¼ )
â”œâ”€â”€ æ€§åˆ« (é€‰æ‹©)
â”œâ”€â”€ èŒç§° (é€‰æ‹©: ä¸»ä»»åŒ»å¸ˆ/å‰¯ä¸»ä»»åŒ»å¸ˆ/ä¸»æ²»åŒ»å¸ˆ/ä½é™¢åŒ»å¸ˆ)
â””â”€â”€ çº§åˆ« (é€‰æ‹©: ä¸“å®¶/èµ„æ·±/æ™®é€š)

æ‰§ä¸šä¿¡æ¯:
â”œâ”€â”€ æ‰€å±åŒ»é™¢ (é€‰æ‹©ï¼Œå¿…å¡«)
â”œâ”€â”€ æ‰€å±ç§‘å®¤ (çº§è”é€‰æ‹©ï¼Œä¾èµ–åŒ»é™¢)
â”œâ”€â”€ æ“…é•¿é¢†åŸŸ (å¤šé€‰æ ‡ç­¾æˆ–è¾“å…¥)
â”œâ”€â”€ å­¦å†èƒŒæ™¯ (è¾“å…¥)
â””â”€â”€ ä»åŒ»å¹´é™ (è¾“å…¥)

ä¸ªäººç®€ä»‹:
â””â”€â”€ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
```

---

## å…­ã€å°ç¨‹åºé¡µé¢è®¾è®¡

### 6.1 åŒ»ç”Ÿåˆ—è¡¨é¡µ (`/pages/doctor/list`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” æœç´¢åŒ»ç”Ÿã€ç–¾ç—…                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç­›é€‰: [åŒ»é™¢â–¼] [ç§‘å®¤â–¼] [èŒç§°â–¼]       â”‚
â”‚ æ’åº: [ç»¼åˆ] [å¥½è¯„ä¼˜å…ˆ] [æœåŠ¡æœ€å¤š]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ‘¤ å¼ ä¸‰ ä¸»ä»»åŒ»å¸ˆ              â”‚  â”‚
â”‚ â”‚ ğŸ¥ ä¸Šæµ·å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢Â·å¿ƒè¡€ç®¡å†…ç§‘â”‚  â”‚
â”‚ â”‚ ğŸ’¼ æ“…é•¿: å† å¿ƒç—…ã€å¿ƒå¾‹å¤±å¸¸      â”‚  â”‚
â”‚ â”‚ â­ 4.9 | æœåŠ¡ 1256äºº          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ‘¤ æå›› å‰¯ä¸»ä»»åŒ»å¸ˆ            â”‚  â”‚
â”‚ â”‚ ğŸ¥ åå±±åŒ»é™¢Â·ç¥ç»å†…ç§‘          â”‚  â”‚
â”‚ â”‚ ğŸ’¼ æ“…é•¿: å¤´ç—›ã€ç™«ç—«           â”‚  â”‚
â”‚ â”‚ â­ 4.8 | æœåŠ¡ 892äºº           â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 åŒ»ç”Ÿè¯¦æƒ…é¡µ (`/pages/doctor/detail`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”                           â”‚
â”‚ â”‚ ğŸ‘¤  â”‚ å¼ ä¸‰ ä¸»ä»»åŒ»å¸ˆ              â”‚
â”‚ â”‚     â”‚ ä¸Šæµ·å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ å¿ƒè¡€ç®¡å†…ç§‘                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â­ 4.9åˆ† | æœåŠ¡ 1256äºº | å¥½è¯„ 328æ¡ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“…é•¿                               â”‚
â”‚ [å† å¿ƒç—…] [å¿ƒå¾‹å¤±å¸¸] [å¿ƒåŠ›è¡°ç«­]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸ªäººç®€ä»‹                           â”‚
â”‚ å¼ ä¸‰åŒ»ç”Ÿä»äº‹å¿ƒè¡€ç®¡å†…ç§‘ä¸´åºŠå·¥ä½œ30ä½™  â”‚
â”‚ å¹´ï¼Œåœ¨å† å¿ƒç—…ã€å¿ƒå¾‹å¤±å¸¸ç­‰ç–¾ç—…çš„è¯Šæ²»  â”‚
â”‚ æ–¹é¢å…·æœ‰ä¸°å¯Œç»éªŒ...                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å­¦å†èƒŒæ™¯                           â”‚
â”‚ ä¸Šæµ·äº¤é€šå¤§å­¦åŒ»å­¦é™¢åšå£«             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [ğŸ“… é¢„çº¦æŒ‚å·]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ä¸‹å•æµç¨‹è”åŠ¨

```
é¢„çº¦ä¸‹å•é¡µé¢

1. é€‰æ‹©æœåŠ¡ â†’ å…¨ç¨‹é™ªè¯Š âœ“
               â†“
2. é€‰æ‹©åŒ»é™¢ â†’ [ä¸‹æ‹‰é€‰æ‹©åŒ»é™¢]
               â†“ (è§¦å‘åŠ è½½ç§‘å®¤)
3. é€‰æ‹©ç§‘å®¤ â†’ [çº§è”é€‰æ‹©ç§‘å®¤]
               â†“ (è§¦å‘åŠ è½½åŒ»ç”Ÿ)
4. é€‰æ‹©åŒ»ç”Ÿ â†’ [å¯é€‰ï¼Œæ˜¾ç¤ºè¯¥ç§‘å®¤åŒ»ç”Ÿåˆ—è¡¨]
               â†“
5. é€‰æ‹©å°±è¯Šäºº
               â†“
6. é€‰æ‹©æ—¥æœŸæ—¶é—´
               â†“
7. æäº¤è®¢å•
```

---

## ä¸ƒã€å¼€å‘æ‰§è¡Œè®¡åˆ’

### 7.1 Phase 1: æ•°æ®åº“æ”¹é€  (Day 1)

- [ ] æ›´æ–° `schema.prisma`ï¼Œæ·»åŠ  Departmentã€Doctor æ¨¡å‹
- [ ] ä¿®æ”¹ Hospital æ¨¡å‹ï¼Œç§»é™¤ `departments` JSON å­—æ®µ
- [ ] è¿è¡Œ `prisma migrate dev`
- [ ] æ›´æ–°ç§å­æ•°æ® `seed.ts`

### 7.2 Phase 2: åç«¯ API (Day 1-2)

- [ ] åˆ›å»º `DepartmentsModule`
  - [ ] `GET /api/hospitals/:hospitalId/departments` (ç§‘å®¤æ ‘)
  - [ ] CRUD æ¥å£
- [ ] åˆ›å»º `DoctorsModule`
  - [ ] `GET /api/doctors` (åˆ—è¡¨ï¼Œæ”¯æŒç­›é€‰)
  - [ ] `GET /api/doctors/:id` (è¯¦æƒ…)
  - [ ] `GET /api/doctors/search` (æœç´¢)
  - [ ] CRUD æ¥å£
- [ ] æ›´æ–° `HospitalsModule`
  - [ ] è¿”å›æ•°æ®åŒ…å« `doctorCount`, `deptCount`

### 7.3 Phase 3: ç®¡ç†åå° (Day 2-3)

- [ ] ç§‘å®¤ç®¡ç†é¡µé¢
  - [ ] æ ‘å½¢è¡¨æ ¼å±•ç¤º
  - [ ] æ–°å¢/ç¼–è¾‘ç§‘å®¤å¼¹çª—
  - [ ] çº§è”é€‰æ‹©å™¨ (åŒ»é™¢ â†’ çˆ¶ç§‘å®¤)
- [ ] åŒ»ç”Ÿç®¡ç†é¡µé¢
  - [ ] åˆ—è¡¨é¡µ + ç­›é€‰
  - [ ] æ–°å¢/ç¼–è¾‘åŒ»ç”Ÿè¡¨å•
  - [ ] çº§è”é€‰æ‹©å™¨ (åŒ»é™¢ â†’ ç§‘å®¤)
- [ ] åŒ»é™¢è¯¦æƒ…é¡µå¢å¼º
  - [ ] ç§‘å®¤ Tab
  - [ ] åŒ»ç”Ÿ Tab

### 7.4 Phase 4: å°ç¨‹åº (Day 3)

- [ ] åŒ»ç”Ÿåˆ—è¡¨é¡µ
- [ ] åŒ»ç”Ÿè¯¦æƒ…é¡µ
- [ ] ä¸‹å•é¡µç§‘å®¤/åŒ»ç”Ÿè”åŠ¨

---

## å…«ã€æœªæ¥æ‰©å±•é¢„ç•™

### 8.1 åŒ»ç”Ÿæ’ç­ (DoctorSchedule)

```prisma
// æœªæ¥æ·»åŠ 
model DoctorSchedule {
  id         String   @id @default(uuid())
  doctorId   String   @map("doctor_id")
  weekday    Int      // 1-7 (å‘¨ä¸€åˆ°å‘¨æ—¥)
  period     String   // morning, afternoon, evening
  maxCount   Int      @default(20)  // æœ€å¤§æŒ‚å·æ•°
  status     String   @default("active")
  
  doctor     Doctor   @relation(fields: [doctorId], references: [id])
  
  @@map("doctor_schedules")
}
```

### 8.2 ç»Ÿä¸€æ ‡ç­¾ç³»ç»Ÿ (Tag)

```prisma
// æœªæ¥æ·»åŠ 
model Tag {
  id         String   @id @default(uuid())
  name       String
  type       String   // hospital, doctor, escort, service
  color      String?
  sort       Int      @default(0)
  
  @@map("tags")
}
```

### 8.3 åŒ»ç”Ÿè¯„ä»· (DoctorReview)

```prisma
// æœªæ¥æ·»åŠ 
model DoctorReview {
  id         String   @id @default(uuid())
  doctorId   String   @map("doctor_id")
  userId     String   @map("user_id")
  orderId    String   @map("order_id")
  rating     Int      // 1-5
  content    String?
  isAnonymous Boolean @default(false) @map("is_anonymous")
  status     String   @default("pending") // pending, approved, rejected
  
  createdAt  DateTime @default(now()) @map("created_at")
  
  @@map("doctor_reviews")
}
```

---

## ä¹ã€æµ‹è¯•æ•°æ®è§„åˆ’

### 9.1 ç§‘å®¤æµ‹è¯•æ•°æ®

```typescript
const departmentsData = [
  // ä¸€çº§ç§‘å®¤
  { name: 'å†…ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'å¤–ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'å„¿ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'å¦‡äº§ç§‘', hospitalId: 'åŒ»é™¢1' },
  
  // äºŒçº§ç§‘å®¤ (å†…ç§‘ä¸‹)
  { name: 'å¿ƒè¡€ç®¡å†…ç§‘', parentId: 'å†…ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'æ¶ˆåŒ–å†…ç§‘', parentId: 'å†…ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'ç¥ç»å†…ç§‘', parentId: 'å†…ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'å‘¼å¸å†…ç§‘', parentId: 'å†…ç§‘', hospitalId: 'åŒ»é™¢1' },
  
  // äºŒçº§ç§‘å®¤ (å¤–ç§‘ä¸‹)
  { name: 'éª¨ç§‘', parentId: 'å¤–ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'æ™®å¤–ç§‘', parentId: 'å¤–ç§‘', hospitalId: 'åŒ»é™¢1' },
  { name: 'ç¥ç»å¤–ç§‘', parentId: 'å¤–ç§‘', hospitalId: 'åŒ»é™¢1' },
]
```

### 9.2 åŒ»ç”Ÿæµ‹è¯•æ•°æ®

```typescript
const doctorsData = [
  {
    name: 'å¼ æ˜å',
    title: 'chief',
    hospitalId: 'åŒ»é™¢1',
    departmentId: 'å¿ƒè¡€ç®¡å†…ç§‘',
    specialties: ['å† å¿ƒç—…', 'å¿ƒå¾‹å¤±å¸¸', 'å¿ƒåŠ›è¡°ç«­', 'é«˜è¡€å‹'],
    introduction: 'ä»äº‹å¿ƒè¡€ç®¡å†…ç§‘ä¸´åºŠå·¥ä½œ30ä½™å¹´ï¼Œåœ¨å† å¿ƒç—…ä»‹å…¥æ²»ç–—æ–¹é¢æœ‰ä¸°å¯Œç»éªŒ',
    education: 'ä¸Šæµ·äº¤é€šå¤§å­¦åŒ»å­¦é™¢åšå£«',
    experience: '30å¹´',
    rating: 4.9,
    consultCount: 1256,
  },
  {
    name: 'æç§€è‹±',
    title: 'associate_chief',
    hospitalId: 'åŒ»é™¢1',
    departmentId: 'æ¶ˆåŒ–å†…ç§‘',
    specialties: ['èƒƒç‚', 'è‚ ç‚', 'æ¶ˆåŒ–æ€§æºƒç–¡', 'è‚ç—…'],
    introduction: 'æ“…é•¿æ¶ˆåŒ–ç³»ç»Ÿç–¾ç—…çš„è¯Šæ²»ï¼Œå°¤å…¶åœ¨èƒƒè‚ é•œæ£€æŸ¥æ–¹é¢ç»éªŒä¸°å¯Œ',
    education: 'å¤æ—¦å¤§å­¦åŒ»å­¦é™¢ç¡•å£«',
    experience: '20å¹´',
    rating: 4.8,
    consultCount: 892,
  },
  // ... æ›´å¤šåŒ»ç”Ÿ
]
```

---

## åã€é£é™©ä¸æ³¨æ„äº‹é¡¹

### 10.1 æ•°æ®è¿ç§»é£é™©

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|---------|
| Hospital.departments JSON æ•°æ®ä¸¢å¤± | åŸæœ‰ç§‘å®¤æ•°æ®éœ€è¦è¿ç§» | ç¼–å†™è¿ç§»è„šæœ¬ï¼Œå°† JSON è½¬æ¢ä¸º Department è®°å½• |
| ç°æœ‰è®¢å•å…³è”é—®é¢˜ | Order.departmentName æ˜¯å­—ç¬¦ä¸² | ä¿ç•™å­—ç¬¦ä¸²å­—æ®µï¼Œæ–°å¢ departmentId å¯é€‰å…³è” |

### 10.2 å…¼å®¹æ€§è€ƒè™‘

1. **ç°æœ‰ API ä¿æŒå…¼å®¹**ï¼š`GET /api/hospitals` è¿”å›æ ¼å¼ä¸å˜
2. **æ–°å­—æ®µå¯é€‰**ï¼šOrder.departmentId è®¾ä¸ºå¯é€‰ï¼Œä¸å½±å“ç°æœ‰è®¢å•
3. **æ¸è¿›å¼è¿ç§»**ï¼šå…ˆå®Œæˆæ•°æ®åº“ï¼Œå†é€æ­¥æ›´æ–°å‰ç«¯

### 10.3 æ€§èƒ½è€ƒè™‘

1. **ç§‘å®¤æ ‘æŸ¥è¯¢**ï¼šä½¿ç”¨é€’å½’ CTE æˆ–åº”ç”¨å±‚æ„å»ºï¼Œè€ƒè™‘ç¼“å­˜
2. **åŒ»ç”Ÿæœç´¢**ï¼šspecialties æ•°ç»„å­—æ®µéœ€è¦ GIN ç´¢å¼•
3. **ç»Ÿè®¡å­—æ®µ**ï¼šdoctorCount, deptCount ä½¿ç”¨è§¦å‘å™¨æˆ–å®šæ—¶ä»»åŠ¡æ›´æ–°

---

## é™„å½•

### A. ç›¸å…³æ–‡ä»¶æ¸…å•

```
éœ€è¦ä¿®æ”¹/æ–°å¢çš„æ–‡ä»¶:

åç«¯ (server/):
â”œâ”€â”€ prisma/schema.prisma           # æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ prisma/seed.ts                 # æµ‹è¯•æ•°æ®
â”œâ”€â”€ src/modules/departments/       # ç§‘å®¤æ¨¡å— (æ–°å¢)
â”‚   â”œâ”€â”€ departments.module.ts
â”‚   â”œâ”€â”€ departments.controller.ts
â”‚   â”œâ”€â”€ departments.service.ts
â”‚   â””â”€â”€ dto/
â”œâ”€â”€ src/modules/doctors/           # åŒ»ç”Ÿæ¨¡å— (æ–°å¢)
â”‚   â”œâ”€â”€ doctors.module.ts
â”‚   â”œâ”€â”€ doctors.controller.ts
â”‚   â”œâ”€â”€ doctors.service.ts
â”‚   â””â”€â”€ dto/
â””â”€â”€ src/app.module.ts              # æ³¨å†Œæ–°æ¨¡å—

ç®¡ç†åå° (src/):
â”œâ”€â”€ features/medical/departments/  # ç§‘å®¤ç®¡ç†é¡µé¢
â”œâ”€â”€ features/medical/doctors/      # åŒ»ç”Ÿç®¡ç†é¡µé¢ (å·²æœ‰éª¨æ¶)
â””â”€â”€ routes/_authenticated/         # è·¯ç”±é…ç½®

å°ç¨‹åº (miniapp/):
â”œâ”€â”€ pages/doctor/list              # åŒ»ç”Ÿåˆ—è¡¨é¡µ (æ–°å¢)
â”œâ”€â”€ pages/doctor/detail            # åŒ»ç”Ÿè¯¦æƒ…é¡µ (æ–°å¢)
â””â”€â”€ services/api.ts                # API æ¥å£
```

### B. å‚è€ƒé“¾æ¥

- [Prisma è‡ªå…³è”](https://www.prisma.io/docs/concepts/components/prisma-schema/relations/self-relations)
- [PostgreSQL æ•°ç»„å­—æ®µ](https://www.prisma.io/docs/concepts/components/prisma-schema/data-model#native-database-types)
- [TanStack Table æ ‘å½¢è¡¨æ ¼](https://tanstack.com/table/latest/docs/guide/expanding)

