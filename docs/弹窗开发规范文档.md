# 弹窗开发规范文档

本文档定义了后台管理系统弹窗组件的统一开发规范，确保所有弹窗在布局、交互和代码结构上保持一致。

## 目录

- [弹窗类型选择](#弹窗类型选择)
- [Dialog vs Sheet 决策指南](#dialog-vs-sheet-决策指南)
- [核心依赖](#核心依赖)
- [表单弹窗规范（Dialog）](#表单弹窗规范dialog)
- [抽屉弹窗规范（Sheet）](#抽屉弹窗规范sheet)
- [多板块弹窗规范](#多板块弹窗规范)
- [确认弹窗规范](#确认弹窗规范)
- [表单验证](#表单验证)
- [输入组件](#输入组件)
- [文件结构](#文件结构)
- [完整示例](#完整示例)

---

## 弹窗类型选择

### 组件类型总览

| 类型 | 用途 | 组件 | 宽度 |
|------|------|------|------|
| **简单表单弹窗** | 邀请/快捷操作（≤5字段） | `Dialog` | `sm:max-w-md` |
| **标准表单弹窗** | 新建/编辑实体（6-15字段） | `Dialog` | `sm:max-w-lg` |
| **复杂表单抽屉** | 多板块配置/详情（>15字段） | `Sheet` + `Tabs` | 侧边全高 |
| **确认弹窗** | 删除/危险操作确认 | `ConfirmDialog` | 默认 |
| **详情抽屉** | 查看详情/只读 | `Sheet` | 侧边全高 |
| **配置抽屉** | 全局/模块级配置 | `Sheet` | 侧边全高 |

---

## Dialog vs Sheet 决策指南

### Dialog（模态窗）适用场景

| 场景 | 说明 | 示例 |
|------|------|------|
| **阻断式操作** | 必须完成当前操作才能继续 | 删除确认、提交审核 |
| **创建实体** | 新建一条独立记录 | 新建用户、新建活动 |
| **简单编辑** | 字段少，快速完成 | 修改名称、调整状态 |
| **表单提交** | 有明确的提交动作 | 邀请用户、发送通知 |
| **字段数量** | ≤15 个字段 | - |

**特点**：聚焦、阻断、强制完成

### Sheet（抽屉）适用场景

| 场景 | 说明 | 示例 |
|------|------|------|
| **配置/设置** | 全局或模块级配置 | 分销配置、主题设置 |
| **详情查看** | 只读或部分可编辑 | 订单详情、用户资料 |
| **复杂表单** | 多板块、多步骤 | 服务编辑、商品编辑 |
| **需要参考** | 操作时需看主页面 | 批量操作、数据对比 |
| **辅助面板** | 不完全阻断主流程 | 筛选器、帮助面板 |
| **字段数量** | >15 个字段或多板块 | - |

**特点**：宽敞、可参考、渐进式

### 决策流程

```
开始
  │
  ├─ 是否为确认/警告操作？ ──是──→ Dialog（ConfirmDialog）
  │
  ├─ 是否为配置/设置类？ ──是──→ Sheet（抽屉）
  │
  ├─ 是否需要参考主页面？ ──是──→ Sheet（抽屉）
  │
  ├─ 字段数量 > 15 或多板块？ ──是──→ Sheet + Tabs（抽屉+分页）
  │
  ├─ 是否为详情查看？ ──是──→ Sheet（抽屉）
  │
  └─ 其他（创建/编辑/提交） ──→ Dialog（模态窗）
```

### 具体业务场景映射

| 业务场景 | 推荐类型 | 理由 |
|---------|---------|------|
| 新建/编辑员工 | Dialog | 字段适中，聚焦操作 |
| 新建/编辑活动 | Dialog | 单一实体，需要完成 |
| 删除确认 | Dialog (Confirm) | 阻断式，强制确认 |
| 分销配置 | Sheet + Tabs | 多板块配置 |
| 服务详情编辑 | Sheet + Tabs | 字段多，需要分组 |
| 订单详情 | Sheet | 查看为主，可部分操作 |
| 主题设置 | Sheet | 配置类，可随时调整 |
| 筛选面板 | Sheet | 辅助功能，不阻断 |
| 邀请用户 | Dialog | 简单表单，明确提交 |
| 权限设置 | Dialog / Sheet | 看复杂度，简单用 Dialog |

---

## 核心依赖

```tsx
// 表单库
import { z } from 'zod'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'

// 表单组件
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form'

// Dialog 弹窗组件
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
  DialogClose,
} from '@/components/ui/dialog'

// Sheet 抽屉组件
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetFooter,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from '@/components/ui/sheet'

// 分页组件（多板块时使用）
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'

// 输入组件
import { Input } from '@/components/ui/input'
import { Textarea } from '@/components/ui/textarea'
import { Switch } from '@/components/ui/switch'
import { PasswordInput } from '@/components/password-input'
import { SelectDropdown } from '@/components/select-dropdown'

// 确认弹窗
import { ConfirmDialog } from '@/components/confirm-dialog'
```

---

## 表单弹窗规范（Dialog）

### 标准表单弹窗（新建/编辑）

适用于字段较多的实体编辑场景。

#### 布局特点

- **弹窗宽度**：`sm:max-w-lg`
- **表单布局**：水平布局 `grid grid-cols-6`
- **标签位置**：右对齐 `col-span-2 text-end`
- **输入框位置**：`col-span-4`
- **内容区域**：固定高度滚动 `h-[26.25rem] overflow-y-auto`
- **提交方式**：form id 关联 Footer 按钮

#### 结构模板

```tsx
<Dialog
  open={open}
  onOpenChange={(state) => {
    form.reset()
    onOpenChange(state)
  }}
>
  <DialogContent className='sm:max-w-lg'>
    <DialogHeader className='text-start'>
      <DialogTitle>{isEdit ? '编辑项目' : '新建项目'}</DialogTitle>
      <DialogDescription>
        {isEdit ? '在此处更新项目信息。' : '在此处创建新项目。'}
        完成后点击保存。
      </DialogDescription>
    </DialogHeader>

    {/* 固定高度滚动区域 */}
    <div className='h-[26.25rem] w-[calc(100%+0.75rem)] overflow-y-auto py-1 pe-3'>
      <Form {...form}>
        <form
          id='entity-form'
          onSubmit={form.handleSubmit(onSubmit)}
          className='space-y-4 px-0.5'
        >
          {/* 表单字段 */}
        </form>
      </Form>
    </div>

    <DialogFooter>
      <Button type='submit' form='entity-form'>
        保存
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

#### 字段布局模板

```tsx
<FormField
  control={form.control}
  name='fieldName'
  render={({ field }) => (
    <FormItem className='grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1'>
      <FormLabel className='col-span-2 text-end'>字段标签</FormLabel>
      <FormControl>
        <Input
          placeholder='请输入...'
          className='col-span-4'
          autoComplete='off'
          {...field}
        />
      </FormControl>
      <FormMessage className='col-span-4 col-start-3' />
    </FormItem>
  )}
/>
```

---

### 简单表单弹窗（邀请/快捷操作）

适用于字段较少的快捷操作场景。

#### 布局特点

- **弹窗宽度**：`sm:max-w-md`
- **表单布局**：垂直布局（标签在上，输入框在下）
- **表单间距**：`space-y-4`
- **Footer**：包含取消按钮 + 提交按钮

#### 结构模板

```tsx
<Dialog
  open={open}
  onOpenChange={(state) => {
    form.reset()
    onOpenChange(state)
  }}
>
  <DialogContent className='sm:max-w-md'>
    <DialogHeader className='text-start'>
      <DialogTitle className='flex items-center gap-2'>
        <IconComponent /> 操作标题
      </DialogTitle>
      <DialogDescription>
        操作描述文字，说明用途和注意事项。
      </DialogDescription>
    </DialogHeader>

    <Form {...form}>
      <form
        id='action-form'
        onSubmit={form.handleSubmit(onSubmit)}
        className='space-y-4'
      >
        {/* 表单字段 */}
      </form>
    </Form>

    <DialogFooter className='gap-y-2'>
      <DialogClose asChild>
        <Button variant='outline'>取消</Button>
      </DialogClose>
      <Button type='submit' form='action-form'>
        确认操作
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

#### 字段布局模板

```tsx
<FormField
  control={form.control}
  name='fieldName'
  render={({ field }) => (
    <FormItem>
      <FormLabel>字段标签</FormLabel>
      <FormControl>
        <Input placeholder='请输入...' {...field} />
      </FormControl>
      <FormMessage />
    </FormItem>
  )}
/>
```

---

## 抽屉弹窗规范（Sheet）

### 基础抽屉结构

适用于配置、设置、详情查看等场景。

```tsx
<Sheet open={open} onOpenChange={onOpenChange}>
  <SheetContent className='flex flex-col'>
    <SheetHeader className='text-start'>
      <SheetTitle>抽屉标题</SheetTitle>
      <SheetDescription>
        抽屉描述文字，说明用途和注意事项。
      </SheetDescription>
    </SheetHeader>

    {/* 滚动内容区 */}
    <div className='flex-1 space-y-6 overflow-y-auto px-4'>
      <SectionA />
      <SectionB />
      <SectionC />
    </div>

    <SheetFooter className='gap-2'>
      <Button variant='outline' onClick={() => onOpenChange(false)}>
        取消
      </Button>
      <Button onClick={handleSave}>
        保存
      </Button>
    </SheetFooter>
  </SheetContent>
</Sheet>
```

### 抽屉内分组标题

```tsx
function SectionTitle({ title }: { title: string }) {
  return (
    <div className='text-muted-foreground mb-2 text-sm font-semibold'>
      {title}
    </div>
  )
}

// 使用
<div>
  <SectionTitle title='基础设置' />
  {/* 该分组的内容 */}
</div>
```

---

## 多板块弹窗规范

### Tabs + Dialog 模式

适用于字段较多但仍需要聚焦完成的场景。

```tsx
<Dialog open={open} onOpenChange={onOpenChange}>
  <DialogContent className='max-w-3xl max-h-[90vh] overflow-y-auto'>
    <DialogHeader>
      <DialogTitle>配置标题</DialogTitle>
      <DialogDescription>配置描述文字</DialogDescription>
    </DialogHeader>

    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className='space-y-6'>
        <Tabs defaultValue='tab1' className='w-full'>
          <TabsList className='grid w-full grid-cols-3'>
            <TabsTrigger value='tab1'>板块1</TabsTrigger>
            <TabsTrigger value='tab2'>板块2</TabsTrigger>
            <TabsTrigger value='tab3'>板块3</TabsTrigger>
          </TabsList>

          <TabsContent value='tab1' className='space-y-4 mt-4'>
            <Card>
              <CardHeader>
                <CardTitle className='text-base'>分组标题</CardTitle>
                <CardDescription>分组描述</CardDescription>
              </CardHeader>
              <CardContent className='grid gap-4 md:grid-cols-2'>
                {/* 表单字段 */}
              </CardContent>
            </Card>
          </TabsContent>

          <TabsContent value='tab2' className='space-y-4 mt-4'>
            {/* 板块2内容 */}
          </TabsContent>

          <TabsContent value='tab3' className='space-y-4 mt-4'>
            {/* 板块3内容 */}
          </TabsContent>
        </Tabs>

        <DialogFooter>
          <Button type='button' variant='outline' onClick={() => onOpenChange(false)}>
            取消
          </Button>
          <Button type='submit' disabled={isPending}>
            {isPending && <Loader2 className='mr-2 h-4 w-4 animate-spin' />}
            保存
          </Button>
        </DialogFooter>
      </form>
    </Form>
  </DialogContent>
</Dialog>
```

### Tabs + Sheet 模式

适用于复杂配置、需要大量空间的场景。

```tsx
<Sheet open={open} onOpenChange={onOpenChange}>
  <SheetContent className='w-[600px] sm:max-w-[600px] flex flex-col'>
    <SheetHeader>
      <SheetTitle>配置标题</SheetTitle>
      <SheetDescription>配置描述文字</SheetDescription>
    </SheetHeader>

    <Form {...form}>
      <form
        onSubmit={form.handleSubmit(onSubmit)}
        className='flex flex-1 flex-col overflow-hidden'
      >
        <Tabs defaultValue='tab1' className='flex flex-1 flex-col overflow-hidden'>
          <TabsList className='grid w-full grid-cols-3'>
            <TabsTrigger value='tab1'>板块1</TabsTrigger>
            <TabsTrigger value='tab2'>板块2</TabsTrigger>
            <TabsTrigger value='tab3'>板块3</TabsTrigger>
          </TabsList>

          <div className='flex-1 overflow-y-auto py-4'>
            <TabsContent value='tab1' className='space-y-4 mt-0'>
              <Card>
                <CardHeader>
                  <CardTitle className='text-base'>分组标题</CardTitle>
                  <CardDescription>分组描述</CardDescription>
                </CardHeader>
                <CardContent className='grid gap-4'>
                  {/* 表单字段 */}
                </CardContent>
              </Card>
            </TabsContent>

            <TabsContent value='tab2' className='space-y-4 mt-0'>
              {/* 板块2内容 */}
            </TabsContent>
          </div>
        </Tabs>

        <SheetFooter className='pt-4'>
          <Button type='button' variant='outline' onClick={() => onOpenChange(false)}>
            取消
          </Button>
          <Button type='submit' disabled={isPending}>
            保存
          </Button>
        </SheetFooter>
      </form>
    </Form>
  </SheetContent>
</Sheet>
```

### Card 内字段布局

多板块弹窗中，Card 内的字段使用垂直布局 + Grid 排列：

```tsx
<Card>
  <CardHeader>
    <CardTitle className='text-base'>分组标题</CardTitle>
    <CardDescription>分组描述说明</CardDescription>
  </CardHeader>
  <CardContent className='grid gap-4 md:grid-cols-2'>
    {/* 两列布局 */}
    <FormField
      control={form.control}
      name='field1'
      render={({ field }) => (
        <FormItem>
          <FormLabel>字段1</FormLabel>
          <FormControl>
            <Input type='number' {...field} />
          </FormControl>
          <FormDescription>字段说明（可选）</FormDescription>
          <FormMessage />
        </FormItem>
      )}
    />
    <FormField
      control={form.control}
      name='field2'
      render={({ field }) => (
        <FormItem>
          <FormLabel>字段2</FormLabel>
          <FormControl>
            <Input type='number' {...field} />
          </FormControl>
          <FormMessage />
        </FormItem>
      )}
    />
  </CardContent>
</Card>
```

### Switch 开关字段

```tsx
<FormField
  control={form.control}
  name='enabled'
  render={({ field }) => (
    <FormItem className='flex flex-row items-center justify-between rounded-lg border p-3'>
      <div className='space-y-0.5'>
        <FormLabel>启用功能</FormLabel>
        <FormDescription>功能说明文字</FormDescription>
      </div>
      <FormControl>
        <Switch checked={field.value} onCheckedChange={field.onChange} />
      </FormControl>
    </FormItem>
  )}
/>
```

---

## 确认弹窗规范

### 普通确认弹窗

```tsx
<ConfirmDialog
  open={open}
  onOpenChange={onOpenChange}
  handleConfirm={handleConfirm}
  title='确认操作'
  desc='确定要执行此操作吗？'
  confirmText='确认'
/>
```

### 危险操作确认弹窗（删除）

需要用户输入确认文本，防止误操作。

```tsx
import { AlertTriangle } from 'lucide-react'
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'

<ConfirmDialog
  open={open}
  onOpenChange={onOpenChange}
  handleConfirm={handleDelete}
  disabled={inputValue.trim() !== expectedValue}
  title={
    <span className='text-destructive'>
      <AlertTriangle
        className='stroke-destructive me-1 inline-block'
        size={18}
      />
      删除项目
    </span>
  }
  desc={
    <div className='space-y-4'>
      <p className='mb-2'>
        确定要删除 <span className='font-bold'>{itemName}</span> 吗？
        <br />
        此操作无法恢复。
      </p>

      <Label className='my-2'>
        请输入名称确认：
        <Input
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder='请输入名称以确认删除'
        />
      </Label>

      <Alert variant='destructive'>
        <AlertTitle>警告！</AlertTitle>
        <AlertDescription>
          请谨慎操作，此操作无法撤销。
        </AlertDescription>
      </Alert>
    </div>
  }
  confirmText='删除'
  destructive
/>
```

### ConfirmDialog Props

| 属性 | 类型 | 说明 |
|------|------|------|
| `open` | `boolean` | 弹窗开关状态 |
| `onOpenChange` | `(open: boolean) => void` | 状态变更回调 |
| `handleConfirm` | `() => void` | 确认按钮回调 |
| `title` | `React.ReactNode` | 标题（支持自定义样式） |
| `desc` | `React.JSX.Element \| string` | 描述内容 |
| `confirmText` | `React.ReactNode` | 确认按钮文本，默认 "确认" |
| `cancelBtnText` | `string` | 取消按钮文本，默认 "取消" |
| `destructive` | `boolean` | 是否为危险操作（红色按钮） |
| `disabled` | `boolean` | 是否禁用确认按钮 |
| `isLoading` | `boolean` | 是否加载中 |

---

## 表单验证

### Zod Schema 定义

```tsx
const formSchema = z
  .object({
    name: z.string().min(1, '请输入名称'),
    email: z.email({ error: (iss) => (iss.input === '' ? '请输入邮箱' : undefined) }),
    phone: z.string().min(1, '请输入电话'),
    role: z.string().min(1, '请选择角色'),
    password: z.string().transform((pwd) => pwd.trim()),
    confirmPassword: z.string().transform((pwd) => pwd.trim()),
    isEdit: z.boolean(),
  })
  // 条件验证：编辑时密码可选
  .refine(
    (data) => {
      if (data.isEdit && !data.password) return true
      return data.password.length > 0
    },
    { message: '请输入密码', path: ['password'] }
  )
  // 密码长度验证
  .refine(
    ({ isEdit, password }) => {
      if (isEdit && !password) return true
      return password.length >= 8
    },
    { message: '密码至少需要8个字符', path: ['password'] }
  )
  // 密码确认验证
  .refine(
    ({ isEdit, password, confirmPassword }) => {
      if (isEdit && !password) return true
      return password === confirmPassword
    },
    { message: '两次输入的密码不一致', path: ['confirmPassword'] }
  )

type FormValues = z.infer<typeof formSchema>
```

### useForm 配置

```tsx
const form = useForm<FormValues>({
  resolver: zodResolver(formSchema),
  defaultValues: isEdit
    ? {
        ...currentRow,
        password: '',
        confirmPassword: '',
        isEdit: true,
      }
    : {
        name: '',
        email: '',
        phone: '',
        role: '',
        password: '',
        confirmPassword: '',
        isEdit: false,
      },
})
```

### 提交处理

```tsx
const onSubmit = (values: FormValues) => {
  // 处理提交逻辑
  mutation.mutate(values)
  form.reset()
  onOpenChange(false)
}
```

---

## 输入组件

### 文本输入

```tsx
<FormControl>
  <Input
    placeholder='请输入...'
    className='col-span-4'
    autoComplete='off'
    {...field}
  />
</FormControl>
```

### 密码输入

```tsx
<FormControl>
  <PasswordInput
    placeholder='请输入密码'
    className='col-span-4'
    {...field}
  />
</FormControl>
```

### 多行文本

```tsx
<FormControl>
  <Textarea
    className='col-span-4 resize-none'
    placeholder='请输入描述...'
    {...field}
  />
</FormControl>
```

### 下拉选择

`SelectDropdown` 组件默认全宽（`w-full`），与其他表单元素保持一致。

```tsx
{/* 水平布局（Dialog 标准表单） */}
<SelectDropdown
  defaultValue={field.value}
  onValueChange={field.onChange}
  placeholder='请选择...'
  className='col-span-4'
  items={options.map(({ label, value }) => ({ label, value }))}
/>

{/* 垂直布局（Dialog 简单表单、Sheet、Card 内） */}
<SelectDropdown
  defaultValue={field.value}
  onValueChange={field.onChange}
  placeholder='请选择...'
  items={options.map(({ label, value }) => ({ label, value }))}
/>
```

### 条件禁用

```tsx
const isPasswordTouched = !!form.formState.dirtyFields.password

<FormControl>
  <PasswordInput
    disabled={!isPasswordTouched}
    placeholder='请再次输入密码'
    className='col-span-4'
    {...field}
  />
</FormControl>
```

---

## 文件结构

### 弹窗组件拆分

当页面有多个弹窗时，建议拆分为独立文件：

```
src/features/{module}/
├── index.tsx                        # 主页面
└── components/
    ├── {module}-dialogs.tsx         # 弹窗聚合组件
    ├── {module}-action-dialog.tsx   # 新建/编辑弹窗
    ├── {module}-delete-dialog.tsx   # 删除确认弹窗
    └── {module}-invite-dialog.tsx   # 邀请弹窗（如有）
```

### 弹窗聚合组件

```tsx
// {module}-dialogs.tsx
import { ModuleActionDialog } from './module-action-dialog'
import { ModuleDeleteDialog } from './module-delete-dialog'
import { useModule } from './module-provider'

export function ModuleDialogs() {
  const { open, setOpen, currentRow, setCurrentRow } = useModule()

  return (
    <>
      <ModuleActionDialog
        key='add'
        open={open === 'add'}
        onOpenChange={() => setOpen('add')}
      />

      {currentRow && (
        <>
          <ModuleActionDialog
            key={`edit-${currentRow.id}`}
            open={open === 'edit'}
            onOpenChange={() => {
              setOpen('edit')
              setTimeout(() => setCurrentRow(null), 500)
            }}
            currentRow={currentRow}
          />

          <ModuleDeleteDialog
            key={`delete-${currentRow.id}`}
            open={open === 'delete'}
            onOpenChange={() => {
              setOpen('delete')
              setTimeout(() => setCurrentRow(null), 500)
            }}
            currentRow={currentRow}
          />
        </>
      )}
    </>
  )
}
```

### 状态管理 Provider

```tsx
// {module}-provider.tsx
import { createContext, useContext, useState } from 'react'

type DialogType = 'add' | 'edit' | 'delete' | null

type ModuleContextType = {
  open: DialogType
  setOpen: (type: DialogType) => void
  currentRow: ItemType | null
  setCurrentRow: (row: ItemType | null) => void
}

const ModuleContext = createContext<ModuleContextType | null>(null)

export function ModuleProvider({ children }: { children: React.ReactNode }) {
  const [open, setOpen] = useState<DialogType>(null)
  const [currentRow, setCurrentRow] = useState<ItemType | null>(null)

  return (
    <ModuleContext.Provider value={{ open, setOpen, currentRow, setCurrentRow }}>
      {children}
    </ModuleContext.Provider>
  )
}

export function useModule() {
  const context = useContext(ModuleContext)
  if (!context) throw new Error('useModule must be used within ModuleProvider')
  return context
}
```

---

## 完整示例

参考以下文件作为完整实现示例：

### Dialog 弹窗示例

- **员工新建/编辑弹窗**（标准表单 Dialog）
  - `src/features/hr/components/employees-action-dialog.tsx`

- **员工邀请弹窗**（简单表单 Dialog）
  - `src/features/hr/components/employees-invite-dialog.tsx`

- **员工删除弹窗**（确认弹窗）
  - `src/features/hr/components/employees-delete-dialog.tsx`

### Sheet 抽屉示例

- **主题配置抽屉**（配置类 Sheet）
  - `src/components/config-drawer.tsx`

### 多板块弹窗示例

- **分销配置弹窗**（Tabs + Dialog）
  - `src/features/distribution/components/config-dialog.tsx`

### 状态管理示例

- **弹窗聚合**
  - `src/features/hr/components/employees-dialogs.tsx`

- **状态管理 Provider**
  - `src/features/hr/components/employees-provider.tsx`

---

## 检查清单

开发新弹窗时，请确认以下要点：

### 类型选择

- [ ] 根据决策流程选择正确的弹窗类型（Dialog / Sheet）
- [ ] 字段 > 15 个或多板块时使用 Sheet + Tabs
- [ ] 配置/设置类使用 Sheet
- [ ] 确认操作使用 ConfirmDialog

### 表单规范

- [ ] 使用 `react-hook-form` + `zod` 进行表单管理和验证
- [ ] 使用 `Form` 系列组件（FormField, FormItem, FormLabel, FormControl, FormMessage）
- [ ] Dialog 标准表单使用水平布局 `grid grid-cols-6`
- [ ] Dialog 简单表单使用垂直布局 `space-y-4`
- [ ] Sheet/多板块表单使用 Card + Grid 布局

### 交互规范

- [ ] 弹窗关闭时调用 `form.reset()` 重置表单
- [ ] 使用 form id 关联 Footer 中的提交按钮
- [ ] 删除操作使用 `ConfirmDialog` + `destructive` 样式
- [ ] 危险操作需要输入确认文本
- [ ] 多板块使用 Tabs 组织，每个 Tab 内用 Card 分组

### 组件规范

- [ ] 下拉选择使用 `SelectDropdown` 组件
- [ ] 密码输入使用 `PasswordInput` 组件
- [ ] 开关选项使用 `Switch` 组件
- [ ] 长内容区域添加 `overflow-y-auto`
