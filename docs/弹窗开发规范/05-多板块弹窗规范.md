# 多板块弹窗规范

## Tabs + Dialog 模式

适用于字段较多但仍需要聚焦完成的场景。

```tsx
<Dialog open={open} onOpenChange={onOpenChange}>
  <DialogContent className='max-w-3xl max-h-[90vh] overflow-y-auto'>
    <DialogHeader>
      <DialogTitle>配置标题</DialogTitle>
      <DialogDescription>配置描述文字</DialogDescription>
    </DialogHeader>

    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className='space-y-6'>
        <Tabs defaultValue='tab1' className='w-full'>
          <TabsList className='grid w-full grid-cols-3'>
            <TabsTrigger value='tab1'>板块1</TabsTrigger>
            <TabsTrigger value='tab2'>板块2</TabsTrigger>
            <TabsTrigger value='tab3'>板块3</TabsTrigger>
          </TabsList>

          <TabsContent value='tab1' className='space-y-4 mt-4'>
            <Card>
              <CardHeader>
                <CardTitle className='text-base'>分组标题</CardTitle>
                <CardDescription>分组描述</CardDescription>
              </CardHeader>
              <CardContent className='grid gap-4 md:grid-cols-2'>
                {/* 表单字段 */}
              </CardContent>
            </Card>
          </TabsContent>

          <TabsContent value='tab2' className='space-y-4 mt-4'>
            {/* 板块2内容 */}
          </TabsContent>

          <TabsContent value='tab3' className='space-y-4 mt-4'>
            {/* 板块3内容 */}
          </TabsContent>
        </Tabs>

        <DialogFooter>
          <Button type='button' variant='outline' onClick={() => onOpenChange(false)}>
            取消
          </Button>
          <Button type='submit' disabled={isPending}>
            {isPending && <Loader2 className='mr-2 h-4 w-4 animate-spin' />}
            保存
          </Button>
        </DialogFooter>
      </form>
    </Form>
  </DialogContent>
</Dialog>
```

---

## Tabs + Sheet 模式

适用于复杂配置、需要大量空间的场景。

```tsx
<Sheet open={open} onOpenChange={onOpenChange}>
  <SheetContent className='w-[600px] sm:max-w-[600px] flex flex-col'>
    <SheetHeader>
      <SheetTitle>配置标题</SheetTitle>
      <SheetDescription>配置描述文字</SheetDescription>
    </SheetHeader>

    <Form {...form}>
      <form
        onSubmit={form.handleSubmit(onSubmit)}
        className='flex flex-1 flex-col overflow-hidden'
      >
        <Tabs defaultValue='tab1' className='flex flex-1 flex-col overflow-hidden'>
          <TabsList className='grid w-full grid-cols-3'>
            <TabsTrigger value='tab1'>板块1</TabsTrigger>
            <TabsTrigger value='tab2'>板块2</TabsTrigger>
            <TabsTrigger value='tab3'>板块3</TabsTrigger>
          </TabsList>

          <div className='flex-1 overflow-y-auto py-4'>
            <TabsContent value='tab1' className='space-y-4 mt-0'>
              <Card>
                <CardHeader>
                  <CardTitle className='text-base'>分组标题</CardTitle>
                  <CardDescription>分组描述</CardDescription>
                </CardHeader>
                <CardContent className='grid gap-4'>
                  {/* 表单字段 */}
                </CardContent>
              </Card>
            </TabsContent>

            <TabsContent value='tab2' className='space-y-4 mt-0'>
              {/* 板块2内容 */}
            </TabsContent>
          </div>
        </Tabs>

        <SheetFooter className='pt-4'>
          <Button type='button' variant='outline' onClick={() => onOpenChange(false)}>
            取消
          </Button>
          <Button type='submit' disabled={isPending}>
            保存
          </Button>
        </SheetFooter>
      </form>
    </Form>
  </SheetContent>
</Sheet>
```

---

## Card 内字段布局

多板块弹窗中，Card 内的字段使用垂直布局 + Grid 排列：

> ⚠️ **重要**：多列 Grid 布局必须添加 `items-start`，确保字段顶部对齐。否则当某个字段有 `FormDescription` 而其他字段没有时，会导致标签和输入框错位。

```tsx
<Card>
  <CardHeader>
    <CardTitle className='text-base'>分组标题</CardTitle>
    <CardDescription>分组描述说明</CardDescription>
  </CardHeader>
  <CardContent className='grid items-start gap-4 md:grid-cols-2'>
    {/* 两列布局 */}
    <FormField
      control={form.control}
      name='field1'
      render={({ field }) => (
        <FormItem>
          <FormLabel>字段1</FormLabel>
          <FormControl>
            <Input type='number' {...field} />
          </FormControl>
          <FormDescription>字段说明（可选）</FormDescription>
          <FormMessage />
        </FormItem>
      )}
    />
    <FormField
      control={form.control}
      name='field2'
      render={({ field }) => (
        <FormItem>
          <FormLabel>字段2</FormLabel>
          <FormControl>
            <Input type='number' {...field} />
          </FormControl>
          <FormMessage />
        </FormItem>
      )}
    />
  </CardContent>
</Card>
```

---

## Switch 开关字段

```tsx
<FormField
  control={form.control}
  name='enabled'
  render={({ field }) => (
    <FormItem className='flex flex-row items-center justify-between rounded-lg border p-3'>
      <div className='space-y-0.5'>
        <FormLabel>启用功能</FormLabel>
        <FormDescription>功能说明文字</FormDescription>
      </div>
      <FormControl>
        <Switch checked={field.value} onCheckedChange={field.onChange} />
      </FormControl>
    </FormItem>
  )}
/>
```

---

## 模式选择建议

| 场景 | 推荐模式 | 理由 |
|------|---------|------|
| 字段 15-25 个 | Tabs + Dialog | 聚焦完成，不占太多空间 |
| 字段 25+ 个 | Tabs + Sheet | 更大空间，可滚动 |
| 需要参考主页面 | Tabs + Sheet | 不完全遮挡 |
| 配置/设置类 | Tabs + Sheet | 渐进式操作 |
