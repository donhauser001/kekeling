# 表单弹窗规范（Dialog）

## 标准表单弹窗（新建/编辑）

适用于字段较多的实体编辑场景。

### 布局特点

- **弹窗宽度**：`sm:max-w-lg`
- **表单布局**：水平布局 `grid grid-cols-6`
- **标签位置**：右对齐 `col-span-2 text-end`
- **输入框位置**：`col-span-4`
- **内容区域**：响应式高度滚动 `max-h-[60vh] min-h-[300px] overflow-y-auto`
- **提交方式**：form id 关联 Footer 按钮

> ⚠️ **高度规范**：避免使用固定像素高度（如 `h-[26.25rem]`），在小屏设备上会导致弹窗超出视口或留白过多。推荐使用 `vh` 单位结合 `min-height` 限制。

### 结构模板

```tsx
<Dialog
  open={open}
  onOpenChange={(state) => {
    form.reset()
    onOpenChange(state)
  }}
>
  <DialogContent className='sm:max-w-lg'>
    <DialogHeader className='text-start'>
      <DialogTitle>{isEdit ? '编辑项目' : '新建项目'}</DialogTitle>
      <DialogDescription>
        {isEdit ? '在此处更新项目信息。' : '在此处创建新项目。'}
        完成后点击保存。
      </DialogDescription>
    </DialogHeader>

    {/* 响应式高度滚动区域 */}
    <div className='max-h-[60vh] min-h-[300px] overflow-y-auto py-1 px-1'>
      <Form {...form}>
        <form
          id='entity-form'
          onSubmit={form.handleSubmit(onSubmit)}
          className='space-y-4 px-0.5'
        >
          {/* 表单字段 */}
        </form>
      </Form>
    </div>

    <DialogFooter>
      <Button type='submit' form='entity-form'>
        保存
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### 字段布局模板（水平布局）

```tsx
<FormField
  control={form.control}
  name='fieldName'
  render={({ field }) => (
    <FormItem className='grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1'>
      <FormLabel className='col-span-2 text-end'>字段标签</FormLabel>
      <FormControl>
        <Input
          placeholder='请输入...'
          className='col-span-4'
          autoComplete='off'
          {...field}
        />
      </FormControl>
      <FormMessage className='col-span-4 col-start-3' />
    </FormItem>
  )}
/>
```

---

## 简单表单弹窗（邀请/快捷操作）

适用于字段较少的快捷操作场景。

### 布局特点

- **弹窗宽度**：`sm:max-w-md`
- **表单布局**：垂直布局（标签在上，输入框在下）
- **表单间距**：`space-y-4`
- **Footer**：包含取消按钮 + 提交按钮

### 结构模板

```tsx
<Dialog
  open={open}
  onOpenChange={(state) => {
    form.reset()
    onOpenChange(state)
  }}
>
  <DialogContent className='sm:max-w-md'>
    <DialogHeader className='text-start'>
      <DialogTitle className='flex items-center gap-2'>
        <IconComponent /> 操作标题
      </DialogTitle>
      <DialogDescription>
        操作描述文字，说明用途和注意事项。
      </DialogDescription>
    </DialogHeader>

    <Form {...form}>
      <form
        id='action-form'
        onSubmit={form.handleSubmit(onSubmit)}
        className='space-y-4'
      >
        {/* 表单字段 */}
      </form>
    </Form>

    <DialogFooter className='gap-y-2'>
      <DialogClose asChild>
        <Button variant='outline'>取消</Button>
      </DialogClose>
      <Button type='submit' form='action-form'>
        确认操作
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### 字段布局模板（垂直布局）

```tsx
<FormField
  control={form.control}
  name='fieldName'
  render={({ field }) => (
    <FormItem>
      <FormLabel>字段标签</FormLabel>
      <FormControl>
        <Input placeholder='请输入...' {...field} />
      </FormControl>
      <FormMessage />
    </FormItem>
  )}
/>
```

---

## 多列布局

当需要在一行显示多个字段时，使用 Grid 布局：

> ⚠️ **重要**：多列 Grid 布局必须添加 `items-start`，确保字段顶部对齐。

```tsx
<div className='grid grid-cols-2 items-start gap-4'>
  <FormField
    control={form.control}
    name='field1'
    render={({ field }) => (
      <FormItem>
        <FormLabel>字段1 *</FormLabel>
        <FormControl>
          <Input placeholder='请输入' {...field} />
        </FormControl>
        <FormMessage />
      </FormItem>
    )}
  />
  <FormField
    control={form.control}
    name='field2'
    render={({ field }) => (
      <FormItem>
        <FormLabel>字段2</FormLabel>
        <FormControl>
          <Input placeholder='请输入' {...field} />
        </FormControl>
        <FormDescription>字段说明</FormDescription>
        <FormMessage />
      </FormItem>
    )}
  />
</div>
```

### 三列布局

```tsx
<div className='grid grid-cols-3 items-start gap-4'>
  {/* 三个字段 */}
</div>
```
