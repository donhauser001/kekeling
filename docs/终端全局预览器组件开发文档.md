# ç»ˆç«¯å…¨å±€é¢„è§ˆå™¨ç»„ä»¶å¼€å‘æ–‡æ¡£

> ç»„ä»¶è·¯å¾„ï¼š`src/components/terminal-preview/`

## æ¦‚è¿°

`TerminalPreview` æ˜¯ä¸€ä¸ªç”¨äºåœ¨ç®¡ç†åå°ä¸­å®æ—¶é¢„è§ˆç»ˆç«¯ç•Œé¢ï¼ˆå°ç¨‹åº/App/H5ï¼‰çš„ React ç»„ä»¶ã€‚è¯¥ç»„ä»¶å®Œå…¨è¿˜åŸç»ˆç«¯é¦–é¡µ UIï¼Œæ”¯æŒçœŸå®æ•°æ®è·å–å’Œæœ¬åœ°æ•°æ®è¦†ç›–ï¼Œé€‚ç”¨äºé¦–é¡µç®¡ç†ã€å“ç‰Œè®¾ç½®ã€è½®æ’­å›¾ç®¡ç†ç­‰åœºæ™¯çš„å®æ—¶é¢„è§ˆã€‚

## æ–‡ä»¶ç»“æ„

```
src/components/terminal-preview/
â”œâ”€â”€ index.tsx    # ä¸»ç»„ä»¶
â”œâ”€â”€ types.ts     # ç±»å‹å®šä¹‰å’Œé»˜è®¤å€¼
â””â”€â”€ api.ts       # API è¯·æ±‚å°è£…
```

---

## å°ºå¯¸å¯¹ç…§è¡¨

é¢„è§ˆå™¨å®½åº¦ä¸º **375px**ï¼ˆæ¨¡æ‹Ÿ iPhone å°ºå¯¸ï¼‰ï¼Œç»ˆç«¯ä½¿ç”¨ **rpx** å•ä½ï¼ˆ750rpx = 375pxï¼‰ï¼Œæ¢ç®—å…³ç³»ï¼š**rpx / 2 â‰ˆ px**

### å­—ä½“å¤§å°å¯¹ç…§

| å…ƒç´  | ç»ˆç«¯ (rpx) | é¢„è§ˆå™¨ (TailwindCSS) | å®é™… px |
|-----|-------------|---------------------|---------|
| é¡¶éƒ¨å“ç‰Œå | 48rpx | `text-2xl` | 24px |
| é¡¶éƒ¨ slogan | 26rpx | `text-[13px]` | 13px |
| æœç´¢æ¡†æ–‡å­— | 28rpx | `text-sm` | 14px |
| ç½®é¡¶åˆ†ç±»å | 36rpx | `text-lg` | 18px |
| ç½®é¡¶åˆ†ç±»æ•°é‡ | 18rpx | `text-[10px]` | 10px |
| ç½®é¡¶åˆ†ç±»æè¿° | 26rpx | `text-[13px]` | 13px |
| éç½®é¡¶åˆ†ç±»å | 26rpx | `text-[13px]` | 13px |
| éç½®é¡¶åˆ†ç±»æ•°é‡ | 20rpx | `text-[10px]` | 10px |
| ç»Ÿè®¡å¡ç‰‡æ•°å€¼ | 40rpx | `text-xl` | 20px |
| ç»Ÿè®¡å¡ç‰‡æ ‡ç­¾ | 24rpx | `text-xs` | 12px |
| æœåŠ¡æ¨èé€‰é¡¹å¡ | 28rpx | `text-sm` | 14px |
| æœåŠ¡åç§° | 28rpx | `text-sm` | 14px |
| æœåŠ¡æè¿° | 24rpx | `text-xs` | 12px |
| æœåŠ¡ä»·æ ¼ | 28rpx | `text-sm` | 14px |
| åº•éƒ¨å¯¼èˆªæ–‡å­— | 24rpx | `text-xs` | 12px |
| é¡µè„šå“ç‰Œå | 28rpx | `text-sm` | 14px |
| å®¢æœçƒ­çº¿ | 24rpx | `text-xs` | 12px |

### å›¾æ ‡å¤§å°å¯¹ç…§

| ä½ç½® | ç»ˆç«¯ (rpx) | é¢„è§ˆå™¨ (TailwindCSS) |
|-----|-------------|---------------------|
| æœç´¢å›¾æ ‡ | 36rpx | `h-5 w-5` |
| ç½®é¡¶åˆ†ç±»å›¾æ ‡ | 56rpx | `h-5 w-5` |
| ç½®é¡¶åˆ†ç±»å›¾æ ‡å®¹å™¨ | 64rpx | `h-9 w-9` |
| éç½®é¡¶åˆ†ç±»å›¾æ ‡ | 36rpx | `h-3 w-3` |
| éç½®é¡¶åˆ†ç±»å›¾æ ‡å®¹å™¨ | 32rpx | `h-5 w-5` |
| æœåŠ¡åˆ—è¡¨å›¾æ ‡ | 48rpx | `h-6 w-6` |
| åº•éƒ¨å¯¼èˆªå›¾æ ‡ | 40rpx | `h-5 w-5` |

### é—´è·å¯¹ç…§

| å…ƒç´  | ç»ˆç«¯ (rpx) | é¢„è§ˆå™¨ (TailwindCSS) |
|-----|-------------|---------------------|
| é¡µé¢æ°´å¹³å†…è¾¹è· | 24rpx | `px-3` (12px) |
| å¡ç‰‡åœ†è§’ | 16rpx | `rounded-2xl` (16px) |
| ç½®é¡¶åˆ†ç±»å¡ç‰‡å†…è¾¹è· | 36px 24px | `px-3 py-5` |
| éç½®é¡¶åˆ†ç±»æ ‡ç­¾å†…è¾¹è· | 12px 20px | `px-3 py-2` |
| å…ƒç´ é—´è· | 16-20rpx | `gap-2` ~ `gap-2.5` |

---

## ç»„ä»¶ Props

```typescript
interface TerminalPreviewProps {
  /** é¢„è§ˆçš„é¡µé¢ç±»å‹ */
  page?: 'home' | 'services' | 'orders' | 'profile'
  
  /** ä¸»é¢˜è®¾ç½®è¦†ç›–ï¼ˆä¼šä¸ API è·å–çš„æ•°æ®åˆå¹¶ï¼‰ */
  themeSettings?: Partial<ThemeSettings>
  
  /** é¦–é¡µè®¾ç½®è¦†ç›– */
  homeSettings?: Partial<HomePageSettings>
  
  /** è½®æ’­å›¾æ•°æ®è¦†ç›– */
  bannerData?: Partial<BannerAreaData>
  
  /** ç»Ÿè®¡æ•°æ®è¦†ç›– */
  statsData?: Partial<StatsData>
  
  /** åˆ†ç±»æ•°æ®è¦†ç›– */
  categories?: ServiceCategory[]
  
  /** æ¨èæœåŠ¡æ•°æ®è¦†ç›– */
  recommendedServices?: Partial<RecommendedServicesData>
  
  /** æ˜¯å¦è‡ªåŠ¨åŠ è½½æ•°æ®ï¼ˆé»˜è®¤ trueï¼‰ */
  autoLoad?: boolean
  
  /** é¢„è§ˆå™¨é«˜åº¦ï¼ˆé»˜è®¤ 680ï¼‰ */
  height?: number
  
  /** æ˜¯å¦æ˜¾ç¤ºæ‰‹æœºå¤–æ¡†ï¼ˆé»˜è®¤ trueï¼‰ */
  showFrame?: boolean
  
  /** è‡ªå®šä¹‰ç±»å */
  className?: string
}
```

---

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

```tsx
import { TerminalPreview } from '@/components/terminal-preview'

function PreviewPage() {
  return <TerminalPreview />
}
```

### é¦–é¡µç®¡ç†åœºæ™¯ï¼ˆå¸¦å®æ—¶æ•°æ®è¦†ç›–ï¼‰

```tsx
import { TerminalPreview } from '@/components/terminal-preview'

function HomepageSettings() {
  const [formData, setFormData] = useState({
    statsEnabled: true,
    statsItems: [...],
    contentEnabled: false,
    contentCode: '',
    serviceRecommend: {...}
  })

  return (
    <TerminalPreview
      page='home'
      homeSettings={{
        stats: {
          enabled: formData.statsEnabled,
          items: formData.statsItems,
        },
        content: {
          enabled: formData.contentEnabled,
          code: formData.contentCode,
        },
        serviceRecommend: formData.serviceRecommend,
      }}
      autoLoad={true}
    />
  )
}
```

### ä¸æ˜¾ç¤ºå¤–æ¡†

```tsx
<TerminalPreview showFrame={false} />
```

### è‡ªå®šä¹‰é«˜åº¦

```tsx
<TerminalPreview height={800} />
```

---

## å›¾æ ‡æ˜ å°„

é¢„è§ˆå™¨å†…ç½®äº†å›¾æ ‡åç§°åˆ° Lucide React ç»„ä»¶çš„æ˜ å°„ï¼Œæ”¯æŒä»¥ä¸‹å›¾æ ‡ï¼š

### ä¸­æ–‡åç§°æ˜ å°„

```typescript
'é™ªè¯ŠæœåŠ¡' â†’ UserCheck
'é™ªè¯Š' â†’ UserCheck
'ä»£åŠæœåŠ¡' â†’ Truck
'ä»£åŠ' â†’ Truck
'å…¨ç¨‹é™ªè¯Š' â†’ Stethoscope
'æ£€æŸ¥é™ªåŒ' â†’ FlaskConical
'ä½é™¢é™ªæŠ¤' â†’ BedDouble
'ä»£åŠæŒ‚å·' â†’ ClipboardList
'ä»£å–æŠ¥å‘Š' â†’ FileText
'ä»£åŠç—…å†' â†’ FileStack
'è¯Šæ–­æœåŠ¡' â†’ MessageSquare
'é…’åº—æœåŠ¡' â†’ Hotel
'ç‰¹è‰²æœåŠ¡' â†’ Sparkles
```

### è‹±æ–‡å›¾æ ‡åç§°æ˜ å°„ï¼ˆä¸åå°å›¾æ ‡é€‰é¡¹å¯¹åº”ï¼‰

```typescript
'stethoscope' â†’ Stethoscope    // å¬è¯Šå™¨
'truck' â†’ Truck                // å¡è½¦/ä»£åŠ
'message-square' â†’ MessageSquare // æ¶ˆæ¯
'building' â†’ Building          // å»ºç­‘
'sparkles' â†’ Sparkles          // é—ªå…‰
'hospital' â†’ Hospital          // åŒ»é™¢
'heart' â†’ Heart                // çˆ±å¿ƒ
'pill' â†’ Pill                  // è¯å“
'syringe' â†’ Syringe            // é’ˆç®¡
'baby' â†’ Baby                  // å©´å„¿
'eye' â†’ Eye                    // çœ¼ç›
'bone' â†’ Bone                  // éª¨éª¼
'brain' â†’ Brain                // å¤§è„‘
'file-text' â†’ FileText         // æ–‡ä»¶
'user-check' â†’ UserCheck       // ç”¨æˆ·ç¡®è®¤
'rocket' â†’ Rocket              // ç«ç®­
'bed' / 'bed-double' â†’ BedDouble // åºŠä½
'clipboard-list' â†’ ClipboardList // å‰ªè´´æ¿
'file-stack' â†’ FileStack       // æ–‡ä»¶å †
'flask-conical' â†’ FlaskConical // çƒ§ç“¶
'bus' â†’ Bus                    // å…¬äº¤
'hotel' â†’ Hotel                // é…’åº—
'star' â†’ Star                  // æ˜Ÿæ˜Ÿ
'shopping-bag' â†’ ShoppingBag   // è´­ç‰©è¢‹
'utensils' â†’ Utensils          // é¤å…·
'car' â†’ Car                    // æ±½è½¦
'grid' â†’ Grid3X3               // é»˜è®¤ç½‘æ ¼
```

### æ·»åŠ æ–°å›¾æ ‡

1. åœ¨ `index.tsx` é¡¶éƒ¨ import æ–°å›¾æ ‡
2. åœ¨ `iconMap` ä¸­æ·»åŠ æ˜ å°„
3. ç¡®ä¿åå°æœåŠ¡åˆ†ç±»ç®¡ç†çš„ `iconOptions` ä¸­ä¹Ÿæœ‰å¯¹åº”é€‰é¡¹

---

## API æ¥å£

é¢„è§ˆå™¨é€šè¿‡ `api.ts` è°ƒç”¨ä»¥ä¸‹æ¥å£è·å–çœŸå®æ•°æ®ï¼š

| æ–¹æ³• | æ¥å£è·¯å¾„ | è¯´æ˜ |
|-----|---------|------|
| `getThemeSettings` | `/config/theme/settings` | è·å–ä¸»é¢˜è®¾ç½®ï¼ˆå“ç‰Œã€é¢œè‰²ç­‰ï¼‰ |
| `getHomePageSettings` | `/home/page-settings` | è·å–é¦–é¡µé…ç½® |
| `getBanners` | `/home/banners?position={area}` | è·å–è½®æ’­å›¾æ•°æ® |
| `getStats` | `/home/stats` | è·å–ç»Ÿè®¡æ•°æ® |
| `getCategories` | `/services/categories` | è·å–æœåŠ¡åˆ†ç±»ï¼ˆå« isPinnedï¼‰ |
| `getRecommendedServices` | `/home/recommended-services` | è·å–æ¨èæœåŠ¡ |

### æ³¨æ„äº‹é¡¹

- API è¯·æ±‚ä¼šè‡ªåŠ¨æºå¸¦ `accessToken`ï¼ˆä» cookie è·å–ï¼‰
- ä½¿ç”¨ TanStack Query è¿›è¡Œæ•°æ®è·å–å’Œç¼“å­˜
- `autoLoad=false` æ—¶ä¸ä¼šè‡ªåŠ¨è¯·æ±‚æ•°æ®

---

## æ•°æ®åˆå¹¶é€»è¾‘

é¢„è§ˆå™¨æ”¯æŒ **API æ•°æ®** ä¸ **Props è¦†ç›–æ•°æ®** çš„åˆå¹¶ï¼Œå®ç°å®æ—¶é¢„è§ˆæ•ˆæœï¼š

```typescript
// åˆå¹¶åçš„ä¸»é¢˜è®¾ç½®
const themeSettings = useMemo(() => ({
  ...defaultThemeSettings,
  ...fetchedThemeSettings,    // API è·å–çš„æ•°æ®
  ...themeSettingsOverride,   // Props ä¼ å…¥çš„è¦†ç›–æ•°æ®
}), [fetchedThemeSettings, themeSettingsOverride])
```

**ä¼˜å…ˆçº§**ï¼šProps è¦†ç›– > API æ•°æ® > é»˜è®¤å€¼

---

## ä¸»é¢˜è‰²åŠ¨æ€å“åº”

### æ·±è‰²/æµ…è‰²æ¨¡å¼ Logo åˆ‡æ¢

```typescript
const getThemeLogo = (lightLogo: string, darkLogo: string) => {
  if (isDarkMode) {
    return darkLogo || lightLogo
  }
  return lightLogo || darkLogo
}
```

### é¢œè‰²åº”ç”¨

- ä½¿ç”¨ `themeSettings.primaryColor` ä½œä¸ºä¸»é¢˜è‰²
- é€šè¿‡å†…è” `style` å±æ€§åŠ¨æ€è®¾ç½®é¢œè‰²
- æ¸å˜è‰²æå–ç¬¬ä¸€ä¸ªé¢œè‰²å€¼ç”¨äºæ–‡å­—ç€è‰²

```typescript
const baseColor = category.color?.includes('gradient')
  ? category.color.match(/#[a-fA-F0-9]{6}/)?.[0] || themeSettings.primaryColor
  : category.color || themeSettings.primaryColor
```

---

## å¼€å‘è§„èŒƒ

### æ ·å¼è§„èŒƒ

1. **ä½¿ç”¨ TailwindCSS** è€Œéå†…è”æ ·å¼ï¼ˆåŠ¨æ€é¢œè‰²é™¤å¤–ï¼‰
2. **éµå¾ªå°ºå¯¸å¯¹ç…§è¡¨**ï¼Œç¡®ä¿ä¸ç»ˆç«¯ä¸€è‡´
3. **å›¾æ ‡ç»Ÿä¸€ä½¿ç”¨ Lucide React**ï¼Œé€šè¿‡ `iconMap` æ˜ å°„
4. **é¢œè‰²å˜é‡**ï¼šåŠ¨æ€é¢œè‰²ä½¿ç”¨ `style={{ color: xxx }}`

### ä»£ç è§„èŒƒ

1. **ç±»å‹å®šä¹‰**ï¼šæ‰€æœ‰æ¥å£å®šä¹‰åœ¨ `types.ts`
2. **API å°è£…**ï¼šæ‰€æœ‰è¯·æ±‚æ”¾åœ¨ `api.ts`
3. **ç»„ä»¶æ‹†åˆ†**ï¼šå¤æ‚æ¸²æŸ“é€»è¾‘ä½¿ç”¨ `renderXxx` å‡½æ•°
4. **æ•°æ®è·å–**ï¼šä½¿ç”¨ TanStack Query çš„ `useQuery`

### æ–°å¢åŠŸèƒ½æ­¥éª¤

1. åœ¨ `types.ts` å®šä¹‰ç›¸å…³æ¥å£
2. åœ¨ `api.ts` æ·»åŠ  API æ–¹æ³•
3. åœ¨ `index.tsx` æ·»åŠ æ•°æ®è·å–å’Œæ¸²æŸ“é€»è¾‘
4. æ›´æ–°æ­¤æ–‡æ¡£

---

## ç»ˆç«¯æºç å‚è€ƒ

é¢„è§ˆå™¨ UI åŸºäºä»¥ä¸‹ç»ˆç«¯ï¼ˆå°ç¨‹åºï¼‰æ–‡ä»¶ï¼š

- **é¡µé¢é€»è¾‘**ï¼š`miniapp/src/pages/index/index.tsx`
- **é¡µé¢æ ·å¼**ï¼š`miniapp/src/pages/index/index.scss`
- **åº•éƒ¨å¯¼èˆª**ï¼š`miniapp/src/components/CustomTabBar/index.tsx`

ä¿®æ”¹é¢„è§ˆå™¨æ—¶ï¼Œåº”å…ˆæŸ¥çœ‹ç»ˆç«¯æºç ç¡®ä¿ä¸€è‡´æ€§ã€‚

---

## å¤šç»ˆç«¯é€‚é…

è¯¥é¢„è§ˆå™¨è®¾è®¡ä¸ºæ”¯æŒå¤šç»ˆç«¯ï¼ˆå°ç¨‹åºã€Appã€H5ï¼‰çš„é€šç”¨é¢„è§ˆå™¨ã€‚ç›®å‰ä¸»è¦å®ç°äº†é¦–é¡µé¢„è§ˆï¼Œåç»­å¯æ‰©å±•ï¼š

| ç»ˆç«¯ç±»å‹ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| å¾®ä¿¡å°ç¨‹åº | âœ… å·²æ”¯æŒ | é¦–é¡µå®Œæ•´é¢„è§ˆ |
| App (iOS/Android) | ğŸ”œ è®¡åˆ’ä¸­ | UI ç›¸åŒï¼Œå¯å¤ç”¨ |
| H5 ç§»åŠ¨ç«¯ | ğŸ”œ è®¡åˆ’ä¸­ | UI ç›¸åŒï¼Œå¯å¤ç”¨ |

---

## ç‰ˆæœ¬å†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
|-----|------|---------|
| 2024-12-10 | 1.0.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæˆé¦–é¡µé¢„è§ˆåŠŸèƒ½ |
| 2024-12-10 | 1.1.0 | å…¨é¢è°ƒæ•´å­—ä½“å’Œå›¾æ ‡å°ºå¯¸ï¼Œä¸ç»ˆç«¯å¯¹é½ |
| 2024-12-10 | 1.2.0 | æ‰©å±•å›¾æ ‡æ˜ å°„ï¼Œæ”¯æŒæ‰€æœ‰åå°å›¾æ ‡é€‰é¡¹ |
| 2024-12-10 | 2.0.0 | é‡å‘½åä¸ºã€Œç»ˆç«¯å…¨å±€é¢„è§ˆå™¨ã€ï¼Œæ”¯æŒå¤šç»ˆç«¯æ¦‚å¿µ |

---

## å¾…ä¼˜åŒ–é¡¹

- [ ] æ”¯æŒæ›´å¤šé¡µé¢é¢„è§ˆï¼ˆæœåŠ¡é¡µã€è®¢å•é¡µã€ä¸ªäººä¸­å¿ƒé¡µï¼‰
- [ ] æ·»åŠ æ·±è‰²æ¨¡å¼å®Œæ•´é¢„è§ˆ
- [ ] æ”¯æŒè½®æ’­å›¾è‡ªåŠ¨æ’­æ”¾
- [ ] æ·»åŠ äº¤äº’åŠ¨ç”»æ•ˆæœ
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] App ç«¯ç‰¹æœ‰ UI å·®å¼‚å¤„ç†
- [ ] H5 ç«¯ç‰¹æœ‰ UI å·®å¼‚å¤„ç†

